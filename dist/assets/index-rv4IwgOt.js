(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();function Ec(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tc={exports:{}},ai={},_c={exports:{}},oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hn=Symbol.for("react.element"),af=Symbol.for("react.portal"),of=Symbol.for("react.fragment"),sf=Symbol.for("react.strict_mode"),lf=Symbol.for("react.profiler"),cf=Symbol.for("react.provider"),uf=Symbol.for("react.context"),df=Symbol.for("react.forward_ref"),ff=Symbol.for("react.suspense"),pf=Symbol.for("react.memo"),hf=Symbol.for("react.lazy"),rl=Symbol.iterator;function mf(e){return e===null||typeof e!="object"?null:(e=rl&&e[rl]||e["@@iterator"],typeof e=="function"?e:null)}var Rc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ac=Object.assign,Pc={};function Zr(e,t,r){this.props=e,this.context=t,this.refs=Pc,this.updater=r||Rc}Zr.prototype.isReactComponent={};Zr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Zr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Fc(){}Fc.prototype=Zr.prototype;function as(e,t,r){this.props=e,this.context=t,this.refs=Pc,this.updater=r||Rc}var is=as.prototype=new Fc;is.constructor=as;Ac(is,Zr.prototype);is.isPureReactComponent=!0;var nl=Array.isArray,zc=Object.prototype.hasOwnProperty,os={current:null},Oc={key:!0,ref:!0,__self:!0,__source:!0};function Ic(e,t,r){var n,a={},i=null,s=null;if(t!=null)for(n in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(i=""+t.key),t)zc.call(t,n)&&!Oc.hasOwnProperty(n)&&(a[n]=t[n]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)a[n]===void 0&&(a[n]=c[n]);return{$$typeof:Hn,type:e,key:i,ref:s,props:a,_owner:os.current}}function gf(e,t){return{$$typeof:Hn,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ss(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hn}function yf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var al=/\/+/g;function $i(e,t){return typeof e=="object"&&e!==null&&e.key!=null?yf(""+e.key):t.toString(36)}function ha(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Hn:case af:s=!0}}if(s)return s=e,a=a(s),e=n===""?"."+$i(s,0):n,nl(a)?(r="",e!=null&&(r=e.replace(al,"$&/")+"/"),ha(a,t,r,"",function(u){return u})):a!=null&&(ss(a)&&(a=gf(a,r+(!a.key||s&&s.key===a.key?"":(""+a.key).replace(al,"$&/")+"/")+e)),t.push(a)),1;if(s=0,n=n===""?".":n+":",nl(e))for(var c=0;c<e.length;c++){i=e[c];var l=n+$i(i,c);s+=ha(i,t,r,l,a)}else if(l=mf(e),typeof l=="function")for(e=l.call(e),c=0;!(i=e.next()).done;)i=i.value,l=n+$i(i,c++),s+=ha(i,t,r,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Xn(e,t,r){if(e==null)return e;var n=[],a=0;return ha(e,n,"","",function(i){return t.call(r,i,a++)}),n}function vf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var De={current:null},ma={transition:null},xf={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:ma,ReactCurrentOwner:os};function Lc(){throw Error("act(...) is not supported in production builds of React.")}oe.Children={map:Xn,forEach:function(e,t,r){Xn(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Xn(e,function(){t++}),t},toArray:function(e){return Xn(e,function(t){return t})||[]},only:function(e){if(!ss(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};oe.Component=Zr;oe.Fragment=of;oe.Profiler=lf;oe.PureComponent=as;oe.StrictMode=sf;oe.Suspense=ff;oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xf;oe.act=Lc;oe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Ac({},e.props),a=e.key,i=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,s=os.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)zc.call(t,l)&&!Oc.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&c!==void 0?c[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:Hn,type:e.type,key:a,ref:i,props:n,_owner:s}};oe.createContext=function(e){return e={$$typeof:uf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cf,_context:e},e.Consumer=e};oe.createElement=Ic;oe.createFactory=function(e){var t=Ic.bind(null,e);return t.type=e,t};oe.createRef=function(){return{current:null}};oe.forwardRef=function(e){return{$$typeof:df,render:e}};oe.isValidElement=ss;oe.lazy=function(e){return{$$typeof:hf,_payload:{_status:-1,_result:e},_init:vf}};oe.memo=function(e,t){return{$$typeof:pf,type:e,compare:t===void 0?null:t}};oe.startTransition=function(e){var t=ma.transition;ma.transition={};try{e()}finally{ma.transition=t}};oe.unstable_act=Lc;oe.useCallback=function(e,t){return De.current.useCallback(e,t)};oe.useContext=function(e){return De.current.useContext(e)};oe.useDebugValue=function(){};oe.useDeferredValue=function(e){return De.current.useDeferredValue(e)};oe.useEffect=function(e,t){return De.current.useEffect(e,t)};oe.useId=function(){return De.current.useId()};oe.useImperativeHandle=function(e,t,r){return De.current.useImperativeHandle(e,t,r)};oe.useInsertionEffect=function(e,t){return De.current.useInsertionEffect(e,t)};oe.useLayoutEffect=function(e,t){return De.current.useLayoutEffect(e,t)};oe.useMemo=function(e,t){return De.current.useMemo(e,t)};oe.useReducer=function(e,t,r){return De.current.useReducer(e,t,r)};oe.useRef=function(e){return De.current.useRef(e)};oe.useState=function(e){return De.current.useState(e)};oe.useSyncExternalStore=function(e,t,r){return De.current.useSyncExternalStore(e,t,r)};oe.useTransition=function(){return De.current.useTransition()};oe.version="18.3.1";_c.exports=oe;var xt=_c.exports;const ae=Ec(xt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kf=xt,wf=Symbol.for("react.element"),bf=Symbol.for("react.fragment"),jf=Object.prototype.hasOwnProperty,Sf=kf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Mf={key:!0,ref:!0,__self:!0,__source:!0};function Nc(e,t,r){var n,a={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)jf.call(t,n)&&!Mf.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:wf,type:e,key:i,ref:s,props:a,_owner:Sf.current}}ai.Fragment=bf;ai.jsx=Nc;ai.jsxs=Nc;Tc.exports=ai;var o=Tc.exports,Bc={exports:{}},tt={},Dc={exports:{}},Wc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,j){var P=I.length;I.push(j);e:for(;0<P;){var E=P-1>>>1,R=I[E];if(0<a(R,j))I[E]=j,I[P]=R,P=E;else break e}}function r(I){return I.length===0?null:I[0]}function n(I){if(I.length===0)return null;var j=I[0],P=I.pop();if(P!==j){I[0]=P;e:for(var E=0,R=I.length,Z=R>>>1;E<Z;){var X=2*(E+1)-1,z=I[X],H=X+1,ee=I[H];if(0>a(z,P))H<R&&0>a(ee,z)?(I[E]=ee,I[H]=P,E=H):(I[E]=z,I[X]=P,E=X);else if(H<R&&0>a(ee,P))I[E]=ee,I[H]=P,E=H;else break e}}return j}function a(I,j){var P=I.sortIndex-j.sortIndex;return P!==0?P:I.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();e.unstable_now=function(){return s.now()-c}}var l=[],u=[],x=1,f=null,v=3,y=!1,g=!1,d=!1,w=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(I){for(var j=r(u);j!==null;){if(j.callback===null)n(u);else if(j.startTime<=I)n(u),j.sortIndex=j.expirationTime,t(l,j);else break;j=r(u)}}function k(I){if(d=!1,m(I),!g)if(r(l)!==null)g=!0,ne(A);else{var j=r(u);j!==null&&ce(k,j.startTime-I)}}function A(I,j){g=!1,d&&(d=!1,h($),$=-1),y=!0;var P=v;try{for(m(j),f=r(l);f!==null&&(!(f.expirationTime>j)||I&&!Q());){var E=f.callback;if(typeof E=="function"){f.callback=null,v=f.priorityLevel;var R=E(f.expirationTime<=j);j=e.unstable_now(),typeof R=="function"?f.callback=R:f===r(l)&&n(l),m(j)}else n(l);f=r(l)}if(f!==null)var Z=!0;else{var X=r(u);X!==null&&ce(k,X.startTime-j),Z=!1}return Z}finally{f=null,v=P,y=!1}}var _=!1,O=null,$=-1,W=5,D=-1;function Q(){return!(e.unstable_now()-D<W)}function G(){if(O!==null){var I=e.unstable_now();D=I;var j=!0;try{j=O(!0,I)}finally{j?V():(_=!1,O=null)}}else _=!1}var V;if(typeof p=="function")V=function(){p(G)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,re=ie.port2;ie.port1.onmessage=G,V=function(){re.postMessage(null)}}else V=function(){w(G,0)};function ne(I){O=I,_||(_=!0,V())}function ce(I,j){$=w(function(){I(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){g||y||(g=!0,ne(A))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(I){switch(v){case 1:case 2:case 3:var j=3;break;default:j=v}var P=v;v=j;try{return I()}finally{v=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,j){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var P=v;v=I;try{return j()}finally{v=P}},e.unstable_scheduleCallback=function(I,j,P){var E=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?E+P:E):P=E,I){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=P+R,I={id:x++,callback:j,priorityLevel:I,startTime:P,expirationTime:R,sortIndex:-1},P>E?(I.sortIndex=P,t(u,I),r(l)===null&&I===r(u)&&(d?(h($),$=-1):d=!0,ce(k,P-E))):(I.sortIndex=R,t(l,I),g||y||(g=!0,ne(A))),I},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function(I){var j=v;return function(){var P=v;v=j;try{return I.apply(this,arguments)}finally{v=P}}}})(Wc);Dc.exports=Wc;var $f=Dc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cf=xt,Ze=$f;function B(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hc=new Set,Sn={};function vr(e,t){Wr(e,t),Wr(e+"Capture",t)}function Wr(e,t){for(Sn[e]=t,e=0;e<t.length;e++)Hc.add(t[e])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=Object.prototype.hasOwnProperty,Ef=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,il={},ol={};function Tf(e){return ro.call(ol,e)?!0:ro.call(il,e)?!1:Ef.test(e)?ol[e]=!0:(il[e]=!0,!1)}function _f(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Rf(e,t,r,n){if(t===null||typeof t>"u"||_f(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function We(e,t,r,n,a,i,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ae[e]=new We(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ae[t]=new We(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ae[e]=new We(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ae[e]=new We(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ae[e]=new We(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ae[e]=new We(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ae[e]=new We(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ae[e]=new We(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ae[e]=new We(e,5,!1,e.toLowerCase(),null,!1,!1)});var ls=/[\-:]([a-z])/g;function cs(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ls,cs);Ae[t]=new We(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ls,cs);Ae[t]=new We(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ls,cs);Ae[t]=new We(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ae[e]=new We(e,1,!1,e.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new We("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ae[e]=new We(e,1,!1,e.toLowerCase(),null,!0,!0)});function us(e,t,r,n){var a=Ae.hasOwnProperty(t)?Ae[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Rf(t,r,a,n)&&(r=null),n||a===null?Tf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ot=Cf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qn=Symbol.for("react.element"),Sr=Symbol.for("react.portal"),Mr=Symbol.for("react.fragment"),ds=Symbol.for("react.strict_mode"),no=Symbol.for("react.profiler"),Uc=Symbol.for("react.provider"),Kc=Symbol.for("react.context"),fs=Symbol.for("react.forward_ref"),ao=Symbol.for("react.suspense"),io=Symbol.for("react.suspense_list"),ps=Symbol.for("react.memo"),Lt=Symbol.for("react.lazy"),Vc=Symbol.for("react.offscreen"),sl=Symbol.iterator;function tn(e){return e===null||typeof e!="object"?null:(e=sl&&e[sl]||e["@@iterator"],typeof e=="function"?e:null)}var ve=Object.assign,Ci;function un(e){if(Ci===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ci=t&&t[1]||""}return`
`+Ci+e}var Ei=!1;function Ti(e,t){if(!e||Ei)return"";Ei=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),s=a.length-1,c=i.length-1;1<=s&&0<=c&&a[s]!==i[c];)c--;for(;1<=s&&0<=c;s--,c--)if(a[s]!==i[c]){if(s!==1||c!==1)do if(s--,c--,0>c||a[s]!==i[c]){var l=`
`+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=c);break}}}finally{Ei=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?un(e):""}function Af(e){switch(e.tag){case 5:return un(e.type);case 16:return un("Lazy");case 13:return un("Suspense");case 19:return un("SuspenseList");case 0:case 2:case 15:return e=Ti(e.type,!1),e;case 11:return e=Ti(e.type.render,!1),e;case 1:return e=Ti(e.type,!0),e;default:return""}}function oo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mr:return"Fragment";case Sr:return"Portal";case no:return"Profiler";case ds:return"StrictMode";case ao:return"Suspense";case io:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Kc:return(e.displayName||"Context")+".Consumer";case Uc:return(e._context.displayName||"Context")+".Provider";case fs:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ps:return t=e.displayName||null,t!==null?t:oo(e.type)||"Memo";case Lt:t=e._payload,e=e._init;try{return oo(e(t))}catch{}}return null}function Pf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oo(t);case 8:return t===ds?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ff(e){var t=Gc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(s){n=""+s,i.call(this,s)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(s){n=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zn(e){e._valueTracker||(e._valueTracker=Ff(e))}function Qc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Gc(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ca(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function so(e,t){var r=t.checked;return ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ll(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Zt(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Yc(e,t){t=t.checked,t!=null&&us(e,"checked",t,!1)}function lo(e,t){Yc(e,t);var r=Zt(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?co(e,t.type,r):t.hasOwnProperty("defaultValue")&&co(e,t.type,Zt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function co(e,t,r){(t!=="number"||Ca(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var dn=Array.isArray;function Or(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Zt(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function uo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(B(91));return ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ul(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(B(92));if(dn(r)){if(1<r.length)throw Error(B(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Zt(r)}}function Xc(e,t){var r=Zt(t.value),n=Zt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function dl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function qc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?qc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jn,Zc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jn=Jn||document.createElement("div"),Jn.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Mn(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zf=["Webkit","ms","Moz","O"];Object.keys(hn).forEach(function(e){zf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hn[t]=hn[e]})});function Jc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||hn.hasOwnProperty(e)&&hn[e]?(""+t).trim():t+"px"}function eu(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Jc(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var Of=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function po(e,t){if(t){if(Of[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(B(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(B(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(B(61))}if(t.style!=null&&typeof t.style!="object")throw Error(B(62))}}function ho(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mo=null;function hs(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var go=null,Ir=null,Lr=null;function fl(e){if(e=Vn(e)){if(typeof go!="function")throw Error(B(280));var t=e.stateNode;t&&(t=ci(t),go(e.stateNode,e.type,t))}}function tu(e){Ir?Lr?Lr.push(e):Lr=[e]:Ir=e}function ru(){if(Ir){var e=Ir,t=Lr;if(Lr=Ir=null,fl(e),t)for(e=0;e<t.length;e++)fl(t[e])}}function nu(e,t){return e(t)}function au(){}var _i=!1;function iu(e,t,r){if(_i)return e(t,r);_i=!0;try{return nu(e,t,r)}finally{_i=!1,(Ir!==null||Lr!==null)&&(au(),ru())}}function $n(e,t){var r=e.stateNode;if(r===null)return null;var n=ci(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(B(231,t,typeof r));return r}var yo=!1;if(Rt)try{var rn={};Object.defineProperty(rn,"passive",{get:function(){yo=!0}}),window.addEventListener("test",rn,rn),window.removeEventListener("test",rn,rn)}catch{yo=!1}function If(e,t,r,n,a,i,s,c,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(x){this.onError(x)}}var mn=!1,Ea=null,Ta=!1,vo=null,Lf={onError:function(e){mn=!0,Ea=e}};function Nf(e,t,r,n,a,i,s,c,l){mn=!1,Ea=null,If.apply(Lf,arguments)}function Bf(e,t,r,n,a,i,s,c,l){if(Nf.apply(this,arguments),mn){if(mn){var u=Ea;mn=!1,Ea=null}else throw Error(B(198));Ta||(Ta=!0,vo=u)}}function xr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function ou(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pl(e){if(xr(e)!==e)throw Error(B(188))}function Df(e){var t=e.alternate;if(!t){if(t=xr(e),t===null)throw Error(B(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return pl(a),e;if(i===n)return pl(a),t;i=i.sibling}throw Error(B(188))}if(r.return!==n.return)r=a,n=i;else{for(var s=!1,c=a.child;c;){if(c===r){s=!0,r=a,n=i;break}if(c===n){s=!0,n=a,r=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===r){s=!0,r=i,n=a;break}if(c===n){s=!0,n=i,r=a;break}c=c.sibling}if(!s)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?e:t}function su(e){return e=Df(e),e!==null?lu(e):null}function lu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=lu(e);if(t!==null)return t;e=e.sibling}return null}var cu=Ze.unstable_scheduleCallback,hl=Ze.unstable_cancelCallback,Wf=Ze.unstable_shouldYield,Hf=Ze.unstable_requestPaint,je=Ze.unstable_now,Uf=Ze.unstable_getCurrentPriorityLevel,ms=Ze.unstable_ImmediatePriority,uu=Ze.unstable_UserBlockingPriority,_a=Ze.unstable_NormalPriority,Kf=Ze.unstable_LowPriority,du=Ze.unstable_IdlePriority,ii=null,St=null;function Vf(e){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(ii,e,void 0,(e.current.flags&128)===128)}catch{}}var yt=Math.clz32?Math.clz32:Yf,Gf=Math.log,Qf=Math.LN2;function Yf(e){return e>>>=0,e===0?32:31-(Gf(e)/Qf|0)|0}var ea=64,ta=4194304;function fn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ra(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,s=r&268435455;if(s!==0){var c=s&~a;c!==0?n=fn(c):(i&=s,i!==0&&(n=fn(i)))}else s=r&~a,s!==0?n=fn(s):i!==0&&(n=fn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-yt(t),a=1<<r,n|=e[r],t&=~a;return n}function Xf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qf(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-yt(i),c=1<<s,l=a[s];l===-1?(!(c&r)||c&n)&&(a[s]=Xf(c,t)):l<=t&&(e.expiredLanes|=c),i&=~c}}function xo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function fu(){var e=ea;return ea<<=1,!(ea&4194240)&&(ea=64),e}function Ri(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Un(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yt(t),e[t]=r}function Zf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-yt(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function gs(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-yt(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var le=0;function pu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var hu,ys,mu,gu,yu,ko=!1,ra=[],Ut=null,Kt=null,Vt=null,Cn=new Map,En=new Map,Bt=[],Jf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ml(e,t){switch(e){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Kt=null;break;case"mouseover":case"mouseout":Vt=null;break;case"pointerover":case"pointerout":Cn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":En.delete(t.pointerId)}}function nn(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Vn(t),t!==null&&ys(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ep(e,t,r,n,a){switch(t){case"focusin":return Ut=nn(Ut,e,t,r,n,a),!0;case"dragenter":return Kt=nn(Kt,e,t,r,n,a),!0;case"mouseover":return Vt=nn(Vt,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return Cn.set(i,nn(Cn.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,En.set(i,nn(En.get(i)||null,e,t,r,n,a)),!0}return!1}function vu(e){var t=or(e.target);if(t!==null){var r=xr(t);if(r!==null){if(t=r.tag,t===13){if(t=ou(r),t!==null){e.blockedOn=t,yu(e.priority,function(){mu(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ga(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=wo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);mo=n,r.target.dispatchEvent(n),mo=null}else return t=Vn(r),t!==null&&ys(t),e.blockedOn=r,!1;t.shift()}return!0}function gl(e,t,r){ga(e)&&r.delete(t)}function tp(){ko=!1,Ut!==null&&ga(Ut)&&(Ut=null),Kt!==null&&ga(Kt)&&(Kt=null),Vt!==null&&ga(Vt)&&(Vt=null),Cn.forEach(gl),En.forEach(gl)}function an(e,t){e.blockedOn===t&&(e.blockedOn=null,ko||(ko=!0,Ze.unstable_scheduleCallback(Ze.unstable_NormalPriority,tp)))}function Tn(e){function t(a){return an(a,e)}if(0<ra.length){an(ra[0],e);for(var r=1;r<ra.length;r++){var n=ra[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ut!==null&&an(Ut,e),Kt!==null&&an(Kt,e),Vt!==null&&an(Vt,e),Cn.forEach(t),En.forEach(t),r=0;r<Bt.length;r++)n=Bt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Bt.length&&(r=Bt[0],r.blockedOn===null);)vu(r),r.blockedOn===null&&Bt.shift()}var Nr=Ot.ReactCurrentBatchConfig,Aa=!0;function rp(e,t,r,n){var a=le,i=Nr.transition;Nr.transition=null;try{le=1,vs(e,t,r,n)}finally{le=a,Nr.transition=i}}function np(e,t,r,n){var a=le,i=Nr.transition;Nr.transition=null;try{le=4,vs(e,t,r,n)}finally{le=a,Nr.transition=i}}function vs(e,t,r,n){if(Aa){var a=wo(e,t,r,n);if(a===null)Di(e,t,n,Pa,r),ml(e,n);else if(ep(a,e,t,r,n))n.stopPropagation();else if(ml(e,n),t&4&&-1<Jf.indexOf(e)){for(;a!==null;){var i=Vn(a);if(i!==null&&hu(i),i=wo(e,t,r,n),i===null&&Di(e,t,n,Pa,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else Di(e,t,n,null,r)}}var Pa=null;function wo(e,t,r,n){if(Pa=null,e=hs(n),e=or(e),e!==null)if(t=xr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=ou(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pa=e,null}function xu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Uf()){case ms:return 1;case uu:return 4;case _a:case Kf:return 16;case du:return 536870912;default:return 16}default:return 16}}var Wt=null,xs=null,ya=null;function ku(){if(ya)return ya;var e,t=xs,r=t.length,n,a="value"in Wt?Wt.value:Wt.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var s=r-e;for(n=1;n<=s&&t[r-n]===a[i-n];n++);return ya=a.slice(e,1<n?1-n:void 0)}function va(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function na(){return!0}function yl(){return!1}function rt(e){function t(r,n,a,i,s){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?na:yl,this.isPropagationStopped=yl,this}return ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),t}var Jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ks=rt(Jr),Kn=ve({},Jr,{view:0,detail:0}),ap=rt(Kn),Ai,Pi,on,oi=ve({},Kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ws,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&e.type==="mousemove"?(Ai=e.screenX-on.screenX,Pi=e.screenY-on.screenY):Pi=Ai=0,on=e),Ai)},movementY:function(e){return"movementY"in e?e.movementY:Pi}}),vl=rt(oi),ip=ve({},oi,{dataTransfer:0}),op=rt(ip),sp=ve({},Kn,{relatedTarget:0}),Fi=rt(sp),lp=ve({},Jr,{animationName:0,elapsedTime:0,pseudoElement:0}),cp=rt(lp),up=ve({},Jr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dp=rt(up),fp=ve({},Jr,{data:0}),xl=rt(fp),pp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mp[e])?!!t[e]:!1}function ws(){return gp}var yp=ve({},Kn,{key:function(e){if(e.key){var t=pp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=va(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ws,charCode:function(e){return e.type==="keypress"?va(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?va(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vp=rt(yp),xp=ve({},oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kl=rt(xp),kp=ve({},Kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ws}),wp=rt(kp),bp=ve({},Jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jp=rt(bp),Sp=ve({},oi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mp=rt(Sp),$p=[9,13,27,32],bs=Rt&&"CompositionEvent"in window,gn=null;Rt&&"documentMode"in document&&(gn=document.documentMode);var Cp=Rt&&"TextEvent"in window&&!gn,wu=Rt&&(!bs||gn&&8<gn&&11>=gn),wl=" ",bl=!1;function bu(e,t){switch(e){case"keyup":return $p.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ju(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function Ep(e,t){switch(e){case"compositionend":return ju(t);case"keypress":return t.which!==32?null:(bl=!0,wl);case"textInput":return e=t.data,e===wl&&bl?null:e;default:return null}}function Tp(e,t){if($r)return e==="compositionend"||!bs&&bu(e,t)?(e=ku(),ya=xs=Wt=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wu&&t.locale!=="ko"?null:t.data;default:return null}}var _p={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!_p[e.type]:t==="textarea"}function Su(e,t,r,n){tu(n),t=Fa(t,"onChange"),0<t.length&&(r=new ks("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var yn=null,_n=null;function Rp(e){zu(e,0)}function si(e){var t=Tr(e);if(Qc(t))return e}function Ap(e,t){if(e==="change")return t}var Mu=!1;if(Rt){var zi;if(Rt){var Oi="oninput"in document;if(!Oi){var Sl=document.createElement("div");Sl.setAttribute("oninput","return;"),Oi=typeof Sl.oninput=="function"}zi=Oi}else zi=!1;Mu=zi&&(!document.documentMode||9<document.documentMode)}function Ml(){yn&&(yn.detachEvent("onpropertychange",$u),_n=yn=null)}function $u(e){if(e.propertyName==="value"&&si(_n)){var t=[];Su(t,_n,e,hs(e)),iu(Rp,t)}}function Pp(e,t,r){e==="focusin"?(Ml(),yn=t,_n=r,yn.attachEvent("onpropertychange",$u)):e==="focusout"&&Ml()}function Fp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return si(_n)}function zp(e,t){if(e==="click")return si(t)}function Op(e,t){if(e==="input"||e==="change")return si(t)}function Ip(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:Ip;function Rn(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!ro.call(t,a)||!kt(e[a],t[a]))return!1}return!0}function $l(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cl(e,t){var r=$l(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$l(r)}}function Cu(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cu(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Eu(){for(var e=window,t=Ca();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ca(e.document)}return t}function js(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Lp(e){var t=Eu(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Cu(r.ownerDocument.documentElement,r)){if(n!==null&&js(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Cl(r,i);var s=Cl(r,n);a&&s&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Np=Rt&&"documentMode"in document&&11>=document.documentMode,Cr=null,bo=null,vn=null,jo=!1;function El(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jo||Cr==null||Cr!==Ca(n)||(n=Cr,"selectionStart"in n&&js(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),vn&&Rn(vn,n)||(vn=n,n=Fa(bo,"onSelect"),0<n.length&&(t=new ks("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Cr)))}function aa(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Er={animationend:aa("Animation","AnimationEnd"),animationiteration:aa("Animation","AnimationIteration"),animationstart:aa("Animation","AnimationStart"),transitionend:aa("Transition","TransitionEnd")},Ii={},Tu={};Rt&&(Tu=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);function li(e){if(Ii[e])return Ii[e];if(!Er[e])return e;var t=Er[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Tu)return Ii[e]=t[r];return e}var _u=li("animationend"),Ru=li("animationiteration"),Au=li("animationstart"),Pu=li("transitionend"),Fu=new Map,Tl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(e,t){Fu.set(e,t),vr(t,[e])}for(var Li=0;Li<Tl.length;Li++){var Ni=Tl[Li],Bp=Ni.toLowerCase(),Dp=Ni[0].toUpperCase()+Ni.slice(1);er(Bp,"on"+Dp)}er(_u,"onAnimationEnd");er(Ru,"onAnimationIteration");er(Au,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(Pu,"onTransitionEnd");Wr("onMouseEnter",["mouseout","mouseover"]);Wr("onMouseLeave",["mouseout","mouseover"]);Wr("onPointerEnter",["pointerout","pointerover"]);Wr("onPointerLeave",["pointerout","pointerover"]);vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wp=new Set("cancel close invalid load scroll toggle".split(" ").concat(pn));function _l(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Bf(n,t,void 0,e),e.currentTarget=null}function zu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var s=n.length-1;0<=s;s--){var c=n[s],l=c.instance,u=c.currentTarget;if(c=c.listener,l!==i&&a.isPropagationStopped())break e;_l(a,c,u),i=l}else for(s=0;s<n.length;s++){if(c=n[s],l=c.instance,u=c.currentTarget,c=c.listener,l!==i&&a.isPropagationStopped())break e;_l(a,c,u),i=l}}}if(Ta)throw e=vo,Ta=!1,vo=null,e}function fe(e,t){var r=t[Eo];r===void 0&&(r=t[Eo]=new Set);var n=e+"__bubble";r.has(n)||(Ou(t,e,2,!1),r.add(n))}function Bi(e,t,r){var n=0;t&&(n|=4),Ou(r,e,n,t)}var ia="_reactListening"+Math.random().toString(36).slice(2);function An(e){if(!e[ia]){e[ia]=!0,Hc.forEach(function(r){r!=="selectionchange"&&(Wp.has(r)||Bi(r,!1,e),Bi(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ia]||(t[ia]=!0,Bi("selectionchange",!1,t))}}function Ou(e,t,r,n){switch(xu(t)){case 1:var a=rp;break;case 4:a=np;break;default:a=vs}r=a.bind(null,t,r,e),a=void 0,!yo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function Di(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var s=n.tag;if(s===3||s===4){var c=n.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(s===4)for(s=n.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;s=s.return}for(;c!==null;){if(s=or(c),s===null)return;if(l=s.tag,l===5||l===6){n=i=s;continue e}c=c.parentNode}}n=n.return}iu(function(){var u=i,x=hs(r),f=[];e:{var v=Fu.get(e);if(v!==void 0){var y=ks,g=e;switch(e){case"keypress":if(va(r)===0)break e;case"keydown":case"keyup":y=vp;break;case"focusin":g="focus",y=Fi;break;case"focusout":g="blur",y=Fi;break;case"beforeblur":case"afterblur":y=Fi;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=vl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=op;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=wp;break;case _u:case Ru:case Au:y=cp;break;case Pu:y=jp;break;case"scroll":y=ap;break;case"wheel":y=Mp;break;case"copy":case"cut":case"paste":y=dp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=kl}var d=(t&4)!==0,w=!d&&e==="scroll",h=d?v!==null?v+"Capture":null:v;d=[];for(var p=u,m;p!==null;){m=p;var k=m.stateNode;if(m.tag===5&&k!==null&&(m=k,h!==null&&(k=$n(p,h),k!=null&&d.push(Pn(p,k,m)))),w)break;p=p.return}0<d.length&&(v=new y(v,g,null,r,x),f.push({event:v,listeners:d}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",v&&r!==mo&&(g=r.relatedTarget||r.fromElement)&&(or(g)||g[At]))break e;if((y||v)&&(v=x.window===x?x:(v=x.ownerDocument)?v.defaultView||v.parentWindow:window,y?(g=r.relatedTarget||r.toElement,y=u,g=g?or(g):null,g!==null&&(w=xr(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(d=vl,k="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(d=kl,k="onPointerLeave",h="onPointerEnter",p="pointer"),w=y==null?v:Tr(y),m=g==null?v:Tr(g),v=new d(k,p+"leave",y,r,x),v.target=w,v.relatedTarget=m,k=null,or(x)===u&&(d=new d(h,p+"enter",g,r,x),d.target=m,d.relatedTarget=w,k=d),w=k,y&&g)t:{for(d=y,h=g,p=0,m=d;m;m=br(m))p++;for(m=0,k=h;k;k=br(k))m++;for(;0<p-m;)d=br(d),p--;for(;0<m-p;)h=br(h),m--;for(;p--;){if(d===h||h!==null&&d===h.alternate)break t;d=br(d),h=br(h)}d=null}else d=null;y!==null&&Rl(f,v,y,d,!1),g!==null&&w!==null&&Rl(f,w,g,d,!0)}}e:{if(v=u?Tr(u):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var A=Ap;else if(jl(v))if(Mu)A=Op;else{A=Fp;var _=Pp}else(y=v.nodeName)&&y.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(A=zp);if(A&&(A=A(e,u))){Su(f,A,r,x);break e}_&&_(e,v,u),e==="focusout"&&(_=v._wrapperState)&&_.controlled&&v.type==="number"&&co(v,"number",v.value)}switch(_=u?Tr(u):window,e){case"focusin":(jl(_)||_.contentEditable==="true")&&(Cr=_,bo=u,vn=null);break;case"focusout":vn=bo=Cr=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,El(f,r,x);break;case"selectionchange":if(Np)break;case"keydown":case"keyup":El(f,r,x)}var O;if(bs)e:{switch(e){case"compositionstart":var $="onCompositionStart";break e;case"compositionend":$="onCompositionEnd";break e;case"compositionupdate":$="onCompositionUpdate";break e}$=void 0}else $r?bu(e,r)&&($="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&($="onCompositionStart");$&&(wu&&r.locale!=="ko"&&($r||$!=="onCompositionStart"?$==="onCompositionEnd"&&$r&&(O=ku()):(Wt=x,xs="value"in Wt?Wt.value:Wt.textContent,$r=!0)),_=Fa(u,$),0<_.length&&($=new xl($,e,null,r,x),f.push({event:$,listeners:_}),O?$.data=O:(O=ju(r),O!==null&&($.data=O)))),(O=Cp?Ep(e,r):Tp(e,r))&&(u=Fa(u,"onBeforeInput"),0<u.length&&(x=new xl("onBeforeInput","beforeinput",null,r,x),f.push({event:x,listeners:u}),x.data=O))}zu(f,t)})}function Pn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fa(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=$n(e,r),i!=null&&n.unshift(Pn(e,i,a)),i=$n(e,t),i!=null&&n.push(Pn(e,i,a))),e=e.return}return n}function br(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rl(e,t,r,n,a){for(var i=t._reactName,s=[];r!==null&&r!==n;){var c=r,l=c.alternate,u=c.stateNode;if(l!==null&&l===n)break;c.tag===5&&u!==null&&(c=u,a?(l=$n(r,i),l!=null&&s.unshift(Pn(r,l,c))):a||(l=$n(r,i),l!=null&&s.push(Pn(r,l,c)))),r=r.return}s.length!==0&&e.push({event:t,listeners:s})}var Hp=/\r\n?/g,Up=/\u0000|\uFFFD/g;function Al(e){return(typeof e=="string"?e:""+e).replace(Hp,`
`).replace(Up,"")}function oa(e,t,r){if(t=Al(t),Al(e)!==t&&r)throw Error(B(425))}function za(){}var So=null,Mo=null;function $o(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Co=typeof setTimeout=="function"?setTimeout:void 0,Kp=typeof clearTimeout=="function"?clearTimeout:void 0,Pl=typeof Promise=="function"?Promise:void 0,Vp=typeof queueMicrotask=="function"?queueMicrotask:typeof Pl<"u"?function(e){return Pl.resolve(null).then(e).catch(Gp)}:Co;function Gp(e){setTimeout(function(){throw e})}function Wi(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),Tn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);Tn(t)}function Gt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Fl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var en=Math.random().toString(36).slice(2),jt="__reactFiber$"+en,Fn="__reactProps$"+en,At="__reactContainer$"+en,Eo="__reactEvents$"+en,Qp="__reactListeners$"+en,Yp="__reactHandles$"+en;function or(e){var t=e[jt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[At]||r[jt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Fl(e);e!==null;){if(r=e[jt])return r;e=Fl(e)}return t}e=r,r=e.parentNode}return null}function Vn(e){return e=e[jt]||e[At],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Tr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(B(33))}function ci(e){return e[Fn]||null}var To=[],_r=-1;function tr(e){return{current:e}}function he(e){0>_r||(e.current=To[_r],To[_r]=null,_r--)}function de(e,t){_r++,To[_r]=e.current,e.current=t}var Jt={},Ie=tr(Jt),Ke=tr(!1),dr=Jt;function Hr(e,t){var r=e.type.contextTypes;if(!r)return Jt;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ve(e){return e=e.childContextTypes,e!=null}function Oa(){he(Ke),he(Ie)}function zl(e,t,r){if(Ie.current!==Jt)throw Error(B(168));de(Ie,t),de(Ke,r)}function Iu(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(B(108,Pf(e)||"Unknown",a));return ve({},r,n)}function Ia(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jt,dr=Ie.current,de(Ie,e),de(Ke,Ke.current),!0}function Ol(e,t,r){var n=e.stateNode;if(!n)throw Error(B(169));r?(e=Iu(e,t,dr),n.__reactInternalMemoizedMergedChildContext=e,he(Ke),he(Ie),de(Ie,e)):he(Ke),de(Ke,r)}var Ct=null,ui=!1,Hi=!1;function Lu(e){Ct===null?Ct=[e]:Ct.push(e)}function Xp(e){ui=!0,Lu(e)}function rr(){if(!Hi&&Ct!==null){Hi=!0;var e=0,t=le;try{var r=Ct;for(le=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ct=null,ui=!1}catch(a){throw Ct!==null&&(Ct=Ct.slice(e+1)),cu(ms,rr),a}finally{le=t,Hi=!1}}return null}var Rr=[],Ar=0,La=null,Na=0,it=[],ot=0,fr=null,Et=1,Tt="";function nr(e,t){Rr[Ar++]=Na,Rr[Ar++]=La,La=e,Na=t}function Nu(e,t,r){it[ot++]=Et,it[ot++]=Tt,it[ot++]=fr,fr=e;var n=Et;e=Tt;var a=32-yt(n)-1;n&=~(1<<a),r+=1;var i=32-yt(t)+a;if(30<i){var s=a-a%5;i=(n&(1<<s)-1).toString(32),n>>=s,a-=s,Et=1<<32-yt(t)+a|r<<a|n,Tt=i+e}else Et=1<<i|r<<a|n,Tt=e}function Ss(e){e.return!==null&&(nr(e,1),Nu(e,1,0))}function Ms(e){for(;e===La;)La=Rr[--Ar],Rr[Ar]=null,Na=Rr[--Ar],Rr[Ar]=null;for(;e===fr;)fr=it[--ot],it[ot]=null,Tt=it[--ot],it[ot]=null,Et=it[--ot],it[ot]=null}var qe=null,Xe=null,me=!1,mt=null;function Bu(e,t){var r=st(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Il(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qe=e,Xe=Gt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qe=e,Xe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=fr!==null?{id:Et,overflow:Tt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=st(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,qe=e,Xe=null,!0):!1;default:return!1}}function _o(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ro(e){if(me){var t=Xe;if(t){var r=t;if(!Il(e,t)){if(_o(e))throw Error(B(418));t=Gt(r.nextSibling);var n=qe;t&&Il(e,t)?Bu(n,r):(e.flags=e.flags&-4097|2,me=!1,qe=e)}}else{if(_o(e))throw Error(B(418));e.flags=e.flags&-4097|2,me=!1,qe=e}}}function Ll(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qe=e}function sa(e){if(e!==qe)return!1;if(!me)return Ll(e),me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$o(e.type,e.memoizedProps)),t&&(t=Xe)){if(_o(e))throw Du(),Error(B(418));for(;t;)Bu(e,t),t=Gt(t.nextSibling)}if(Ll(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(B(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xe=Gt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xe=null}}else Xe=qe?Gt(e.stateNode.nextSibling):null;return!0}function Du(){for(var e=Xe;e;)e=Gt(e.nextSibling)}function Ur(){Xe=qe=null,me=!1}function $s(e){mt===null?mt=[e]:mt.push(e)}var qp=Ot.ReactCurrentBatchConfig;function sn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(s){var c=a.refs;s===null?delete c[i]:c[i]=s},t._stringRef=i,t)}if(typeof e!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,e))}return e}function la(e,t){throw e=Object.prototype.toString.call(t),Error(B(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Nl(e){var t=e._init;return t(e._payload)}function Wu(e){function t(h,p){if(e){var m=h.deletions;m===null?(h.deletions=[p],h.flags|=16):m.push(p)}}function r(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function n(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function a(h,p){return h=qt(h,p),h.index=0,h.sibling=null,h}function i(h,p,m){return h.index=m,e?(m=h.alternate,m!==null?(m=m.index,m<p?(h.flags|=2,p):m):(h.flags|=2,p)):(h.flags|=1048576,p)}function s(h){return e&&h.alternate===null&&(h.flags|=2),h}function c(h,p,m,k){return p===null||p.tag!==6?(p=Xi(m,h.mode,k),p.return=h,p):(p=a(p,m),p.return=h,p)}function l(h,p,m,k){var A=m.type;return A===Mr?x(h,p,m.props.children,k,m.key):p!==null&&(p.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Lt&&Nl(A)===p.type)?(k=a(p,m.props),k.ref=sn(h,p,m),k.return=h,k):(k=Ma(m.type,m.key,m.props,null,h.mode,k),k.ref=sn(h,p,m),k.return=h,k)}function u(h,p,m,k){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=qi(m,h.mode,k),p.return=h,p):(p=a(p,m.children||[]),p.return=h,p)}function x(h,p,m,k,A){return p===null||p.tag!==7?(p=ur(m,h.mode,k,A),p.return=h,p):(p=a(p,m),p.return=h,p)}function f(h,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Xi(""+p,h.mode,m),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case qn:return m=Ma(p.type,p.key,p.props,null,h.mode,m),m.ref=sn(h,null,p),m.return=h,m;case Sr:return p=qi(p,h.mode,m),p.return=h,p;case Lt:var k=p._init;return f(h,k(p._payload),m)}if(dn(p)||tn(p))return p=ur(p,h.mode,m,null),p.return=h,p;la(h,p)}return null}function v(h,p,m,k){var A=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return A!==null?null:c(h,p,""+m,k);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case qn:return m.key===A?l(h,p,m,k):null;case Sr:return m.key===A?u(h,p,m,k):null;case Lt:return A=m._init,v(h,p,A(m._payload),k)}if(dn(m)||tn(m))return A!==null?null:x(h,p,m,k,null);la(h,m)}return null}function y(h,p,m,k,A){if(typeof k=="string"&&k!==""||typeof k=="number")return h=h.get(m)||null,c(p,h,""+k,A);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case qn:return h=h.get(k.key===null?m:k.key)||null,l(p,h,k,A);case Sr:return h=h.get(k.key===null?m:k.key)||null,u(p,h,k,A);case Lt:var _=k._init;return y(h,p,m,_(k._payload),A)}if(dn(k)||tn(k))return h=h.get(m)||null,x(p,h,k,A,null);la(p,k)}return null}function g(h,p,m,k){for(var A=null,_=null,O=p,$=p=0,W=null;O!==null&&$<m.length;$++){O.index>$?(W=O,O=null):W=O.sibling;var D=v(h,O,m[$],k);if(D===null){O===null&&(O=W);break}e&&O&&D.alternate===null&&t(h,O),p=i(D,p,$),_===null?A=D:_.sibling=D,_=D,O=W}if($===m.length)return r(h,O),me&&nr(h,$),A;if(O===null){for(;$<m.length;$++)O=f(h,m[$],k),O!==null&&(p=i(O,p,$),_===null?A=O:_.sibling=O,_=O);return me&&nr(h,$),A}for(O=n(h,O);$<m.length;$++)W=y(O,h,$,m[$],k),W!==null&&(e&&W.alternate!==null&&O.delete(W.key===null?$:W.key),p=i(W,p,$),_===null?A=W:_.sibling=W,_=W);return e&&O.forEach(function(Q){return t(h,Q)}),me&&nr(h,$),A}function d(h,p,m,k){var A=tn(m);if(typeof A!="function")throw Error(B(150));if(m=A.call(m),m==null)throw Error(B(151));for(var _=A=null,O=p,$=p=0,W=null,D=m.next();O!==null&&!D.done;$++,D=m.next()){O.index>$?(W=O,O=null):W=O.sibling;var Q=v(h,O,D.value,k);if(Q===null){O===null&&(O=W);break}e&&O&&Q.alternate===null&&t(h,O),p=i(Q,p,$),_===null?A=Q:_.sibling=Q,_=Q,O=W}if(D.done)return r(h,O),me&&nr(h,$),A;if(O===null){for(;!D.done;$++,D=m.next())D=f(h,D.value,k),D!==null&&(p=i(D,p,$),_===null?A=D:_.sibling=D,_=D);return me&&nr(h,$),A}for(O=n(h,O);!D.done;$++,D=m.next())D=y(O,h,$,D.value,k),D!==null&&(e&&D.alternate!==null&&O.delete(D.key===null?$:D.key),p=i(D,p,$),_===null?A=D:_.sibling=D,_=D);return e&&O.forEach(function(G){return t(h,G)}),me&&nr(h,$),A}function w(h,p,m,k){if(typeof m=="object"&&m!==null&&m.type===Mr&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case qn:e:{for(var A=m.key,_=p;_!==null;){if(_.key===A){if(A=m.type,A===Mr){if(_.tag===7){r(h,_.sibling),p=a(_,m.props.children),p.return=h,h=p;break e}}else if(_.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Lt&&Nl(A)===_.type){r(h,_.sibling),p=a(_,m.props),p.ref=sn(h,_,m),p.return=h,h=p;break e}r(h,_);break}else t(h,_);_=_.sibling}m.type===Mr?(p=ur(m.props.children,h.mode,k,m.key),p.return=h,h=p):(k=Ma(m.type,m.key,m.props,null,h.mode,k),k.ref=sn(h,p,m),k.return=h,h=k)}return s(h);case Sr:e:{for(_=m.key;p!==null;){if(p.key===_)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){r(h,p.sibling),p=a(p,m.children||[]),p.return=h,h=p;break e}else{r(h,p);break}else t(h,p);p=p.sibling}p=qi(m,h.mode,k),p.return=h,h=p}return s(h);case Lt:return _=m._init,w(h,p,_(m._payload),k)}if(dn(m))return g(h,p,m,k);if(tn(m))return d(h,p,m,k);la(h,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(r(h,p.sibling),p=a(p,m),p.return=h,h=p):(r(h,p),p=Xi(m,h.mode,k),p.return=h,h=p),s(h)):r(h,p)}return w}var Kr=Wu(!0),Hu=Wu(!1),Ba=tr(null),Da=null,Pr=null,Cs=null;function Es(){Cs=Pr=Da=null}function Ts(e){var t=Ba.current;he(Ba),e._currentValue=t}function Ao(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Br(e,t){Da=e,Cs=Pr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ue=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},Pr===null){if(Da===null)throw Error(B(308));Pr=e,Da.dependencies={lanes:0,firstContext:e}}else Pr=Pr.next=e;return t}var sr=null;function _s(e){sr===null?sr=[e]:sr.push(e)}function Uu(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,_s(t)):(r.next=a.next,a.next=r),t.interleaved=r,Pt(e,n)}function Pt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Nt=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ku(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _t(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,se&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,Pt(e,r)}return a=n.interleaved,a===null?(t.next=t,_s(n)):(t.next=a.next,a.next=t),n.interleaved=t,Pt(e,r)}function xa(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gs(e,r)}}function Bl(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=s:i=i.next=s,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wa(e,t,r,n){var a=e.updateQueue;Nt=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var l=c,u=l.next;l.next=null,s===null?i=u:s.next=u,s=l;var x=e.alternate;x!==null&&(x=x.updateQueue,c=x.lastBaseUpdate,c!==s&&(c===null?x.firstBaseUpdate=u:c.next=u,x.lastBaseUpdate=l))}if(i!==null){var f=a.baseState;s=0,x=u=l=null,c=i;do{var v=c.lane,y=c.eventTime;if((n&v)===v){x!==null&&(x=x.next={eventTime:y,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var g=e,d=c;switch(v=t,y=r,d.tag){case 1:if(g=d.payload,typeof g=="function"){f=g.call(y,f,v);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=d.payload,v=typeof g=="function"?g.call(y,f,v):g,v==null)break e;f=ve({},f,v);break e;case 2:Nt=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,v=a.effects,v===null?a.effects=[c]:v.push(c))}else y={eventTime:y,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},x===null?(u=x=y,l=f):x=x.next=y,s|=v;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;v=c,c=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(!0);if(x===null&&(l=f),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do s|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);hr|=s,e.lanes=s,e.memoizedState=f}}function Dl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(B(191,a));a.call(n)}}}var Gn={},Mt=tr(Gn),zn=tr(Gn),On=tr(Gn);function lr(e){if(e===Gn)throw Error(B(174));return e}function As(e,t){switch(de(On,t),de(zn,e),de(Mt,Gn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:fo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=fo(t,e)}he(Mt),de(Mt,t)}function Vr(){he(Mt),he(zn),he(On)}function Vu(e){lr(On.current);var t=lr(Mt.current),r=fo(t,e.type);t!==r&&(de(zn,e),de(Mt,r))}function Ps(e){zn.current===e&&(he(Mt),he(zn))}var ge=tr(0);function Ha(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ui=[];function Fs(){for(var e=0;e<Ui.length;e++)Ui[e]._workInProgressVersionPrimary=null;Ui.length=0}var ka=Ot.ReactCurrentDispatcher,Ki=Ot.ReactCurrentBatchConfig,pr=0,ye=null,$e=null,Ee=null,Ua=!1,xn=!1,In=0,Zp=0;function Fe(){throw Error(B(321))}function zs(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!kt(e[r],t[r]))return!1;return!0}function Os(e,t,r,n,a,i){if(pr=i,ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ka.current=e===null||e.memoizedState===null?rh:nh,e=r(n,a),xn){i=0;do{if(xn=!1,In=0,25<=i)throw Error(B(301));i+=1,Ee=$e=null,t.updateQueue=null,ka.current=ah,e=r(n,a)}while(xn)}if(ka.current=Ka,t=$e!==null&&$e.next!==null,pr=0,Ee=$e=ye=null,Ua=!1,t)throw Error(B(300));return e}function Is(){var e=In!==0;return In=0,e}function bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ye.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function ut(){if($e===null){var e=ye.alternate;e=e!==null?e.memoizedState:null}else e=$e.next;var t=Ee===null?ye.memoizedState:Ee.next;if(t!==null)Ee=t,$e=e;else{if(e===null)throw Error(B(310));$e=e,e={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ee===null?ye.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function Ln(e,t){return typeof t=="function"?t(e):t}function Vi(e){var t=ut(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=$e,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var s=a.next;a.next=i.next,i.next=s}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var c=s=null,l=null,u=i;do{var x=u.lane;if((pr&x)===x)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:x,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(c=l=f,s=n):l=l.next=f,ye.lanes|=x,hr|=x}u=u.next}while(u!==null&&u!==i);l===null?s=n:l.next=c,kt(n,t.memoizedState)||(Ue=!0),t.memoizedState=n,t.baseState=s,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,ye.lanes|=i,hr|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Gi(e){var t=ut(),r=t.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var s=a=a.next;do i=e(i,s.action),s=s.next;while(s!==a);kt(i,t.memoizedState)||(Ue=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Gu(){}function Qu(e,t){var r=ye,n=ut(),a=t(),i=!kt(n.memoizedState,a);if(i&&(n.memoizedState=a,Ue=!0),n=n.queue,Ls(qu.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ee!==null&&Ee.memoizedState.tag&1){if(r.flags|=2048,Nn(9,Xu.bind(null,r,n,a,t),void 0,null),Te===null)throw Error(B(349));pr&30||Yu(r,t,a)}return a}function Yu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Xu(e,t,r,n){t.value=r,t.getSnapshot=n,Zu(t)&&Ju(e)}function qu(e,t,r){return r(function(){Zu(t)&&Ju(e)})}function Zu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kt(e,r)}catch{return!0}}function Ju(e){var t=Pt(e,1);t!==null&&vt(t,e,1,-1)}function Wl(e){var t=bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ln,lastRenderedState:e},t.queue=e,e=e.dispatch=th.bind(null,ye,e),[t.memoizedState,e]}function Nn(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ye.updateQueue,t===null?(t={lastEffect:null,stores:null},ye.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function ed(){return ut().memoizedState}function wa(e,t,r,n){var a=bt();ye.flags|=e,a.memoizedState=Nn(1|t,r,void 0,n===void 0?null:n)}function di(e,t,r,n){var a=ut();n=n===void 0?null:n;var i=void 0;if($e!==null){var s=$e.memoizedState;if(i=s.destroy,n!==null&&zs(n,s.deps)){a.memoizedState=Nn(t,r,i,n);return}}ye.flags|=e,a.memoizedState=Nn(1|t,r,i,n)}function Hl(e,t){return wa(8390656,8,e,t)}function Ls(e,t){return di(2048,8,e,t)}function td(e,t){return di(4,2,e,t)}function rd(e,t){return di(4,4,e,t)}function nd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ad(e,t,r){return r=r!=null?r.concat([e]):null,di(4,4,nd.bind(null,t,e),r)}function Ns(){}function id(e,t){var r=ut();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&zs(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function od(e,t){var r=ut();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&zs(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function sd(e,t,r){return pr&21?(kt(r,t)||(r=fu(),ye.lanes|=r,hr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ue=!0),e.memoizedState=r)}function Jp(e,t){var r=le;le=r!==0&&4>r?r:4,e(!0);var n=Ki.transition;Ki.transition={};try{e(!1),t()}finally{le=r,Ki.transition=n}}function ld(){return ut().memoizedState}function eh(e,t,r){var n=Xt(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},cd(e))ud(t,r);else if(r=Uu(e,t,r,n),r!==null){var a=Be();vt(r,e,n,a),dd(r,t,n)}}function th(e,t,r){var n=Xt(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(cd(e))ud(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var s=t.lastRenderedState,c=i(s,r);if(a.hasEagerState=!0,a.eagerState=c,kt(c,s)){var l=t.interleaved;l===null?(a.next=a,_s(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}r=Uu(e,t,a,n),r!==null&&(a=Be(),vt(r,e,n,a),dd(r,t,n))}}function cd(e){var t=e.alternate;return e===ye||t!==null&&t===ye}function ud(e,t){xn=Ua=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function dd(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,gs(e,r)}}var Ka={readContext:ct,useCallback:Fe,useContext:Fe,useEffect:Fe,useImperativeHandle:Fe,useInsertionEffect:Fe,useLayoutEffect:Fe,useMemo:Fe,useReducer:Fe,useRef:Fe,useState:Fe,useDebugValue:Fe,useDeferredValue:Fe,useTransition:Fe,useMutableSource:Fe,useSyncExternalStore:Fe,useId:Fe,unstable_isNewReconciler:!1},rh={readContext:ct,useCallback:function(e,t){return bt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Hl,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,wa(4194308,4,nd.bind(null,t,e),r)},useLayoutEffect:function(e,t){return wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return wa(4,2,e,t)},useMemo:function(e,t){var r=bt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=bt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=eh.bind(null,ye,e),[n.memoizedState,e]},useRef:function(e){var t=bt();return e={current:e},t.memoizedState=e},useState:Wl,useDebugValue:Ns,useDeferredValue:function(e){return bt().memoizedState=e},useTransition:function(){var e=Wl(!1),t=e[0];return e=Jp.bind(null,e[1]),bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ye,a=bt();if(me){if(r===void 0)throw Error(B(407));r=r()}else{if(r=t(),Te===null)throw Error(B(349));pr&30||Yu(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,Hl(qu.bind(null,n,i,e),[e]),n.flags|=2048,Nn(9,Xu.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=bt(),t=Te.identifierPrefix;if(me){var r=Tt,n=Et;r=(n&~(1<<32-yt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=In++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Zp++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nh={readContext:ct,useCallback:id,useContext:ct,useEffect:Ls,useImperativeHandle:ad,useInsertionEffect:td,useLayoutEffect:rd,useMemo:od,useReducer:Vi,useRef:ed,useState:function(){return Vi(Ln)},useDebugValue:Ns,useDeferredValue:function(e){var t=ut();return sd(t,$e.memoizedState,e)},useTransition:function(){var e=Vi(Ln)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Gu,useSyncExternalStore:Qu,useId:ld,unstable_isNewReconciler:!1},ah={readContext:ct,useCallback:id,useContext:ct,useEffect:Ls,useImperativeHandle:ad,useInsertionEffect:td,useLayoutEffect:rd,useMemo:od,useReducer:Gi,useRef:ed,useState:function(){return Gi(Ln)},useDebugValue:Ns,useDeferredValue:function(e){var t=ut();return $e===null?t.memoizedState=e:sd(t,$e.memoizedState,e)},useTransition:function(){var e=Gi(Ln)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Gu,useSyncExternalStore:Qu,useId:ld,unstable_isNewReconciler:!1};function pt(e,t){if(e&&e.defaultProps){t=ve({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Po(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ve({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var fi={isMounted:function(e){return(e=e._reactInternals)?xr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Be(),a=Xt(e),i=_t(n,a);i.payload=t,r!=null&&(i.callback=r),t=Qt(e,i,a),t!==null&&(vt(t,e,a,n),xa(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Be(),a=Xt(e),i=_t(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Qt(e,i,a),t!==null&&(vt(t,e,a,n),xa(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Be(),n=Xt(e),a=_t(r,n);a.tag=2,t!=null&&(a.callback=t),t=Qt(e,a,n),t!==null&&(vt(t,e,n,r),xa(t,e,n))}};function Ul(e,t,r,n,a,i,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,s):t.prototype&&t.prototype.isPureReactComponent?!Rn(r,n)||!Rn(a,i):!0}function fd(e,t,r){var n=!1,a=Jt,i=t.contextType;return typeof i=="object"&&i!==null?i=ct(i):(a=Ve(t)?dr:Ie.current,n=t.contextTypes,i=(n=n!=null)?Hr(e,a):Jt),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fi,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Kl(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&fi.enqueueReplaceState(t,t.state,null)}function Fo(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},Rs(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=ct(i):(i=Ve(t)?dr:Ie.current,a.context=Hr(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Po(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&fi.enqueueReplaceState(a,a.state,null),Wa(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Gr(e,t){try{var r="",n=t;do r+=Af(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Qi(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function zo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var ih=typeof WeakMap=="function"?WeakMap:Map;function pd(e,t,r){r=_t(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ga||(Ga=!0,Ko=n),zo(e,t)},r}function hd(e,t,r){r=_t(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){zo(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){zo(e,t),typeof n!="function"&&(Yt===null?Yt=new Set([this]):Yt.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),r}function Vl(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new ih;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=xh.bind(null,e,t,r),t.then(e,e))}function Gl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ql(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_t(-1,1),t.tag=2,Qt(r,t,1))),r.lanes|=1),e)}var oh=Ot.ReactCurrentOwner,Ue=!1;function Ne(e,t,r,n){t.child=e===null?Hu(t,null,r,n):Kr(t,e.child,r,n)}function Yl(e,t,r,n,a){r=r.render;var i=t.ref;return Br(t,a),n=Os(e,t,r,n,i,a),r=Is(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ft(e,t,a)):(me&&r&&Ss(t),t.flags|=1,Ne(e,t,n,a),t.child)}function Xl(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!Gs(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,md(e,t,i,n,a)):(e=Ma(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var s=i.memoizedProps;if(r=r.compare,r=r!==null?r:Rn,r(s,n)&&e.ref===t.ref)return Ft(e,t,a)}return t.flags|=1,e=qt(i,n),e.ref=t.ref,e.return=t,t.child=e}function md(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(Rn(i,n)&&e.ref===t.ref)if(Ue=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Ue=!0);else return t.lanes=e.lanes,Ft(e,t,a)}return Oo(e,t,r,n,a)}function gd(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},de(zr,Ye),Ye|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,de(zr,Ye),Ye|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,de(zr,Ye),Ye|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,de(zr,Ye),Ye|=n;return Ne(e,t,a,r),t.child}function yd(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,r,n,a){var i=Ve(r)?dr:Ie.current;return i=Hr(t,i),Br(t,a),r=Os(e,t,r,n,i,a),n=Is(),e!==null&&!Ue?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ft(e,t,a)):(me&&n&&Ss(t),t.flags|=1,Ne(e,t,r,a),t.child)}function ql(e,t,r,n,a){if(Ve(r)){var i=!0;Ia(t)}else i=!1;if(Br(t,a),t.stateNode===null)ba(e,t),fd(t,r,n),Fo(t,r,n,a),n=!0;else if(e===null){var s=t.stateNode,c=t.memoizedProps;s.props=c;var l=s.context,u=r.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=Ve(r)?dr:Ie.current,u=Hr(t,u));var x=r.getDerivedStateFromProps,f=typeof x=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c!==n||l!==u)&&Kl(t,s,n,u),Nt=!1;var v=t.memoizedState;s.state=v,Wa(t,n,s,a),l=t.memoizedState,c!==n||v!==l||Ke.current||Nt?(typeof x=="function"&&(Po(t,r,x,n),l=t.memoizedState),(c=Nt||Ul(t,r,c,n,v,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=u,n=c):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Ku(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:pt(t.type,c),s.props=u,f=t.pendingProps,v=s.context,l=r.contextType,typeof l=="object"&&l!==null?l=ct(l):(l=Ve(r)?dr:Ie.current,l=Hr(t,l));var y=r.getDerivedStateFromProps;(x=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(c!==f||v!==l)&&Kl(t,s,n,l),Nt=!1,v=t.memoizedState,s.state=v,Wa(t,n,s,a);var g=t.memoizedState;c!==f||v!==g||Ke.current||Nt?(typeof y=="function"&&(Po(t,r,y,n),g=t.memoizedState),(u=Nt||Ul(t,r,u,n,v,g,l)||!1)?(x||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(n,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(n,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),s.props=n,s.state=g,s.context=l,n=u):(typeof s.componentDidUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),n=!1)}return Io(e,t,r,n,i,a)}function Io(e,t,r,n,a,i){yd(e,t);var s=(t.flags&128)!==0;if(!n&&!s)return a&&Ol(t,r,!1),Ft(e,t,i);n=t.stateNode,oh.current=t;var c=s&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&s?(t.child=Kr(t,e.child,null,i),t.child=Kr(t,null,c,i)):Ne(e,t,c,i),t.memoizedState=n.state,a&&Ol(t,r,!0),t.child}function vd(e){var t=e.stateNode;t.pendingContext?zl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&zl(e,t.context,!1),As(e,t.containerInfo)}function Zl(e,t,r,n,a){return Ur(),$s(a),t.flags|=256,Ne(e,t,r,n),t.child}var Lo={dehydrated:null,treeContext:null,retryLane:0};function No(e){return{baseLanes:e,cachePool:null,transitions:null}}function xd(e,t,r){var n=t.pendingProps,a=ge.current,i=!1,s=(t.flags&128)!==0,c;if((c=s)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),de(ge,a&1),e===null)return Ro(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=n.children,e=n.fallback,i?(n=t.mode,i=t.child,s={mode:"hidden",children:s},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=mi(s,n,0,null),e=ur(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=No(r),t.memoizedState=Lo,e):Bs(t,s));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return sh(e,t,s,n,c,a,r);if(i){i=n.fallback,s=t.mode,a=e.child,c=a.sibling;var l={mode:"hidden",children:n.children};return!(s&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=qt(a,l),n.subtreeFlags=a.subtreeFlags&14680064),c!==null?i=qt(c,i):(i=ur(i,s,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,s=e.child.memoizedState,s=s===null?No(r):{baseLanes:s.baseLanes|r,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=e.childLanes&~r,t.memoizedState=Lo,n}return i=e.child,e=i.sibling,n=qt(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Bs(e,t){return t=mi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ca(e,t,r,n){return n!==null&&$s(n),Kr(t,e.child,null,r),e=Bs(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sh(e,t,r,n,a,i,s){if(r)return t.flags&256?(t.flags&=-257,n=Qi(Error(B(422))),ca(e,t,s,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=mi({mode:"visible",children:n.children},a,0,null),i=ur(i,a,s,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Kr(t,e.child,null,s),t.child.memoizedState=No(s),t.memoizedState=Lo,i);if(!(t.mode&1))return ca(e,t,s,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var c=n.dgst;return n=c,i=Error(B(419)),n=Qi(i,n,void 0),ca(e,t,s,n)}if(c=(s&e.childLanes)!==0,Ue||c){if(n=Te,n!==null){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|s)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Pt(e,a),vt(n,e,a,-1))}return Vs(),n=Qi(Error(B(421))),ca(e,t,s,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=kh.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Xe=Gt(a.nextSibling),qe=t,me=!0,mt=null,e!==null&&(it[ot++]=Et,it[ot++]=Tt,it[ot++]=fr,Et=e.id,Tt=e.overflow,fr=t),t=Bs(t,n.children),t.flags|=4096,t)}function Jl(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ao(e.return,t,r)}function Yi(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function kd(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ne(e,t,n.children,r),n=ge.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jl(e,r,t);else if(e.tag===19)Jl(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(de(ge,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&Ha(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Yi(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ha(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Yi(t,!0,r,null,i);break;case"together":Yi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ba(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ft(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),hr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(B(153));if(t.child!==null){for(e=t.child,r=qt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=qt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function lh(e,t,r){switch(t.tag){case 3:vd(t),Ur();break;case 5:Vu(t);break;case 1:Ve(t.type)&&Ia(t);break;case 4:As(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;de(Ba,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(de(ge,ge.current&1),t.flags|=128,null):r&t.child.childLanes?xd(e,t,r):(de(ge,ge.current&1),e=Ft(e,t,r),e!==null?e.sibling:null);de(ge,ge.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return kd(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),de(ge,ge.current),n)break;return null;case 22:case 23:return t.lanes=0,gd(e,t,r)}return Ft(e,t,r)}var wd,Bo,bd,jd;wd=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bo=function(){};bd=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,lr(Mt.current);var i=null;switch(r){case"input":a=so(e,a),n=so(e,n),i=[];break;case"select":a=ve({},a,{value:void 0}),n=ve({},n,{value:void 0}),i=[];break;case"textarea":a=uo(e,a),n=uo(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=za)}po(r,n);var s;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var c=a[u];for(s in c)c.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Sn.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(c=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(l!=null||c!=null))if(u==="style")if(c){for(s in c)!c.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in l)l.hasOwnProperty(s)&&c[s]!==l[s]&&(r||(r={}),r[s]=l[s])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,c=c?c.__html:void 0,l!=null&&c!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Sn.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&fe("scroll",e),i||c===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};jd=function(e,t,r,n){r!==n&&(t.flags|=4)};function ln(e,t){if(!me)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ze(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ch(e,t,r){var n=t.pendingProps;switch(Ms(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(t),null;case 1:return Ve(t.type)&&Oa(),ze(t),null;case 3:return n=t.stateNode,Vr(),he(Ke),he(Ie),Fs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(sa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mt!==null&&(Qo(mt),mt=null))),Bo(e,t),ze(t),null;case 5:Ps(t);var a=lr(On.current);if(r=t.type,e!==null&&t.stateNode!=null)bd(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(B(166));return ze(t),null}if(e=lr(Mt.current),sa(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[jt]=t,n[Fn]=i,e=(t.mode&1)!==0,r){case"dialog":fe("cancel",n),fe("close",n);break;case"iframe":case"object":case"embed":fe("load",n);break;case"video":case"audio":for(a=0;a<pn.length;a++)fe(pn[a],n);break;case"source":fe("error",n);break;case"img":case"image":case"link":fe("error",n),fe("load",n);break;case"details":fe("toggle",n);break;case"input":ll(n,i),fe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},fe("invalid",n);break;case"textarea":ul(n,i),fe("invalid",n)}po(r,i),a=null;for(var s in i)if(i.hasOwnProperty(s)){var c=i[s];s==="children"?typeof c=="string"?n.textContent!==c&&(i.suppressHydrationWarning!==!0&&oa(n.textContent,c,e),a=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&oa(n.textContent,c,e),a=["children",""+c]):Sn.hasOwnProperty(s)&&c!=null&&s==="onScroll"&&fe("scroll",n)}switch(r){case"input":Zn(n),cl(n,i,!0);break;case"textarea":Zn(n),dl(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=za)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{s=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=qc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=s.createElement(r,{is:n.is}):(e=s.createElement(r),r==="select"&&(s=e,n.multiple?s.multiple=!0:n.size&&(s.size=n.size))):e=s.createElementNS(e,r),e[jt]=t,e[Fn]=n,wd(e,t,!1,!1),t.stateNode=e;e:{switch(s=ho(r,n),r){case"dialog":fe("cancel",e),fe("close",e),a=n;break;case"iframe":case"object":case"embed":fe("load",e),a=n;break;case"video":case"audio":for(a=0;a<pn.length;a++)fe(pn[a],e);a=n;break;case"source":fe("error",e),a=n;break;case"img":case"image":case"link":fe("error",e),fe("load",e),a=n;break;case"details":fe("toggle",e),a=n;break;case"input":ll(e,n),a=so(e,n),fe("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=ve({},n,{value:void 0}),fe("invalid",e);break;case"textarea":ul(e,n),a=uo(e,n),fe("invalid",e);break;default:a=n}po(r,a),c=a;for(i in c)if(c.hasOwnProperty(i)){var l=c[i];i==="style"?eu(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Zc(e,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Mn(e,l):typeof l=="number"&&Mn(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sn.hasOwnProperty(i)?l!=null&&i==="onScroll"&&fe("scroll",e):l!=null&&us(e,i,l,s))}switch(r){case"input":Zn(e),cl(e,n,!1);break;case"textarea":Zn(e),dl(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Zt(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Or(e,!!n.multiple,i,!1):n.defaultValue!=null&&Or(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=za)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ze(t),null;case 6:if(e&&t.stateNode!=null)jd(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(B(166));if(r=lr(On.current),lr(Mt.current),sa(t)){if(n=t.stateNode,r=t.memoizedProps,n[jt]=t,(i=n.nodeValue!==r)&&(e=qe,e!==null))switch(e.tag){case 3:oa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oa(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[jt]=t,t.stateNode=n}return ze(t),null;case 13:if(he(ge),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(me&&Xe!==null&&t.mode&1&&!(t.flags&128))Du(),Ur(),t.flags|=98560,i=!1;else if(i=sa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(B(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[jt]=t}else Ur(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ze(t),i=!1}else mt!==null&&(Qo(mt),mt=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ge.current&1?Ce===0&&(Ce=3):Vs())),t.updateQueue!==null&&(t.flags|=4),ze(t),null);case 4:return Vr(),Bo(e,t),e===null&&An(t.stateNode.containerInfo),ze(t),null;case 10:return Ts(t.type._context),ze(t),null;case 17:return Ve(t.type)&&Oa(),ze(t),null;case 19:if(he(ge),i=t.memoizedState,i===null)return ze(t),null;if(n=(t.flags&128)!==0,s=i.rendering,s===null)if(n)ln(i,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Ha(e),s!==null){for(t.flags|=128,ln(i,!1),n=s.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,e=s.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return de(ge,ge.current&1|2),t.child}e=e.sibling}i.tail!==null&&je()>Qr&&(t.flags|=128,n=!0,ln(i,!1),t.lanes=4194304)}else{if(!n)if(e=Ha(s),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ln(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!me)return ze(t),null}else 2*je()-i.renderingStartTime>Qr&&r!==1073741824&&(t.flags|=128,n=!0,ln(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(r=i.last,r!==null?r.sibling=s:t.child=s,i.last=s)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=je(),t.sibling=null,r=ge.current,de(ge,n?r&1|2:r&1),t):(ze(t),null);case 22:case 23:return Ks(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ye&1073741824&&(ze(t),t.subtreeFlags&6&&(t.flags|=8192)):ze(t),null;case 24:return null;case 25:return null}throw Error(B(156,t.tag))}function uh(e,t){switch(Ms(t),t.tag){case 1:return Ve(t.type)&&Oa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Vr(),he(Ke),he(Ie),Fs(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ps(t),null;case 13:if(he(ge),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(B(340));Ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return he(ge),null;case 4:return Vr(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return Ks(),null;case 24:return null;default:return null}}var ua=!1,Oe=!1,dh=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Fr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ke(e,t,n)}else r.current=null}function Do(e,t,r){try{r()}catch(n){ke(e,t,n)}}var ec=!1;function fh(e,t){if(So=Aa,e=Eu(),js(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var s=0,c=-1,l=-1,u=0,x=0,f=e,v=null;t:for(;;){for(var y;f!==r||a!==0&&f.nodeType!==3||(c=s+a),f!==i||n!==0&&f.nodeType!==3||(l=s+n),f.nodeType===3&&(s+=f.nodeValue.length),(y=f.firstChild)!==null;)v=f,f=y;for(;;){if(f===e)break t;if(v===r&&++u===a&&(c=s),v===i&&++x===n&&(l=s),(y=f.nextSibling)!==null)break;f=v,v=f.parentNode}f=y}r=c===-1||l===-1?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mo={focusedElem:e,selectionRange:r},Aa=!1,Y=t;Y!==null;)if(t=Y,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Y=e;else for(;Y!==null;){t=Y;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var d=g.memoizedProps,w=g.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?d:pt(t.type,d),w);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(k){ke(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Y=e;break}Y=t.return}return g=ec,ec=!1,g}function kn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Do(t,r,i)}a=a.next}while(a!==n)}}function pi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Wo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Sd(e){var t=e.alternate;t!==null&&(e.alternate=null,Sd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jt],delete t[Fn],delete t[Eo],delete t[Qp],delete t[Yp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Md(e){return e.tag===5||e.tag===3||e.tag===4}function tc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Md(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ho(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=za));else if(n!==4&&(e=e.child,e!==null))for(Ho(e,t,r),e=e.sibling;e!==null;)Ho(e,t,r),e=e.sibling}function Uo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Uo(e,t,r),e=e.sibling;e!==null;)Uo(e,t,r),e=e.sibling}var _e=null,ht=!1;function It(e,t,r){for(r=r.child;r!==null;)$d(e,t,r),r=r.sibling}function $d(e,t,r){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(ii,r)}catch{}switch(r.tag){case 5:Oe||Fr(r,t);case 6:var n=_e,a=ht;_e=null,It(e,t,r),_e=n,ht=a,_e!==null&&(ht?(e=_e,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):_e.removeChild(r.stateNode));break;case 18:_e!==null&&(ht?(e=_e,r=r.stateNode,e.nodeType===8?Wi(e.parentNode,r):e.nodeType===1&&Wi(e,r),Tn(e)):Wi(_e,r.stateNode));break;case 4:n=_e,a=ht,_e=r.stateNode.containerInfo,ht=!0,It(e,t,r),_e=n,ht=a;break;case 0:case 11:case 14:case 15:if(!Oe&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Do(r,t,s),a=a.next}while(a!==n)}It(e,t,r);break;case 1:if(!Oe&&(Fr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){ke(r,t,c)}It(e,t,r);break;case 21:It(e,t,r);break;case 22:r.mode&1?(Oe=(n=Oe)||r.memoizedState!==null,It(e,t,r),Oe=n):It(e,t,r);break;default:It(e,t,r)}}function rc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dh),t.forEach(function(n){var a=wh.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function ft(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,s=t,c=s;e:for(;c!==null;){switch(c.tag){case 5:_e=c.stateNode,ht=!1;break e;case 3:_e=c.stateNode.containerInfo,ht=!0;break e;case 4:_e=c.stateNode.containerInfo,ht=!0;break e}c=c.return}if(_e===null)throw Error(B(160));$d(i,s,a),_e=null,ht=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){ke(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cd(t,e),t=t.sibling}function Cd(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ft(t,e),wt(e),n&4){try{kn(3,e,e.return),pi(3,e)}catch(d){ke(e,e.return,d)}try{kn(5,e,e.return)}catch(d){ke(e,e.return,d)}}break;case 1:ft(t,e),wt(e),n&512&&r!==null&&Fr(r,r.return);break;case 5:if(ft(t,e),wt(e),n&512&&r!==null&&Fr(r,r.return),e.flags&32){var a=e.stateNode;try{Mn(a,"")}catch(d){ke(e,e.return,d)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,s=r!==null?r.memoizedProps:i,c=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Yc(a,i),ho(c,s);var u=ho(c,i);for(s=0;s<l.length;s+=2){var x=l[s],f=l[s+1];x==="style"?eu(a,f):x==="dangerouslySetInnerHTML"?Zc(a,f):x==="children"?Mn(a,f):us(a,x,f,u)}switch(c){case"input":lo(a,i);break;case"textarea":Xc(a,i);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Or(a,!!i.multiple,y,!1):v!==!!i.multiple&&(i.defaultValue!=null?Or(a,!!i.multiple,i.defaultValue,!0):Or(a,!!i.multiple,i.multiple?[]:"",!1))}a[Fn]=i}catch(d){ke(e,e.return,d)}}break;case 6:if(ft(t,e),wt(e),n&4){if(e.stateNode===null)throw Error(B(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(d){ke(e,e.return,d)}}break;case 3:if(ft(t,e),wt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Tn(t.containerInfo)}catch(d){ke(e,e.return,d)}break;case 4:ft(t,e),wt(e);break;case 13:ft(t,e),wt(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Hs=je())),n&4&&rc(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(Oe=(u=Oe)||x,ft(t,e),Oe=u):ft(t,e),wt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!x&&e.mode&1)for(Y=e,x=e.child;x!==null;){for(f=Y=x;Y!==null;){switch(v=Y,y=v.child,v.tag){case 0:case 11:case 14:case 15:kn(4,v,v.return);break;case 1:Fr(v,v.return);var g=v.stateNode;if(typeof g.componentWillUnmount=="function"){n=v,r=v.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(d){ke(n,r,d)}}break;case 5:Fr(v,v.return);break;case 22:if(v.memoizedState!==null){ac(f);continue}}y!==null?(y.return=v,Y=y):ac(f)}x=x.sibling}e:for(x=null,f=e;;){if(f.tag===5){if(x===null){x=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,c.style.display=Jc("display",s))}catch(d){ke(e,e.return,d)}}}else if(f.tag===6){if(x===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(d){ke(e,e.return,d)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;x===f&&(x=null),f=f.return}x===f&&(x=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ft(t,e),wt(e),n&4&&rc(e);break;case 21:break;default:ft(t,e),wt(e)}}function wt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Md(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(Mn(a,""),n.flags&=-33);var i=tc(e);Uo(e,i,a);break;case 3:case 4:var s=n.stateNode.containerInfo,c=tc(e);Ho(e,c,s);break;default:throw Error(B(161))}}catch(l){ke(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ph(e,t,r){Y=e,Ed(e)}function Ed(e,t,r){for(var n=(e.mode&1)!==0;Y!==null;){var a=Y,i=a.child;if(a.tag===22&&n){var s=a.memoizedState!==null||ua;if(!s){var c=a.alternate,l=c!==null&&c.memoizedState!==null||Oe;c=ua;var u=Oe;if(ua=s,(Oe=l)&&!u)for(Y=a;Y!==null;)s=Y,l=s.child,s.tag===22&&s.memoizedState!==null?ic(a):l!==null?(l.return=s,Y=l):ic(a);for(;i!==null;)Y=i,Ed(i),i=i.sibling;Y=a,ua=c,Oe=u}nc(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Y=i):nc(e)}}function nc(e){for(;Y!==null;){var t=Y;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Oe||pi(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Oe)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:pt(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Dl(t,i,n);break;case 3:var s=t.updateQueue;if(s!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Dl(t,s,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var x=u.memoizedState;if(x!==null){var f=x.dehydrated;f!==null&&Tn(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Oe||t.flags&512&&Wo(t)}catch(v){ke(t,t.return,v)}}if(t===e){Y=null;break}if(r=t.sibling,r!==null){r.return=t.return,Y=r;break}Y=t.return}}function ac(e){for(;Y!==null;){var t=Y;if(t===e){Y=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Y=r;break}Y=t.return}}function ic(e){for(;Y!==null;){var t=Y;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{pi(4,t)}catch(l){ke(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(l){ke(t,a,l)}}var i=t.return;try{Wo(t)}catch(l){ke(t,i,l)}break;case 5:var s=t.return;try{Wo(t)}catch(l){ke(t,s,l)}}}catch(l){ke(t,t.return,l)}if(t===e){Y=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Y=c;break}Y=t.return}}var hh=Math.ceil,Va=Ot.ReactCurrentDispatcher,Ds=Ot.ReactCurrentOwner,lt=Ot.ReactCurrentBatchConfig,se=0,Te=null,Se=null,Re=0,Ye=0,zr=tr(0),Ce=0,Bn=null,hr=0,hi=0,Ws=0,wn=null,He=null,Hs=0,Qr=1/0,$t=null,Ga=!1,Ko=null,Yt=null,da=!1,Ht=null,Qa=0,bn=0,Vo=null,ja=-1,Sa=0;function Be(){return se&6?je():ja!==-1?ja:ja=je()}function Xt(e){return e.mode&1?se&2&&Re!==0?Re&-Re:qp.transition!==null?(Sa===0&&(Sa=fu()),Sa):(e=le,e!==0||(e=window.event,e=e===void 0?16:xu(e.type)),e):1}function vt(e,t,r,n){if(50<bn)throw bn=0,Vo=null,Error(B(185));Un(e,r,n),(!(se&2)||e!==Te)&&(e===Te&&(!(se&2)&&(hi|=r),Ce===4&&Dt(e,Re)),Ge(e,n),r===1&&se===0&&!(t.mode&1)&&(Qr=je()+500,ui&&rr()))}function Ge(e,t){var r=e.callbackNode;qf(e,t);var n=Ra(e,e===Te?Re:0);if(n===0)r!==null&&hl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&hl(r),t===1)e.tag===0?Xp(oc.bind(null,e)):Lu(oc.bind(null,e)),Vp(function(){!(se&6)&&rr()}),r=null;else{switch(pu(n)){case 1:r=ms;break;case 4:r=uu;break;case 16:r=_a;break;case 536870912:r=du;break;default:r=_a}r=Od(r,Td.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Td(e,t){if(ja=-1,Sa=0,se&6)throw Error(B(327));var r=e.callbackNode;if(Dr()&&e.callbackNode!==r)return null;var n=Ra(e,e===Te?Re:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ya(e,n);else{t=n;var a=se;se|=2;var i=Rd();(Te!==e||Re!==t)&&($t=null,Qr=je()+500,cr(e,t));do try{yh();break}catch(c){_d(e,c)}while(!0);Es(),Va.current=i,se=a,Se!==null?t=0:(Te=null,Re=0,t=Ce)}if(t!==0){if(t===2&&(a=xo(e),a!==0&&(n=a,t=Go(e,a))),t===1)throw r=Bn,cr(e,0),Dt(e,n),Ge(e,je()),r;if(t===6)Dt(e,n);else{if(a=e.current.alternate,!(n&30)&&!mh(a)&&(t=Ya(e,n),t===2&&(i=xo(e),i!==0&&(n=i,t=Go(e,i))),t===1))throw r=Bn,cr(e,0),Dt(e,n),Ge(e,je()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(B(345));case 2:ar(e,He,$t);break;case 3:if(Dt(e,n),(n&130023424)===n&&(t=Hs+500-je(),10<t)){if(Ra(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Be(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Co(ar.bind(null,e,He,$t),t);break}ar(e,He,$t);break;case 4:if(Dt(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var s=31-yt(n);i=1<<s,s=t[s],s>a&&(a=s),n&=~i}if(n=a,n=je()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hh(n/1960))-n,10<n){e.timeoutHandle=Co(ar.bind(null,e,He,$t),n);break}ar(e,He,$t);break;case 5:ar(e,He,$t);break;default:throw Error(B(329))}}}return Ge(e,je()),e.callbackNode===r?Td.bind(null,e):null}function Go(e,t){var r=wn;return e.current.memoizedState.isDehydrated&&(cr(e,t).flags|=256),e=Ya(e,t),e!==2&&(t=He,He=r,t!==null&&Qo(t)),e}function Qo(e){He===null?He=e:He.push.apply(He,e)}function mh(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!kt(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dt(e,t){for(t&=~Ws,t&=~hi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-yt(t),n=1<<r;e[r]=-1,t&=~n}}function oc(e){if(se&6)throw Error(B(327));Dr();var t=Ra(e,0);if(!(t&1))return Ge(e,je()),null;var r=Ya(e,t);if(e.tag!==0&&r===2){var n=xo(e);n!==0&&(t=n,r=Go(e,n))}if(r===1)throw r=Bn,cr(e,0),Dt(e,t),Ge(e,je()),r;if(r===6)throw Error(B(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ar(e,He,$t),Ge(e,je()),null}function Us(e,t){var r=se;se|=1;try{return e(t)}finally{se=r,se===0&&(Qr=je()+500,ui&&rr())}}function mr(e){Ht!==null&&Ht.tag===0&&!(se&6)&&Dr();var t=se;se|=1;var r=lt.transition,n=le;try{if(lt.transition=null,le=1,e)return e()}finally{le=n,lt.transition=r,se=t,!(se&6)&&rr()}}function Ks(){Ye=zr.current,he(zr)}function cr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Kp(r)),Se!==null)for(r=Se.return;r!==null;){var n=r;switch(Ms(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Oa();break;case 3:Vr(),he(Ke),he(Ie),Fs();break;case 5:Ps(n);break;case 4:Vr();break;case 13:he(ge);break;case 19:he(ge);break;case 10:Ts(n.type._context);break;case 22:case 23:Ks()}r=r.return}if(Te=e,Se=e=qt(e.current,null),Re=Ye=t,Ce=0,Bn=null,Ws=hi=hr=0,He=wn=null,sr!==null){for(t=0;t<sr.length;t++)if(r=sr[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var s=i.next;i.next=a,n.next=s}r.pending=n}sr=null}return e}function _d(e,t){do{var r=Se;try{if(Es(),ka.current=Ka,Ua){for(var n=ye.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Ua=!1}if(pr=0,Ee=$e=ye=null,xn=!1,In=0,Ds.current=null,r===null||r.return===null){Ce=1,Bn=t,Se=null;break}e:{var i=e,s=r.return,c=r,l=t;if(t=Re,c.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,x=c,f=x.tag;if(!(x.mode&1)&&(f===0||f===11||f===15)){var v=x.alternate;v?(x.updateQueue=v.updateQueue,x.memoizedState=v.memoizedState,x.lanes=v.lanes):(x.updateQueue=null,x.memoizedState=null)}var y=Gl(s);if(y!==null){y.flags&=-257,Ql(y,s,c,i,t),y.mode&1&&Vl(i,u,t),t=y,l=u;var g=t.updateQueue;if(g===null){var d=new Set;d.add(l),t.updateQueue=d}else g.add(l);break e}else{if(!(t&1)){Vl(i,u,t),Vs();break e}l=Error(B(426))}}else if(me&&c.mode&1){var w=Gl(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Ql(w,s,c,i,t),$s(Gr(l,c));break e}}i=l=Gr(l,c),Ce!==4&&(Ce=2),wn===null?wn=[i]:wn.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=pd(i,l,t);Bl(i,h);break e;case 1:c=l;var p=i.type,m=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Yt===null||!Yt.has(m)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=hd(i,c,t);Bl(i,k);break e}}i=i.return}while(i!==null)}Pd(r)}catch(A){t=A,Se===r&&r!==null&&(Se=r=r.return);continue}break}while(!0)}function Rd(){var e=Va.current;return Va.current=Ka,e===null?Ka:e}function Vs(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Te===null||!(hr&268435455)&&!(hi&268435455)||Dt(Te,Re)}function Ya(e,t){var r=se;se|=2;var n=Rd();(Te!==e||Re!==t)&&($t=null,cr(e,t));do try{gh();break}catch(a){_d(e,a)}while(!0);if(Es(),se=r,Va.current=n,Se!==null)throw Error(B(261));return Te=null,Re=0,Ce}function gh(){for(;Se!==null;)Ad(Se)}function yh(){for(;Se!==null&&!Wf();)Ad(Se)}function Ad(e){var t=zd(e.alternate,e,Ye);e.memoizedProps=e.pendingProps,t===null?Pd(e):Se=t,Ds.current=null}function Pd(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=uh(r,t),r!==null){r.flags&=32767,Se=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,Se=null;return}}else if(r=ch(r,t,Ye),r!==null){Se=r;return}if(t=t.sibling,t!==null){Se=t;return}Se=t=e}while(t!==null);Ce===0&&(Ce=5)}function ar(e,t,r){var n=le,a=lt.transition;try{lt.transition=null,le=1,vh(e,t,r,n)}finally{lt.transition=a,le=n}return null}function vh(e,t,r,n){do Dr();while(Ht!==null);if(se&6)throw Error(B(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(B(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Zf(e,i),e===Te&&(Se=Te=null,Re=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||da||(da=!0,Od(_a,function(){return Dr(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=lt.transition,lt.transition=null;var s=le;le=1;var c=se;se|=4,Ds.current=null,fh(e,r),Cd(r,e),Lp(Mo),Aa=!!So,Mo=So=null,e.current=r,ph(r),Hf(),se=c,le=s,lt.transition=i}else e.current=r;if(da&&(da=!1,Ht=e,Qa=a),i=e.pendingLanes,i===0&&(Yt=null),Vf(r.stateNode),Ge(e,je()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(Ga)throw Ga=!1,e=Ko,Ko=null,e;return Qa&1&&e.tag!==0&&Dr(),i=e.pendingLanes,i&1?e===Vo?bn++:(bn=0,Vo=e):bn=0,rr(),null}function Dr(){if(Ht!==null){var e=pu(Qa),t=lt.transition,r=le;try{if(lt.transition=null,le=16>e?16:e,Ht===null)var n=!1;else{if(e=Ht,Ht=null,Qa=0,se&6)throw Error(B(331));var a=se;for(se|=4,Y=e.current;Y!==null;){var i=Y,s=i.child;if(Y.flags&16){var c=i.deletions;if(c!==null){for(var l=0;l<c.length;l++){var u=c[l];for(Y=u;Y!==null;){var x=Y;switch(x.tag){case 0:case 11:case 15:kn(8,x,i)}var f=x.child;if(f!==null)f.return=x,Y=f;else for(;Y!==null;){x=Y;var v=x.sibling,y=x.return;if(Sd(x),x===u){Y=null;break}if(v!==null){v.return=y,Y=v;break}Y=y}}}var g=i.alternate;if(g!==null){var d=g.child;if(d!==null){g.child=null;do{var w=d.sibling;d.sibling=null,d=w}while(d!==null)}}Y=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,Y=s;else e:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:kn(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,Y=h;break e}Y=i.return}}var p=e.current;for(Y=p;Y!==null;){s=Y;var m=s.child;if(s.subtreeFlags&2064&&m!==null)m.return=s,Y=m;else e:for(s=p;Y!==null;){if(c=Y,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:pi(9,c)}}catch(A){ke(c,c.return,A)}if(c===s){Y=null;break e}var k=c.sibling;if(k!==null){k.return=c.return,Y=k;break e}Y=c.return}}if(se=a,rr(),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(ii,e)}catch{}n=!0}return n}finally{le=r,lt.transition=t}}return!1}function sc(e,t,r){t=Gr(r,t),t=pd(e,t,1),e=Qt(e,t,1),t=Be(),e!==null&&(Un(e,1,t),Ge(e,t))}function ke(e,t,r){if(e.tag===3)sc(e,e,r);else for(;t!==null;){if(t.tag===3){sc(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Yt===null||!Yt.has(n))){e=Gr(r,e),e=hd(t,e,1),t=Qt(t,e,1),e=Be(),t!==null&&(Un(t,1,e),Ge(t,e));break}}t=t.return}}function xh(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&r,Te===e&&(Re&r)===r&&(Ce===4||Ce===3&&(Re&130023424)===Re&&500>je()-Hs?cr(e,0):Ws|=r),Ge(e,t)}function Fd(e,t){t===0&&(e.mode&1?(t=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):t=1);var r=Be();e=Pt(e,t),e!==null&&(Un(e,t,r),Ge(e,r))}function kh(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Fd(e,r)}function wh(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(t),Fd(e,r)}var zd;zd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ke.current)Ue=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ue=!1,lh(e,t,r);Ue=!!(e.flags&131072)}else Ue=!1,me&&t.flags&1048576&&Nu(t,Na,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ba(e,t),e=t.pendingProps;var a=Hr(t,Ie.current);Br(t,r),a=Os(null,t,n,e,a,r);var i=Is();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ve(n)?(i=!0,Ia(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Rs(t),a.updater=fi,t.stateNode=a,a._reactInternals=t,Fo(t,n,e,r),t=Io(null,t,n,!0,i,r)):(t.tag=0,me&&i&&Ss(t),Ne(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ba(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=jh(n),e=pt(n,e),a){case 0:t=Oo(null,t,n,e,r);break e;case 1:t=ql(null,t,n,e,r);break e;case 11:t=Yl(null,t,n,e,r);break e;case 14:t=Xl(null,t,n,pt(n.type,e),r);break e}throw Error(B(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),Oo(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),ql(e,t,n,a,r);case 3:e:{if(vd(t),e===null)throw Error(B(387));n=t.pendingProps,i=t.memoizedState,a=i.element,Ku(e,t),Wa(t,n,null,r);var s=t.memoizedState;if(n=s.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Gr(Error(B(423)),t),t=Zl(e,t,n,r,a);break e}else if(n!==a){a=Gr(Error(B(424)),t),t=Zl(e,t,n,r,a);break e}else for(Xe=Gt(t.stateNode.containerInfo.firstChild),qe=t,me=!0,mt=null,r=Hu(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ur(),n===a){t=Ft(e,t,r);break e}Ne(e,t,n,r)}t=t.child}return t;case 5:return Vu(t),e===null&&Ro(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,s=a.children,$o(n,a)?s=null:i!==null&&$o(n,i)&&(t.flags|=32),yd(e,t),Ne(e,t,s,r),t.child;case 6:return e===null&&Ro(t),null;case 13:return xd(e,t,r);case 4:return As(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Kr(t,null,n,r):Ne(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),Yl(e,t,n,a,r);case 7:return Ne(e,t,t.pendingProps,r),t.child;case 8:return Ne(e,t,t.pendingProps.children,r),t.child;case 12:return Ne(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,s=a.value,de(Ba,n._currentValue),n._currentValue=s,i!==null)if(kt(i.value,s)){if(i.children===a.children&&!Ke.current){t=Ft(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var c=i.dependencies;if(c!==null){s=i.child;for(var l=c.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=_t(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var x=u.pending;x===null?l.next=l:(l.next=x.next,x.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),Ao(i.return,r,t),c.lanes|=r;break}l=l.next}}else if(i.tag===10)s=i.type===t.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(B(341));s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),Ao(s,r,t),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===t){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Ne(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Br(t,r),a=ct(a),n=n(a),t.flags|=1,Ne(e,t,n,r),t.child;case 14:return n=t.type,a=pt(n,t.pendingProps),a=pt(n.type,a),Xl(e,t,n,a,r);case 15:return md(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:pt(n,a),ba(e,t),t.tag=1,Ve(n)?(e=!0,Ia(t)):e=!1,Br(t,r),fd(t,n,a),Fo(t,n,a,r),Io(null,t,n,!0,e,r);case 19:return kd(e,t,r);case 22:return gd(e,t,r)}throw Error(B(156,t.tag))};function Od(e,t){return cu(e,t)}function bh(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(e,t,r,n){return new bh(e,t,r,n)}function Gs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jh(e){if(typeof e=="function")return Gs(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fs)return 11;if(e===ps)return 14}return 2}function qt(e,t){var r=e.alternate;return r===null?(r=st(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ma(e,t,r,n,a,i){var s=2;if(n=e,typeof e=="function")Gs(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Mr:return ur(r.children,a,i,t);case ds:s=8,a|=8;break;case no:return e=st(12,r,t,a|2),e.elementType=no,e.lanes=i,e;case ao:return e=st(13,r,t,a),e.elementType=ao,e.lanes=i,e;case io:return e=st(19,r,t,a),e.elementType=io,e.lanes=i,e;case Vc:return mi(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Uc:s=10;break e;case Kc:s=9;break e;case fs:s=11;break e;case ps:s=14;break e;case Lt:s=16,n=null;break e}throw Error(B(130,e==null?e:typeof e,""))}return t=st(s,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ur(e,t,r,n){return e=st(7,e,n,t),e.lanes=r,e}function mi(e,t,r,n){return e=st(22,e,n,t),e.elementType=Vc,e.lanes=r,e.stateNode={isHidden:!1},e}function Xi(e,t,r){return e=st(6,e,null,t),e.lanes=r,e}function qi(e,t,r){return t=st(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sh(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ri(0),this.expirationTimes=Ri(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ri(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Qs(e,t,r,n,a,i,s,c,l){return e=new Sh(e,t,r,c,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=st(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(i),e}function Mh(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Sr,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Id(e){if(!e)return Jt;e=e._reactInternals;e:{if(xr(e)!==e||e.tag!==1)throw Error(B(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ve(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(B(171))}if(e.tag===1){var r=e.type;if(Ve(r))return Iu(e,r,t)}return t}function Ld(e,t,r,n,a,i,s,c,l){return e=Qs(r,n,!0,e,a,i,s,c,l),e.context=Id(null),r=e.current,n=Be(),a=Xt(r),i=_t(n,a),i.callback=t??null,Qt(r,i,a),e.current.lanes=a,Un(e,a,n),Ge(e,n),e}function gi(e,t,r,n){var a=t.current,i=Be(),s=Xt(a);return r=Id(r),t.context===null?t.context=r:t.pendingContext=r,t=_t(i,s),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Qt(a,t,s),e!==null&&(vt(e,a,s,i),xa(e,a,s)),s}function Xa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Ys(e,t){lc(e,t),(e=e.alternate)&&lc(e,t)}function $h(){return null}var Nd=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xs(e){this._internalRoot=e}yi.prototype.render=Xs.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(B(409));gi(e,t,null,null)};yi.prototype.unmount=Xs.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;mr(function(){gi(null,e,null,null)}),t[At]=null}};function yi(e){this._internalRoot=e}yi.prototype.unstable_scheduleHydration=function(e){if(e){var t=gu();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bt.length&&t!==0&&t<Bt[r].priority;r++);Bt.splice(r,0,e),r===0&&vu(e)}};function qs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function vi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cc(){}function Ch(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=Xa(s);i.call(u)}}var s=Ld(t,n,e,0,null,!1,!1,"",cc);return e._reactRootContainer=s,e[At]=s.current,An(e.nodeType===8?e.parentNode:e),mr(),s}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var c=n;n=function(){var u=Xa(l);c.call(u)}}var l=Qs(e,0,!1,null,null,!1,!1,"",cc);return e._reactRootContainer=l,e[At]=l.current,An(e.nodeType===8?e.parentNode:e),mr(function(){gi(t,l,r,n)}),l}function xi(e,t,r,n,a){var i=r._reactRootContainer;if(i){var s=i;if(typeof a=="function"){var c=a;a=function(){var l=Xa(s);c.call(l)}}gi(t,s,e,a)}else s=Ch(r,t,e,a,n);return Xa(s)}hu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=fn(t.pendingLanes);r!==0&&(gs(t,r|1),Ge(t,je()),!(se&6)&&(Qr=je()+500,rr()))}break;case 13:mr(function(){var n=Pt(e,1);if(n!==null){var a=Be();vt(n,e,1,a)}}),Ys(e,1)}};ys=function(e){if(e.tag===13){var t=Pt(e,134217728);if(t!==null){var r=Be();vt(t,e,134217728,r)}Ys(e,134217728)}};mu=function(e){if(e.tag===13){var t=Xt(e),r=Pt(e,t);if(r!==null){var n=Be();vt(r,e,t,n)}Ys(e,t)}};gu=function(){return le};yu=function(e,t){var r=le;try{return le=e,t()}finally{le=r}};go=function(e,t,r){switch(t){case"input":if(lo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=ci(n);if(!a)throw Error(B(90));Qc(n),lo(n,a)}}}break;case"textarea":Xc(e,r);break;case"select":t=r.value,t!=null&&Or(e,!!r.multiple,t,!1)}};nu=Us;au=mr;var Eh={usingClientEntryPoint:!1,Events:[Vn,Tr,ci,tu,ru,Us]},cn={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Th={bundleType:cn.bundleType,version:cn.version,rendererPackageName:cn.rendererPackageName,rendererConfig:cn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ot.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=su(e),e===null?null:e.stateNode},findFiberByHostInstance:cn.findFiberByHostInstance||$h,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fa.isDisabled&&fa.supportsFiber)try{ii=fa.inject(Th),St=fa}catch{}}tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Eh;tt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qs(t))throw Error(B(200));return Mh(e,t,null,r)};tt.createRoot=function(e,t){if(!qs(e))throw Error(B(299));var r=!1,n="",a=Nd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Qs(e,1,!1,null,null,r,!1,n,a),e[At]=t.current,An(e.nodeType===8?e.parentNode:e),new Xs(t)};tt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(B(188)):(e=Object.keys(e).join(","),Error(B(268,e)));return e=su(t),e=e===null?null:e.stateNode,e};tt.flushSync=function(e){return mr(e)};tt.hydrate=function(e,t,r){if(!vi(t))throw Error(B(200));return xi(null,e,t,!0,r)};tt.hydrateRoot=function(e,t,r){if(!qs(e))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",s=Nd;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(s=r.onRecoverableError)),t=Ld(t,null,e,1,r??null,a,!1,i,s),e[At]=t.current,An(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new yi(t)};tt.render=function(e,t,r){if(!vi(t))throw Error(B(200));return xi(null,e,t,!1,r)};tt.unmountComponentAtNode=function(e){if(!vi(e))throw Error(B(40));return e._reactRootContainer?(mr(function(){xi(null,null,e,!1,function(){e._reactRootContainer=null,e[At]=null})}),!0):!1};tt.unstable_batchedUpdates=Us;tt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!vi(r))throw Error(B(200));if(e==null||e._reactInternals===void 0)throw Error(B(38));return xi(e,t,r,!1,n)};tt.version="18.3.1-next-f1338f8080-20240426";function Bd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Bd)}catch(e){console.error(e)}}Bd(),Bc.exports=tt;var _h=Bc.exports,Dd,uc=_h;Dd=uc.createRoot,uc.hydrateRoot;const Rh={},dc=e=>{let t;const r=new Set,n=(x,f)=>{const v=typeof x=="function"?x(t):x;if(!Object.is(v,t)){const y=t;t=f??(typeof v!="object"||v===null)?v:Object.assign({},t,v),r.forEach(g=>g(t,y))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>u,subscribe:x=>(r.add(x),()=>r.delete(x)),destroy:()=>{(Rh?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,l);return l},Ah=e=>e?dc(e):dc;var Wd={exports:{}},Hd={},Ud={exports:{}},Kd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yr=xt;function Ph(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fh=typeof Object.is=="function"?Object.is:Ph,zh=Yr.useState,Oh=Yr.useEffect,Ih=Yr.useLayoutEffect,Lh=Yr.useDebugValue;function Nh(e,t){var r=t(),n=zh({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return Ih(function(){a.value=r,a.getSnapshot=t,Zi(a)&&i({inst:a})},[e,r,t]),Oh(function(){return Zi(a)&&i({inst:a}),e(function(){Zi(a)&&i({inst:a})})},[e]),Lh(r),r}function Zi(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Fh(e,r)}catch{return!0}}function Bh(e,t){return t()}var Dh=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Bh:Nh;Kd.useSyncExternalStore=Yr.useSyncExternalStore!==void 0?Yr.useSyncExternalStore:Dh;Ud.exports=Kd;var Wh=Ud.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ki=xt,Hh=Wh;function Uh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kh=typeof Object.is=="function"?Object.is:Uh,Vh=Hh.useSyncExternalStore,Gh=ki.useRef,Qh=ki.useEffect,Yh=ki.useMemo,Xh=ki.useDebugValue;Hd.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=Gh(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=Yh(function(){function l(y){if(!u){if(u=!0,x=y,y=n(y),a!==void 0&&s.hasValue){var g=s.value;if(a(g,y))return f=g}return f=y}if(g=f,Kh(x,y))return g;var d=n(y);return a!==void 0&&a(g,d)?(x=y,g):(x=y,f=d)}var u=!1,x,f,v=r===void 0?null:r;return[function(){return l(t())},v===null?void 0:function(){return l(v())}]},[t,r,n,a]);var c=Vh(e,i[0],i[1]);return Qh(function(){s.hasValue=!0,s.value=c},[c]),Xh(c),c};Wd.exports=Hd;var qh=Wd.exports;const Zh=Ec(qh),Vd={},{useDebugValue:Jh}=ae,{useSyncExternalStoreWithSelector:e0}=Zh;let fc=!1;const t0=e=>e;function r0(e,t=t0,r){(Vd?"production":void 0)!=="production"&&r&&!fc&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),fc=!0);const n=e0(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Jh(n),n}const n0=e=>{(Vd?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Ah(e):e,r=(n,a)=>r0(t,n,a);return Object.assign(r,t),r},a0=e=>n0;var Gd=Symbol.for("immer-nothing"),pc=Symbol.for("immer-draftable"),Je=Symbol.for("immer-state");function gt(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Xr=Object.getPrototypeOf;function qr(e){return!!e&&!!e[Je]}function gr(e){var t;return e?Qd(e)||Array.isArray(e)||!!e[pc]||!!((t=e.constructor)!=null&&t[pc])||bi(e)||ji(e):!1}var i0=Object.prototype.constructor.toString();function Qd(e){if(!e||typeof e!="object")return!1;const t=Xr(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===i0}function qa(e,t){wi(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function wi(e){const t=e[Je];return t?t.type_:Array.isArray(e)?1:bi(e)?2:ji(e)?3:0}function Yo(e,t){return wi(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Yd(e,t,r){const n=wi(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function o0(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function bi(e){return e instanceof Map}function ji(e){return e instanceof Set}function ir(e){return e.copy_||e.base_}function Xo(e,t){if(bi(e))return new Map(e);if(ji(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Qd(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Je];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const s=a[i],c=n[s];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[s]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[s]})}return Object.create(Xr(e),n)}else{const n=Xr(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function Zs(e,t=!1){return Si(e)||qr(e)||!gr(e)||(wi(e)>1&&(e.set=e.add=e.clear=e.delete=s0),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>Zs(n,!0))),e}function s0(){gt(2)}function Si(e){return Object.isFrozen(e)}var l0={};function yr(e){const t=l0[e];return t||gt(0,e),t}var Dn;function Xd(){return Dn}function c0(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function hc(e,t){t&&(yr("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function qo(e){Zo(e),e.drafts_.forEach(u0),e.drafts_=null}function Zo(e){e===Dn&&(Dn=e.parent_)}function mc(e){return Dn=c0(Dn,e)}function u0(e){const t=e[Je];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gc(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Je].modified_&&(qo(t),gt(4)),gr(e)&&(e=Za(t,e),t.parent_||Ja(t,e)),t.patches_&&yr("Patches").generateReplacementPatches_(r[Je].base_,e,t.patches_,t.inversePatches_)):e=Za(t,r,[]),qo(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Gd?e:void 0}function Za(e,t,r){if(Si(t))return t;const n=t[Je];if(!n)return qa(t,(a,i)=>yc(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Ja(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,s=!1;n.type_===3&&(i=new Set(a),a.clear(),s=!0),qa(i,(c,l)=>yc(e,n,a,c,l,r,s)),Ja(e,a,!1),r&&e.patches_&&yr("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function yc(e,t,r,n,a,i,s){if(qr(a)){const c=i&&t&&t.type_!==3&&!Yo(t.assigned_,n)?i.concat(n):void 0,l=Za(e,a,c);if(Yd(r,n,l),qr(l))e.canAutoFreeze_=!1;else return}else s&&r.add(a);if(gr(a)&&!Si(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Za(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Ja(e,a)}}function Ja(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zs(t,r)}function d0(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Xd(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=Js;r&&(a=[n],i=Wn);const{revoke:s,proxy:c}=Proxy.revocable(a,i);return n.draft_=c,n.revoke_=s,c}var Js={get(e,t){if(t===Je)return e;const r=ir(e);if(!Yo(r,t))return f0(e,r,t);const n=r[t];return e.finalized_||!gr(n)?n:n===Ji(e.base_,t)?(eo(e),e.copy_[t]=es(n,e)):n},has(e,t){return t in ir(e)},ownKeys(e){return Reflect.ownKeys(ir(e))},set(e,t,r){const n=qd(ir(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Ji(ir(e),t),i=a==null?void 0:a[Je];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(o0(r,a)&&(r!==void 0||Yo(e.base_,t)))return!0;eo(e),Jo(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ji(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,eo(e),Jo(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ir(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){gt(11)},getPrototypeOf(e){return Xr(e.base_)},setPrototypeOf(){gt(12)}},Wn={};qa(Js,(e,t)=>{Wn[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Wn.deleteProperty=function(e,t){return Wn.set.call(this,e,t,void 0)};Wn.set=function(e,t,r){return Js.set.call(this,e[0],t,r,e[0])};function Ji(e,t){const r=e[Je];return(r?ir(r):e)[t]}function f0(e,t,r){var a;const n=qd(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function qd(e,t){if(!(t in e))return;let r=Xr(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Xr(r)}}function Jo(e){e.modified_||(e.modified_=!0,e.parent_&&Jo(e.parent_))}function eo(e){e.copy_||(e.copy_=Xo(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var p0=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const s=this;return function(l=i,...u){return s.produce(l,x=>r.call(this,x,...u))}}typeof r!="function"&&gt(6),n!==void 0&&typeof n!="function"&&gt(7);let a;if(gr(t)){const i=mc(this),s=es(t,void 0);let c=!0;try{a=r(s),c=!1}finally{c?qo(i):Zo(i)}return hc(i,n),gc(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Gd&&(a=void 0),this.autoFreeze_&&Zs(a,!0),n){const i=[],s=[];yr("Patches").generateReplacementPatches_(t,a,i,s),n(i,s)}return a}else gt(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...c)=>this.produceWithPatches(s,l=>t(l,...c));let n,a;return[this.produce(t,r,(s,c)=>{n=s,a=c}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gr(e)||gt(8),qr(e)&&(e=h0(e));const t=mc(this),r=es(e,void 0);return r[Je].isManual_=!0,Zo(t),r}finishDraft(e,t){const r=e&&e[Je];(!r||!r.isManual_)&&gt(9);const{scope_:n}=r;return hc(n,t),gc(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=yr("Patches").applyPatches_;return qr(e)?n(e,t):this.produce(e,a=>n(a,t))}};function es(e,t){const r=bi(e)?yr("MapSet").proxyMap_(e,t):ji(e)?yr("MapSet").proxySet_(e,t):d0(e,t);return(t?t.scope_:Xd()).drafts_.push(r),r}function h0(e){return qr(e)||gt(10,e),Zd(e)}function Zd(e){if(!gr(e)||Si(e))return e;const t=e[Je];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Xo(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Xo(e,!0);return qa(r,(n,a)=>{Yd(r,n,Zd(a))}),t&&(t.finalized_=!1),r}var et=new p0,Me=et.produce;et.produceWithPatches.bind(et);et.setAutoFreeze.bind(et);et.setUseStrictShallowCopy.bind(et);et.applyPatches.bind(et);et.createDraft.bind(et);et.finishDraft.bind(et);const te={warrior:{key:"warrior",name:"Warrior",cost:2,stats:{hp:120,atk:18,range:1,atkIntervalMs:900,moveIntervalMs:400},ability:{type:"cleave",ratio:.4},abilityLevels:{2:{type:"cleave",ratio:.55},3:{type:"cleave",ratio:.75}}},archer:{key:"archer",name:"Archer",cost:3,stats:{hp:80,atk:20,range:5,atkIntervalMs:800,moveIntervalMs:450},ability:{type:"multishot",extraTargets:1,ratio:.6},abilityLevels:{2:{type:"multishot",extraTargets:2,ratio:.65},3:{type:"multishot",extraTargets:3,ratio:.7}}},mage:{key:"mage",name:"Mage",cost:3,stats:{hp:70,atk:26,range:4,atkIntervalMs:1100,moveIntervalMs:500},ability:{type:"stunOnHit",chance:.14,durationMs:800},abilityLevels:{2:{type:"stunOnHit",chance:.2,durationMs:900},3:{type:"stunOnHit",chance:.28,durationMs:1100}}},knight:{key:"knight",name:"Knight",cost:3,stats:{hp:160,atk:16,range:1,atkIntervalMs:950,moveIntervalMs:420},ability:{type:"cleave",ratio:.35}},rogue:{key:"rogue",name:"Rogue",cost:3,stats:{hp:70,atk:28,range:1,atkIntervalMs:700,moveIntervalMs:350},ability:{type:"slowOnHit",chance:.22,factor:.7,durationMs:900},abilityLevels:{2:{type:"slowOnHit",chance:.28,factor:.6,durationMs:1100},3:{type:"slowOnHit",chance:.35,factor:.55,durationMs:1300}}},spear:{key:"spear",name:"Spearman",cost:2,stats:{hp:100,atk:18,range:2,atkIntervalMs:820,moveIntervalMs:420},ability:{type:"pierce",ratio:.35},abilityLevels:{2:{type:"pierce",ratio:.5},3:{type:"pierce",ratio:.7}}},cleric:{key:"cleric",name:"Cleric",cost:2,stats:{hp:85,atk:14,range:3,atkIntervalMs:900,moveIntervalMs:460},ability:{type:"healPulse",cooldownMs:2600,amount:16},abilityLevels:{2:{type:"healPulse",cooldownMs:2300,amount:22},3:{type:"healPulse",cooldownMs:2e3,amount:28}}},sniper:{key:"sniper",name:"Sniper",cost:4,stats:{hp:70,atk:34,range:6,atkIntervalMs:1200,moveIntervalMs:480},ability:{type:"pierce",ratio:.5},abilityLevels:{2:{type:"pierce",ratio:.65},3:{type:"pierce",ratio:.8}}},guardian:{key:"guardian",name:"Guardian",cost:4,stats:{hp:220,atk:14,range:1,atkIntervalMs:1e3,moveIntervalMs:420},ability:{type:"cleave",ratio:.28},abilityLevels:{2:{type:"cleave",ratio:.45},3:{type:"cleave",ratio:.6}}},berserker:{key:"berserker",name:"Berserker",cost:3,stats:{hp:110,atk:16,range:1,atkIntervalMs:500,moveIntervalMs:360},ability:{type:"cleave",ratio:.22},abilityLevels:{2:{type:"cleave",ratio:.35},3:{type:"cleave",ratio:.5}}},frost:{key:"frost",name:"Frost Mage",cost:3,stats:{hp:75,atk:22,range:4,atkIntervalMs:950,moveIntervalMs:500},ability:{type:"slowOnHit",chance:.3,factor:.6,durationMs:1100},abilityLevels:{2:{type:"slowOnHit",chance:.38,factor:.55,durationMs:1300},3:{type:"slowOnHit",chance:.48,factor:.5,durationMs:1500}}},paladin:{key:"paladin",name:"Paladin",cost:4,stats:{hp:180,atk:20,range:1,atkIntervalMs:900,moveIntervalMs:400},ability:{type:"healPulse",cooldownMs:2300,amount:20},abilityLevels:{2:{type:"healPulse",cooldownMs:2e3,amount:26},3:{type:"healPulse",cooldownMs:1800,amount:34}}},hunter:{key:"hunter",name:"Hunter",cost:3,stats:{hp:90,atk:22,range:4,atkIntervalMs:850,moveIntervalMs:440},ability:{type:"multishot",extraTargets:1,ratio:.55},abilityLevels:{2:{type:"multishot",extraTargets:2,ratio:.6},3:{type:"multishot",extraTargets:3,ratio:.65}}},assassin:{key:"assassin",name:"Assassin",cost:4,stats:{hp:85,atk:30,range:1,atkIntervalMs:600,moveIntervalMs:340},ability:{type:"stunOnHit",chance:.16,durationMs:600},abilityLevels:{2:{type:"stunOnHit",chance:.22,durationMs:750},3:{type:"stunOnHit",chance:.3,durationMs:950}}},ballista:{key:"ballista",name:"Ballista",cost:5,stats:{hp:90,atk:34,range:7,atkIntervalMs:1150,moveIntervalMs:520},ability:{type:"multishot",extraTargets:2,ratio:.65},abilityLevels:{2:{type:"multishot",extraTargets:3,ratio:.7},3:{type:"multishot",extraTargets:4,ratio:.75}}},sorcerer:{key:"sorcerer",name:"Sorcerer",cost:5,stats:{hp:85,atk:32,range:5,atkIntervalMs:1e3,moveIntervalMs:500},ability:{type:"stunOnHit",chance:.2,durationMs:750},abilityLevels:{2:{type:"stunOnHit",chance:.28,durationMs:900},3:{type:"stunOnHit",chance:.36,durationMs:1100}}},champion:{key:"champion",name:"Champion",cost:5,stats:{hp:240,atk:22,range:1,atkIntervalMs:850,moveIntervalMs:400},ability:{type:"cleave",ratio:.5},abilityLevels:{2:{type:"cleave",ratio:.7},3:{type:"cleave",ratio:.85}}},templar:{key:"templar",name:"Templar",cost:5,stats:{hp:200,atk:18,range:2,atkIntervalMs:900,moveIntervalMs:420},ability:{type:"healPulse",cooldownMs:2100,amount:24},abilityLevels:{2:{type:"healPulse",cooldownMs:1900,amount:30},3:{type:"healPulse",cooldownMs:1700,amount:38}}},monk:{key:"monk",name:"Monk",cost:2,stats:{hp:90,atk:14,range:2,atkIntervalMs:880,moveIntervalMs:420},ability:{type:"healPulse",cooldownMs:2500,amount:14},abilityLevels:{2:{type:"healPulse",cooldownMs:2200,amount:20},3:{type:"healPulse",cooldownMs:1900,amount:26}}},crossbow:{key:"crossbow",name:"Crossbowman",cost:2,stats:{hp:75,atk:18,range:4,atkIntervalMs:780,moveIntervalMs:440},ability:{type:"multishot",extraTargets:1,ratio:.55},abilityLevels:{2:{type:"multishot",extraTargets:2,ratio:.6},3:{type:"multishot",extraTargets:3,ratio:.65}}},pikeman:{key:"pikeman",name:"Pikeman",cost:2,stats:{hp:105,atk:17,range:2,atkIntervalMs:830,moveIntervalMs:420},ability:{type:"pierce",ratio:.4},abilityLevels:{2:{type:"pierce",ratio:.55},3:{type:"pierce",ratio:.7}}},valkyrie:{key:"valkyrie",name:"Valkyrie",cost:4,stats:{hp:170,atk:22,range:1,atkIntervalMs:850,moveIntervalMs:380},ability:{type:"cleave",ratio:.45},abilityLevels:{2:{type:"cleave",ratio:.65},3:{type:"cleave",ratio:.8}}},warlock:{key:"warlock",name:"Warlock",cost:4,stats:{hp:80,atk:28,range:5,atkIntervalMs:1e3,moveIntervalMs:500},ability:{type:"stunOnHit",chance:.22,durationMs:850},abilityLevels:{2:{type:"stunOnHit",chance:.3,durationMs:950},3:{type:"stunOnHit",chance:.36,durationMs:1150}}},druid:{key:"druid",name:"Druid",cost:3,stats:{hp:100,atk:12,range:3,atkIntervalMs:920,moveIntervalMs:460},ability:{type:"healPulse",cooldownMs:2400,amount:18},abilityLevels:{2:{type:"healPulse",cooldownMs:2100,amount:24},3:{type:"healPulse",cooldownMs:1800,amount:30}}},icearcher:{key:"icearcher",name:"Ice Archer",cost:3,stats:{hp:80,atk:18,range:5,atkIntervalMs:820,moveIntervalMs:450},ability:{type:"slowOnHit",chance:.26,factor:.65,durationMs:1e3},abilityLevels:{2:{type:"slowOnHit",chance:.34,factor:.6,durationMs:1200},3:{type:"slowOnHit",chance:.42,factor:.55,durationMs:1400}}},gladiator:{key:"gladiator",name:"Gladiator",cost:3,stats:{hp:150,atk:18,range:1,atkIntervalMs:900,moveIntervalMs:380},ability:{type:"cleave",ratio:.3},abilityLevels:{2:{type:"cleave",ratio:.45},3:{type:"cleave",ratio:.6}}},marksman:{key:"marksman",name:"Marksman",cost:4,stats:{hp:75,atk:30,range:6,atkIntervalMs:980,moveIntervalMs:480},ability:{type:"pierce",ratio:.6},abilityLevels:{2:{type:"pierce",ratio:.75},3:{type:"pierce",ratio:.9}}},recruit:{key:"recruit",name:"Recruit",cost:1,stats:{hp:90,atk:14,range:1,atkIntervalMs:900,moveIntervalMs:420},ability:{type:"cleave",ratio:.15},abilityLevels:{2:{type:"cleave",ratio:.25},3:{type:"cleave",ratio:.35}}},slinger:{key:"slinger",name:"Slinger",cost:1,stats:{hp:70,atk:14,range:3,atkIntervalMs:720,moveIntervalMs:440},ability:{type:"multishot",extraTargets:1,ratio:.5},abilityLevels:{2:{type:"multishot",extraTargets:2,ratio:.55},3:{type:"multishot",extraTargets:2,ratio:.6}}},javelin:{key:"javelin",name:"Javelin Thrower",cost:2,stats:{hp:85,atk:18,range:3,atkIntervalMs:820,moveIntervalMs:440},ability:{type:"pierce",ratio:.4},abilityLevels:{2:{type:"pierce",ratio:.55},3:{type:"pierce",ratio:.7}}},mystic:{key:"mystic",name:"Mystic",cost:2,stats:{hp:75,atk:16,range:4,atkIntervalMs:1e3,moveIntervalMs:500},ability:{type:"stunOnHit",chance:.14,durationMs:700},abilityLevels:{2:{type:"stunOnHit",chance:.2,durationMs:850},3:{type:"stunOnHit",chance:.26,durationMs:1e3}}},medic:{key:"medic",name:"Medic",cost:1,stats:{hp:80,atk:10,range:3,atkIntervalMs:980,moveIntervalMs:500},ability:{type:"healPulse",cooldownMs:2700,amount:12},abilityLevels:{2:{type:"healPulse",cooldownMs:2400,amount:16},3:{type:"healPulse",cooldownMs:2100,amount:20}}},shieldman:{key:"shieldman",name:"Shieldman",cost:1,stats:{hp:120,atk:12,range:1,atkIntervalMs:980,moveIntervalMs:420},ability:{type:"cleave",ratio:.12},abilityLevels:{2:{type:"cleave",ratio:.22},3:{type:"cleave",ratio:.32}}},sentry:{key:"sentry",name:"Sentry",cost:2,stats:{hp:85,atk:17,range:4,atkIntervalMs:820,moveIntervalMs:460},ability:{type:"pierce",ratio:.35},abilityLevels:{2:{type:"pierce",ratio:.5},3:{type:"pierce",ratio:.65}}},alchemist:{key:"alchemist",name:"Alchemist",cost:3,stats:{hp:90,atk:12,range:3,atkIntervalMs:980,moveIntervalMs:480},ability:{type:"healPulse",cooldownMs:2400,amount:18},abilityLevels:{2:{type:"healPulse",cooldownMs:2100,amount:24},3:{type:"healPulse",cooldownMs:1800,amount:30}}},shieldbearer:{key:"shieldbearer",name:"Shieldbearer",cost:2,stats:{hp:150,atk:14,range:1,atkIntervalMs:980,moveIntervalMs:420},ability:{type:"cleave",ratio:.2},abilityLevels:{2:{type:"cleave",ratio:.32},3:{type:"cleave",ratio:.45}}},duelist:{key:"duelist",name:"Duelist",cost:3,stats:{hp:95,atk:26,range:1,atkIntervalMs:640,moveIntervalMs:340},ability:{type:"stunOnHit",chance:.18,durationMs:600},abilityLevels:{2:{type:"stunOnHit",chance:.24,durationMs:750},3:{type:"stunOnHit",chance:.3,durationMs:900}}},stormcaller:{key:"stormcaller",name:"Stormcaller",cost:4,stats:{hp:80,atk:28,range:5,atkIntervalMs:980,moveIntervalMs:500},ability:{type:"stunOnHit",chance:.22,durationMs:800},abilityLevels:{2:{type:"stunOnHit",chance:.28,durationMs:950},3:{type:"stunOnHit",chance:.34,durationMs:1100}}},phalanx:{key:"phalanx",name:"Phalanx",cost:3,stats:{hp:130,atk:18,range:2,atkIntervalMs:880,moveIntervalMs:420},ability:{type:"pierce",ratio:.42},abilityLevels:{2:{type:"pierce",ratio:.58},3:{type:"pierce",ratio:.72}}},witch:{key:"witch",name:"Witch",cost:3,stats:{hp:78,atk:20,range:4,atkIntervalMs:980,moveIntervalMs:500},ability:{type:"slowOnHit",chance:.28,factor:.65,durationMs:1100},abilityLevels:{2:{type:"slowOnHit",chance:.36,factor:.6,durationMs:1300},3:{type:"slowOnHit",chance:.44,factor:.55,durationMs:1500}}},beastmaster:{key:"beastmaster",name:"Beastmaster",cost:4,stats:{hp:110,atk:22,range:4,atkIntervalMs:900,moveIntervalMs:440},ability:{type:"multishot",extraTargets:1,ratio:.6},abilityLevels:{2:{type:"multishot",extraTargets:2,ratio:.65},3:{type:"multishot",extraTargets:3,ratio:.7}}}};function ei(e,t,r){const n=te[e];return{id:r??`${e}-${t}-${Math.random().toString(36).slice(2,9)}`,templateKey:n.key,team:t,hp:n.stats.hp,lastAttackAt:0,lastMoveAt:0,specialLastAt:0,star:1}}function m0(e){const[t]=e.split("-"),r=te[t];return{name:r.name,stats:r.stats,templateKey:r.key}}const g0={warrior:{primary:"#5B8CFF",secondary:"#1E2B52",accent:"#B3C9FF",glow:"#5B8CFF",emblem:"sword"},archer:{primary:"#6FCF97",secondary:"#1F3A30",accent:"#BFE8D0",glow:"#6FCF97",emblem:"bow"},mage:{primary:"#BB6BD9",secondary:"#2F1E40",accent:"#E0C3F6",glow:"#BB6BD9",emblem:"orb"},knight:{primary:"#F2C94C",secondary:"#3D3314",accent:"#F6E0A3",glow:"#F2C94C",emblem:"shield"},rogue:{primary:"#EB5757",secondary:"#3D1919",accent:"#F2B6B6",glow:"#EB5757",emblem:"dagger"},spear:{primary:"#56CCF2",secondary:"#163341",accent:"#B9E8F8",glow:"#56CCF2",emblem:"spear"},cleric:{primary:"#27AE60",secondary:"#0F2A1D",accent:"#A8E0C0",glow:"#27AE60",emblem:"plus"},sniper:{primary:"#95A5A6",secondary:"#2C3E50",accent:"#D5DBDB",glow:"#95A5A6",emblem:"bow"},guardian:{primary:"#F39C12",secondary:"#3B2A12",accent:"#F9D09B",glow:"#F39C12",emblem:"shield"},berserker:{primary:"#E74C3C",secondary:"#3A1411",accent:"#F5B7B1",glow:"#E74C3C",emblem:"sword"},frost:{primary:"#74B9FF",secondary:"#1B2A44",accent:"#C7E6FF",glow:"#74B9FF",emblem:"orb"},paladin:{primary:"#F1C40F",secondary:"#3B3108",accent:"#F7E79E",glow:"#F1C40F",emblem:"plus"},hunter:{primary:"#58D68D",secondary:"#153226",accent:"#BDEFD3",glow:"#58D68D",emblem:"bow"},assassin:{primary:"#FF7675",secondary:"#3A1B1B",accent:"#FFB3B3",glow:"#FF7675",emblem:"dagger"},ballista:{primary:"#A3E4D7",secondary:"#1A3D36",accent:"#D6FFF4",glow:"#A3E4D7",emblem:"bow"},sorcerer:{primary:"#D980FA",secondary:"#2B1C3A",accent:"#EED0FF",glow:"#D980FA",emblem:"orb"},champion:{primary:"#FAD961",secondary:"#3D2C0F",accent:"#FFF1B8",glow:"#FAD961",emblem:"shield"},templar:{primary:"#F9E79F",secondary:"#2E2A12",accent:"#FFF6CC",glow:"#F9E79F",emblem:"plus"},monk:{primary:"#C0EBA6",secondary:"#2A3A29",accent:"#E0F7CF",glow:"#C0EBA6",emblem:"plus"},crossbow:{primary:"#93C5FD",secondary:"#1E2B52",accent:"#D1E8FF",glow:"#93C5FD",emblem:"bow"},pikeman:{primary:"#67E8F9",secondary:"#163341",accent:"#BFF6FB",glow:"#67E8F9",emblem:"spear"},valkyrie:{primary:"#FBCFE8",secondary:"#3B1E3F",accent:"#FDE7F5",glow:"#FBCFE8",emblem:"sword"},warlock:{primary:"#A78BFA",secondary:"#2B1C3A",accent:"#E9D5FF",glow:"#A78BFA",emblem:"orb"},druid:{primary:"#86EFAC",secondary:"#143224",accent:"#CFF8DA",glow:"#86EFAC",emblem:"plus"},icearcher:{primary:"#BAE6FD",secondary:"#1B2A44",accent:"#E0F2FE",glow:"#BAE6FD",emblem:"bow"},gladiator:{primary:"#FDE68A",secondary:"#3D2C0F",accent:"#FEF3C7",glow:"#FDE68A",emblem:"shield"},marksman:{primary:"#A7F3D0",secondary:"#1A3D36",accent:"#D1FAE5",glow:"#A7F3D0",emblem:"bow"},sentry:{primary:"#60A5FA",secondary:"#1E3A8A",accent:"#BFDBFE",glow:"#60A5FA",emblem:"shield"},alchemist:{primary:"#FDE68A",secondary:"#3D2C0F",accent:"#FEF3C7",glow:"#FDE68A",emblem:"orb"},shieldbearer:{primary:"#93C5FD",secondary:"#1E3A8A",accent:"#DBEAFE",glow:"#93C5FD",emblem:"shield"},duelist:{primary:"#FCA5A5",secondary:"#3A1B1B",accent:"#FECACA",glow:"#FCA5A5",emblem:"sword"},stormcaller:{primary:"#A78BFA",secondary:"#2B1C3A",accent:"#E9D5FF",glow:"#A78BFA",emblem:"orb"},phalanx:{primary:"#67E8F9",secondary:"#163341",accent:"#BFF6FB",glow:"#67E8F9",emblem:"spear"},witch:{primary:"#C4B5FD",secondary:"#312E81",accent:"#DDD6FE",glow:"#C4B5FD",emblem:"orb"},beastmaster:{primary:"#86EFAC",secondary:"#143224",accent:"#CFF8DA",glow:"#86EFAC",emblem:"bow"},recruit:{primary:"#CBD5E1",secondary:"#334155",accent:"#E2E8F0",glow:"#CBD5E1",emblem:"shield"},slinger:{primary:"#FCA5A5",secondary:"#3A1B1B",accent:"#FECACA",glow:"#FCA5A5",emblem:"bow"},javelin:{primary:"#67E8F9",secondary:"#163341",accent:"#BFF6FB",glow:"#67E8F9",emblem:"spear"},mystic:{primary:"#A78BFA",secondary:"#2B1C3A",accent:"#E9D5FF",glow:"#A78BFA",emblem:"orb"},medic:{primary:"#86EFAC",secondary:"#143224",accent:"#CFF8DA",glow:"#86EFAC",emblem:"plus"},shieldman:{primary:"#93C5FD",secondary:"#1E3A8A",accent:"#DBEAFE",glow:"#93C5FD",emblem:"shield"}};function we(e){return g0[e]??{primary:"#7f8c8d",secondary:"#2c3e50",accent:"#bdc3c7",glow:"#95a5a6",emblem:"sword"}}function zt(e){switch(e){case"warrior":return["Vanguard","Skirmisher"];case"archer":return["Ranger"];case"mage":return["Caster"];case"knight":return["Vanguard"];case"rogue":return["Skirmisher"];case"spear":return["Lancer"];case"cleric":return["Support","Caster"];case"sniper":return["Ranger"];case"guardian":return["Vanguard"];case"berserker":return["Skirmisher"];case"frost":return["Caster"];case"paladin":return["Vanguard","Support"];case"hunter":return["Ranger"];case"assassin":return["Skirmisher"];case"ballista":return["Ranger"];case"sorcerer":return["Caster"];case"champion":return["Vanguard"];case"templar":return["Vanguard","Support"];case"monk":return["Support"];case"crossbow":return["Ranger"];case"pikeman":return["Lancer","Vanguard"];case"valkyrie":return["Vanguard","Ranger"];case"warlock":return["Caster"];case"druid":return["Support","Caster"];case"icearcher":return["Ranger","Caster"];case"gladiator":return["Vanguard"];case"marksman":return["Ranger"];case"sentry":return["Ranger","Vanguard"];case"alchemist":return["Support","Caster"];case"shieldbearer":return["Vanguard"];case"duelist":return["Skirmisher"];case"stormcaller":return["Caster"];case"phalanx":return["Lancer","Vanguard"];case"witch":return["Caster"];case"beastmaster":return["Ranger","Support"];case"recruit":return["Vanguard"];case"slinger":return["Ranger"];case"javelin":return["Lancer"];case"mystic":return["Caster"];case"medic":return["Support"];case"shieldman":return["Vanguard"];default:return[]}}const be=8,pe=8,N=a0()((e,t)=>({phase:"prep",round:1,gold:10,health:100,runStartTs:performance.now(),level:3,combatSpeed:.5,paused:!1,xp:0,cellSize:70,bench:[],units:{},board:{},shop:ti(3),shopSlots:5,shopFrozen:{},enemyGold:8,enemyLevel:3,enemyXp:0,enemyShop:ti(3),enemyShopSlots:5,enemyShopFrozen:{},log:[],effects:[],alwaysShowRanges:!1,shakeIntensity:1,toasts:[],roundResult:void 0,moveUnitToBoard:(r,n)=>e(Me(a=>{if(a.phase!=="prep")return;const i=$a(n),s=Math.floor(be/2),c=a.units[r];if(c&&c.team==="player"){const[l]=i.split(",").map(Number);if(l<s)return;const u=rs(a.level);if(x0(a,"player")>=u)return}if(!a.board[i]){for(const[l,u]of Object.entries(a.board))u===r&&(a.board[l]=void 0);a.bench=a.bench.filter(l=>l!==r),a.board[i]=r,a.units[r]||(a.units[r]=ei(r.split("-")[0],"player",r))}})),moveUnit:(r,n)=>e(Me(a=>{if(a.phase!=="prep")return;const i=$a(n),s=Math.floor(be/2),c=a.units[r];if(c&&c.team==="player"){const[u]=i.split(",").map(Number);if(u<s)return}if(a.board[i])return;const l=jn(a.board,r);l&&(a.board[l]=void 0);for(const[u,x]of Object.entries(a.board))x===r&&(a.board[u]=void 0);a.board[i]=r})),removeUnit:r=>e(Me(n=>{if(n.phase!=="prep")return;const a=$a(r),i=n.board[a];i&&(n.board[a]=void 0,n.bench.push(i))})),storeUnit:r=>e(Me(n=>{if(n.phase!=="prep"||!n.units[r]||n.bench.includes(r))return;const a=jn(n.board,r);a&&(n.board[a]=void 0,n.bench.push(r))})),buyUnit:r=>e(Me(n=>{if(n.phase!=="prep")return;const a=n.shop.find(s=>s.id===r);if(!a||n.gold<a.cost)return;n.gold-=a.cost;const i=ei(a.templateKey,"player");n.units[i.id]=i,n.bench.push(i.id),ni(n,i.templateKey,"player"),n.shop=n.shop.filter(s=>s.id!==a.id)})),sellUnit:r=>e(Me(n=>{if(n.phase!=="prep")return;const a=n.units[r];if(!a)return;const i=te[a.templateKey].cost;n.gold+=Math.ceil(i*.7),delete n.units[r],n.bench=n.bench.filter(c=>c!==r);const s=jn(n.board,r);s&&(n.board[s]=void 0)})),reroll:()=>e(Me(r=>{if(r.phase!=="prep")return;const n=2;r.gold<n||(r.gold-=n,r.shopLocked||(r.shop=ts(r)))})),buyXp:()=>e(Me(r=>{if(r.phase!=="prep")return;const n=4,a=4;r.gold<n||(r.gold-=n,vc(r,a))})),startCombat:()=>{t().phase==="prep"&&(e(Me(r=>{r.phase="combat",r.paused=!1,r.runStartTs||(r.runStartTs=performance.now()),r.log.push(`Round ${r.round} begins`),r.recentHpAnim=void 0,r.damageThisRound={},r.damageParticipants=Object.values(r.board).filter(Boolean).map(a=>r.units[a]).filter(a=>!!a&&a.team==="player").map(a=>a.id),r.savedPlacement={};for(const[a,i]of Object.entries(r.board)){if(!i)continue;const s=r.units[i];s&&s.team==="player"&&(r.savedPlacement[i]=a)}const n=wc(r,r.lastRoundPlayerPlacement??r.savedPlacement??{});xc(r,n),k0(r),bc(r,"player"),bc(r,"enemy"),C0(r),E0(r),J(r,"player",["frost","marksman"])&&r.log.push("Special synergy activated: Frost + Marksman  Shatter strike"),J(r,"player",["paladin","sorcerer"])&&r.log.push("Special synergy activated: Paladin + Sorcerer  Sanctified Nova"),J(r,"player",["assassin","rogue"])&&r.log.push("Special synergy activated: Assassin + Rogue  Backstab Bleed"),J(r,"player",["guardian","cleric"])&&r.log.push("Special synergy activated: Guardian + Cleric  Bulwark Blessing"),J(r,"player",["hunter","beastmaster"])&&r.log.push("Special synergy activated: Hunter + Beastmaster  Pack Volley"),J(r,"player",["spear","phalanx"])&&r.log.push("Special synergy activated: Spear + Phalanx  Impale"),J(r,"player",["mage","warlock"])&&r.log.push("Special synergy activated: Mage + Warlock  Arcane Ruin"),J(r,"player",["druid","monk"])&&r.log.push("Special synergy activated: Druid + Monk  Purifying Grove"),J(r,"player",["sniper","marksman"])&&r.log.push("Special synergy activated: Sniper + Marksman  Headshot"),J(r,"player",["ballista","sentry"])&&r.log.push("Special synergy activated: Ballista + Sentry  Overwatch"),J(r,"player",["icearcher","frost"])&&r.log.push("Special synergy activated: Ice Archer + Frost  Deep Freeze"),J(r,"player",["knight","templar"])&&r.log.push("Special synergy activated: Knight + Templar  Holy Bash"),J(r,"player",["valkyrie","paladin"])&&r.log.push("Special synergy activated: Valkyrie + Paladin  Judgement"),J(r,"enemy",["frost","marksman"])&&r.log.push("Enemy synergy active: Frost + Marksman"),J(r,"enemy",["paladin","sorcerer"])&&r.log.push("Enemy synergy active: Paladin + Sorcerer"),J(r,"enemy",["assassin","rogue"])&&r.log.push("Enemy synergy active: Assassin + Rogue"),J(r,"enemy",["guardian","cleric"])&&r.log.push("Enemy synergy active: Guardian + Cleric"),J(r,"enemy",["hunter","beastmaster"])&&r.log.push("Enemy synergy active: Hunter + Beastmaster"),J(r,"enemy",["spear","phalanx"])&&r.log.push("Enemy synergy active: Spear + Phalanx"),J(r,"enemy",["mage","warlock"])&&r.log.push("Enemy synergy active: Mage + Warlock"),J(r,"enemy",["druid","monk"])&&r.log.push("Enemy synergy active: Druid + Monk"),J(r,"enemy",["sniper","marksman"])&&r.log.push("Enemy synergy active: Sniper + Marksman"),J(r,"enemy",["ballista","sentry"])&&r.log.push("Enemy synergy active: Ballista + Sentry"),J(r,"enemy",["icearcher","frost"])&&r.log.push("Enemy synergy active: Ice Archer + Frost"),J(r,"enemy",["knight","templar"])&&r.log.push("Enemy synergy active: Knight + Templar"),J(r,"enemy",["valkyrie","paladin"])&&r.log.push("Enemy synergy active: Valkyrie + Paladin")})),j0(e,t))},nextRound:()=>e(Me(r=>{if(r.phase!=="result")return;r.phase="prep",r.paused=!1,r.round+=1;let n=5;const a=Math.min(3,Math.floor(r.gold/20));n+=a;const i=r.winStreak??0,s=r.loseStreak??0,c=(r.lastOutcome==="win"?i:r.lastOutcome==="loss"?s:0)||0;c>=3&&(n+=Math.min(2,Math.floor(c/3))),r.gold+=n;let l=5;const u=Math.min(3,Math.floor(r.enemyGold/20));l+=u;const x=(r.lastOutcome==="win"?r.winStreak??0:r.lastOutcome==="loss"?r.loseStreak??0:0)||0;x>=3&&(l+=Math.min(2,Math.floor(x/3))),r.enemyGold+=l,vc(r,2),Jd(r,2),r.shopLocked||(r.shop=ts(r)),r.enemyShop=el(r);const f=wc(r,r.lastRoundPlayerPlacement??{});xc(r,f);const v=Object.values(r.units).filter(k=>k.team==="player"),y=Object.values(r.units).filter(k=>k.team==="enemy");r.units=Object.fromEntries([...v,...y].map(k=>[k.id,k]));for(const k of[...v,...y]){const A=te[k.templateKey].stats,_=k.star??1;k.hp=A.hp*_,k.lastAttackAt=0,k.lastMoveAt=0}const g={},d=r.savedPlacement??{},w=rs(r.level);let h=0;for(const[k,A]of Object.entries(d))if(r.units[k]){if(h>=w)break;g[A]=k,h++}r.board=g;const p=new Set(Object.values(g).filter(Boolean)),m=v.map(k=>k.id);r.bench=m.filter(k=>!p.has(k)),r.lastRoundPlayerPlacement=d,r.savedPlacement=void 0,r.log.push("Prep phase"),jc(r,"player",.15),jc(r,"enemy",.12)})),logLine:r=>e(Me(n=>void n.log.push(r))),setCellSize:r=>e(Me(n=>{n.cellSize=Math.max(40,Math.min(240,Math.round(r)))})),setShopFocusTrait:r=>e(Me(n=>{n.shopFocusTrait=r})),setCombatSpeed:r=>e(Me(n=>{n.combatSpeed=Math.max(.1,Math.min(4,Math.round(r*100)/100))})),togglePause:()=>e(Me(r=>{r.phase==="combat"&&(r.paused=!r.paused)})),setPaused:r=>e(Me(n=>{n.phase==="combat"&&(n.paused=!!r)})),pushToast:r=>e(Me(n=>{n.toasts||(n.toasts=[]),n.toasts.push({...r,id:r.id??`toast-${Math.random()}`})})),dismissToast:r=>e(Me(n=>{var a;n.toasts=((a=n.toasts)==null?void 0:a.filter(i=>i.id!==r))??[]}))})),$a=e=>`${e.r},${e.c}`;function jn(e,t){for(const[r,n]of Object.entries(e))if(n===t)return r}function ti(e,t=5){return y0(e,t).map(n=>{const a=te[n];return{id:`shop-${Math.random().toString(36).slice(2,8)}`,templateKey:n,name:a.name,cost:a.cost}})}function ts(e){const t=e.shopSlots??5,r=e.shopFrozen??{},n=e.shop.filter(s=>r[s.id]),a=Math.max(0,t-n.length),i=ti(e.level,a);return e.shopFrozen=Object.fromEntries(n.map(s=>[s.id,!0])),[...n,...i]}function y0(e,t){const r=Object.keys(te).filter(l=>te[l].cost<=2),n=Object.keys(te).filter(l=>te[l].cost===3),a=Object.keys(te).filter(l=>te[l].cost===4),i=Object.keys(te).filter(l=>te[l].cost>=5),s=v0(e),c=[];for(let l=0;l<t;l++){const u=Math.random();u<s.common&&r.length?c.push(r[Math.floor(Math.random()*r.length)]):u<s.common+s.rare&&n.length?c.push(n[Math.floor(Math.random()*n.length)]):u<s.common+s.rare+s.epic&&a.length?c.push(a[Math.floor(Math.random()*a.length)]):i.length?c.push(i[Math.floor(Math.random()*i.length)]):c.push(r[Math.floor(Math.random()*r.length)])}return c}function v0(e){switch(!0){case e<=3:return{common:.78,rare:.2,epic:.02,legendary:0};case e<=5:return{common:.6,rare:.32,epic:.07,legendary:.01};case e<=7:return{common:.45,rare:.4,epic:.12,legendary:.03};default:return{common:.3,rare:.45,epic:.18,legendary:.07}}}function rs(e){return Math.max(1,Math.min(15,e))}function x0(e,t){let r=0;for(const n of Object.values(e.board)){if(!n)continue;const a=e.units[n];a&&a.team===t&&r++}return r}function ri(e){return 4+e*2}function vc(e,t){e.xp+=t;let r=ri(e.level);for(;e.xp>=r;)e.xp-=r,e.level+=1,e.log.push(`Level up! Reached Lv ${e.level}`),e.toasts||(e.toasts=[]),e.toasts.push({id:`toast-${Math.random().toString(36).slice(2,8)}`,type:"ok",text:`Level Up: Lv ${e.level}`,startedAt:performance.now(),durationMs:3e3}),e.shopLocked||(e.shop=ts(e)),r=ri(e.level)}function Jd(e,t){e.enemyXp+=t;let r=ri(e.enemyLevel);for(;e.enemyXp>=r;)e.enemyXp-=r,e.enemyLevel+=1,e.log.push(`Enemy leveled to Lv ${e.enemyLevel}`),e.enemyShop=el(e),r=ri(e.enemyLevel)}function el(e){const t=e.enemyShopSlots??5,r=e.enemyShopFrozen??{},n=e.enemyShop.filter(s=>r[s.id]),a=Math.max(0,t-n.length),i=ti(e.enemyLevel,a);return e.enemyShopFrozen=Object.fromEntries(n.map(s=>[s.id,!0])),[...n,...i]}function xc(e,t){const r=e.level;for(;e.enemyLevel<r&&e.enemyGold>=4;)e.enemyGold-=4,Jd(e,4);const n=Object.values(e.units).filter(f=>f.team==="enemy"),a={},i={};for(const f of n){a[f.templateKey]=(a[f.templateKey]??0)+1;for(const v of zt(f.templateKey))i[v]=(i[v]??0)+1}let s=0;const c=Math.min(8,2+Math.floor(e.round/2)),l=new Set,u=()=>{let f=!1;const v=e.enemyShop.map(y=>{let g=to(y.templateKey,t);const d=a[y.templateKey]??0;d>=2?g-=3:d===1&&(g-=1);const w=zt(y.templateKey);for(const h of w){const p=i[h]??0;p===1?g-=1.5:p===3?g-=1.2:p===5?g-=1:p>0&&(g-=.25)}return e.enemyGold<6&&(g-=Math.max(0,3-y.cost)*.1),{it:y,score:g}});v.sort((y,g)=>y.score-g.score);for(const{it:y}of v){if(e.enemyGold<y.cost)continue;e.enemyGold-=y.cost;const g=ei(y.templateKey,"enemy");e.units[g.id]=g,l.add(y.id),a[y.templateKey]=(a[y.templateKey]??0)+1,f=!0}return f};for(;e.enemyGold>=2&&s<c;)if(u()){l.size>0&&(e.enemyShop=e.enemyShop.filter(g=>!l.has(g.id)));const v=Array.from(new Set(Object.keys(a)));for(const g of v)ni(e,g,"enemy");const y=e.enemyShop.filter(g=>g.cost>e.enemyGold);y.sort((g,d)=>{const w=to(g.templateKey,t)+kc(g.templateKey,i),h=to(d.templateKey,t)+kc(d.templateKey,i);return w-h}),e.enemyShopFrozen={};for(const g of y.slice(0,2))e.enemyShopFrozen[g.id]=!0;if(e.enemyGold<2)break}else if(e.enemyGold>=2)e.enemyGold-=2,e.enemyShop=el(e),s++;else break;l.size>0&&(e.enemyShop=e.enemyShop.filter(f=>!l.has(f.id)));const x=Array.from(new Set(Object.keys(a)));for(const f of x)ni(e,f,"enemy")}function kc(e,t){let r=0;for(const n of zt(e)){const a=t[n]??0;a===1?r-=1.2:a===3?r-=1:a===5?r-=.8:a>0&&(r-=.2)}return r}function k0(e){const t=w0(e),r=Object.values(e.units).filter(c=>c.team==="enemy"),n=rs(e.enemyLevel),i=[...r].sort((c,l)=>{const u=c.star||1,x=l.star||1;if(x!==u)return x-u;const f=te[c.templateKey].cost,v=te[l.templateKey].cost;if(v!==f)return v-f;const y=te[c.templateKey].stats.hp;return te[l.templateKey].stats.hp-y}).slice(0,n),s=b0(i.map(c=>c.templateKey),t);for(const[c,l]of Object.entries(e.board)){if(!l)continue;const u=e.units[l];u&&u.team==="enemy"&&(e.board[c]=void 0)}for(let c=0;c<i.length&&c<s.length;c++)e.board[$a(s[c])]=i[c].id;e.log.push(`Enemy deploys ${i.length} units`)}function w0(e){var l,u;const t=new Set(Object.values(e.units).filter(x=>x.team==="player"&&x.hp>0).map(x=>x.id)),r={},n=new Set;let a=!1,i=0,s=0;for(const[x,f]of Object.entries(e.board)){if(!f||!t.has(f))continue;const[v,y]=x.split(",").map(Number);r[y]=(r[y]??0)+1;const g=e.units[f],d=te[g.templateKey];d.stats.range>=3?s++:i++,((l=d.ability)==null?void 0:l.type)==="cleave"&&n.add(y),((u=d.ability)==null?void 0:u.type)==="healPulse"&&(a=!0)}const c=Array.from({length:pe},(x,f)=>f).sort((x,f)=>(r[f]??0)-(r[x]??0));return{meleeCount:i,rangedCount:s,hotColumns:c,cleaveThreatColumns:Array.from(n),hasHealer:a}}function wc(e,t){var l,u;const r={},n=new Set;let a=!1,i=0,s=0;for(const[x,f]of Object.entries(t)){const v=e.units[x];if(!v||v.team!=="player")continue;const[y,g]=f.split(",").map(Number);r[g]=(r[g]??0)+1;const d=te[v.templateKey];d.stats.range>=3?s++:i++,((l=d.ability)==null?void 0:l.type)==="cleave"&&n.add(g),((u=d.ability)==null?void 0:u.type)==="healPulse"&&(a=!0)}const c=Array.from({length:pe},(x,f)=>f).sort((x,f)=>(r[f]??0)-(r[x]??0));return{meleeCount:i,rangedCount:s,hotColumns:c,cleaveThreatColumns:Array.from(n),hasHealer:a}}function to(e,t){var i,s,c,l,u;const r=te[e],n=r.stats.range;let a=0;return t.meleeCount>=t.rangedCount?a+=n>=3?-2:n===2?-1:1:a+=n<=1?-2:n===2?-1:1,t.meleeCount>t.rangedCount&&(((i=r.ability)==null?void 0:i.type)==="stunOnHit"||((s=r.ability)==null?void 0:s.type)==="slowOnHit")&&(a-=1.5),t.cleaveThreatColumns.length>0&&((c=r.ability)==null?void 0:c.type)==="healPulse"&&(a-=1.5),(((l=r.ability)==null?void 0:l.type)==="multishot"||((u=r.ability)==null?void 0:u.type)==="pierce")&&(a-=.8),t.rangedCount>t.meleeCount&&n<=1&&r.stats.hp>=140&&(a-=1.2),a}function b0(e,t){const r=[];let n=0,a=0,i=0,s=0;const c=t.hotColumns,l=[...c].reverse(),u=c[Math.floor(c.length/2)]??0,x=g=>{var w;const d=(w=te[g].ability)==null?void 0:w.type;return d==="stunOnHit"||d==="slowOnHit"},f=g=>{var d;return((d=te[g].ability)==null?void 0:d.type)==="healPulse"},v=g=>te[g].stats.range<=1&&te[g].stats.hp>=140;for(const g of e){const d=te[g].stats;if(f(g))r.push({r:1,c:u});else if(v(g))r.push({r:2+n%1,c:c[n%c.length]}),n++;else if(x(g))r.push({r:1,c:l[s%l.length]}),s++;else if(d.range===2){const w=c[i%c.length];r.push({r:2,c:(w+(i%2===0?1:pe-1))%pe}),i++}else if(d.range>=3){const w=c[a%c.length];r.push({r:0,c:(w+(a%2===0?1:pe-2))%pe}),a++}else r.push({r:2,c:c[n%c.length]}),n++}const y=new Set;return r.map(g=>{let{r:d,c:w}=g,h=0;for(;y.has(`${d},${w}`)&&h<pe;)w=(w+1)%pe,h++;return y.add(`${d},${w}`),{r:d,c:w}})}function j0(e,t){let n=!0;performance.now();const a=()=>{if(!n)return;const s=performance.now();e(Me(u=>{if(u.phase!=="combat"){n=!1;return}if(u.paused)return;const x=Math.max(.2,Math.min(4,u.combatSpeed||1)),f=Math.max(10,Math.floor(100/x));(u.shakeMs||0)>0&&(u.shakeMs=Math.max(0,(u.shakeMs||0)-f),u.shakeKey=u.shakeMs>0?`sk-${Math.random().toString(36).slice(2,6)}`:void 0),M0(u,s,Math.max(10,Math.floor(100/x)));const v=$0(u);v&&(u.health<=0?(u.phase="gameover",S0(u)):u.phase="result",u.lastOutcome=v.result,v.result==="win"?(u.winStreak=(u.winStreak??0)+1,u.loseStreak=0):v.result==="loss"&&(u.loseStreak=(u.loseStreak??0)+1,u.winStreak=0),u.log.push(v.message),u.effects=[],n=!1)}));const c=Math.max(.2,Math.min(4,t().combatSpeed||1)),l=Math.max(10,Math.floor(100/c));n&&setTimeout(a,l)},i=Math.max(.2,Math.min(4,t().combatSpeed||1));setTimeout(a,Math.max(10,Math.floor(100/i)))}function S0(e){try{const t=Math.max(0,performance.now()-(e.runStartTs||performance.now())),r=new Map;for(const s of Object.values(e.units)){if(s.team!=="player")continue;const c=`${s.templateKey}-${s.star}`;r.set(c,(r.get(c)??0)+1)}const n=Array.from(r.entries()).map(([s,c])=>{const[l,u]=s.split("-");return{templateKey:l,star:Number(u)}}),a={id:`run-${Math.random().toString(36).slice(2,10)}`,when:Date.now(),rounds:e.round,durationMs:t,level:e.level,hp:e.health,comp:n},i=JSON.parse(localStorage.getItem("leaderboard")||"[]");for(i.push(a);i.length>50;)i.shift();localStorage.setItem("leaderboard",JSON.stringify(i))}catch{}}function M0(e,t,r){var s,c,l,u,x,f,v;const n=Object.entries(e.board).filter(([y,g])=>!!g);n.sort(()=>Math.random()-.5);const a=ns(e,"player"),i=ns(e,"enemy");for(const[y,g]of n){const d=e.units[g];if(!d||d.hp<=0)continue;const[w,h]=y.split(",");let p=Number(w),m=Number(h);if((s=d.status)!=null&&s.bleedUntil&&d.status.bleedUntil>t&&d.status.bleedDps){const j=d.status.bleedDps*r/1e3;ue(d,j)}const k=Object.values(e.units).filter(j=>j.team!==d.team&&j.hp>0).map(j=>j.id);if(k.length===0)return;let A=null,_=Number.MAX_SAFE_INTEGER;for(const[j,P]of Object.entries(e.board)){if(!P||!k.includes(P))continue;const[E,R]=j.split(",").map(Number),Z=Math.abs(E-p)+Math.abs(R-m);Z<_&&(_=Z,A=P)}if(!A)continue;const O=te[d.templateKey],$=d.star??1,D=O.stats,Q=O.abilityLevels&&O.abilityLevels[$]||O.ability,G=Math.max(.2,Math.min(4,e.combatSpeed||1));let V=Math.max(120,Math.floor(D.atkIntervalMs/$/G)),ie=0,re=Math.max(80,Math.floor(D.moveIntervalMs/$/G));const ne=d.team==="player"?a:i;if(ne.Ranger&&(V=Math.floor(V*(1-[0,.08,.14,.2][ne.Ranger]))),ne.Skirmisher&&(re=Math.floor(re*(1-[0,.08,.14,.2][ne.Skirmisher]))),ne.Vanguard&&(ie+=[0,1,3,5][ne.Vanguard]),d.coverAtkBonus&&(ie+=d.coverAtkBonus),(Q==null?void 0:Q.type)==="healPulse"&&t-(d.specialLastAt||0)>=Q.cooldownMs){d.specialLastAt=t;const j=2;e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:p,c:m},color:"#22c55e",startedAt:t,durationMs:600,maxRadiusCells:j,tier:$,rings:4+($-1),glow:.45});for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);if(Math.abs(H-p)+Math.abs(ee-m)<=j){const T=te[z.templateKey].stats.hp*(z.star||1),C=(ne.Support?1+[0,.15,.25,.4][ne.Support]:1)*(ne.Caster?1+[0,.05,.1,.15][ne.Caster]:1),S=Math.floor(Q.amount*(d.star||1)*C),M=z.hp;z.hp=Math.min(T,z.hp+S),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"text",at:{r:H,c:ee},value:`+${z.hp-M}`,color:"#22c55e",startedAt:t,durationMs:700,sizeScale:.9}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:H,c:ee},color:"#22c55e",shape:"burst",startedAt:t,durationMs:360,tier:$,particles:12,glow:.5})}}const P=we(d.templateKey),E=P.accent,R=P.primary;if(e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:d.templateKey==="paladin"?"crest":d.templateKey==="monk"?"rune":"leaf",color:E,color2:R,startedAt:t,durationMs:600,sizeScale:1.1,glow:.35,rotate:d.templateKey==="monk"}),e.log.push(`${d.templateKey} casts heal`),d.templateKey==="cleric"&&J(e,d.team,["guardian","cleric"])){for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);if(Math.abs(H-p)+Math.abs(ee-m)<=j){const b=16*(d.star||1);z.shieldHp=(z.shieldHp||0)+b,e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:H,c:ee},color:"#60a5fa",startedAt:t,durationMs:260,maxRadiusCells:.8,rings:2,glow:.3})}}e.log.push("Bulwark Blessing: allies gain shields")}if((d.templateKey==="druid"||d.templateKey==="monk")&&J(e,d.team,["druid","monk"])){for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);if(Math.abs(H-p)+Math.abs(ee-m)<=j){z.status&&(z.status.slowUntil=0,z.status.stunnedUntil=0);const T=te[z.templateKey].stats.hp*(z.star||1),C=6*(d.star||1);z.hp=Math.min(T,z.hp+C),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:H,c:ee},shape:"leaf",color:"#86efac",color2:"#bbf7d0",startedAt:t,durationMs:360,sizeScale:.9,glow:.25})}}e.log.push("Purifying Grove: allies cleansed")}if((d.templateKey==="paladin"||d.templateKey==="guardian")&&J(e,d.team,["guardian","paladin"]))for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);Math.abs(H-p)+Math.abs(ee-m)<=j&&(z.damageReductionPct=Math.min(.2,(z.damageReductionPct||0)+.1),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:H,c:ee},color:"#60a5fa",startedAt:t,durationMs:280,maxRadiusCells:.8,rings:3,glow:.5,power:"synergy"}))}if(d.templateKey==="paladin"&&J(e,d.team,["paladin","templar"])&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:p,c:m},color:"#fcd34d",startedAt:t,durationMs:260,maxRadiusCells:.8,rings:4,glow:.5,power:"synergy"}),d.templateKey==="alchemist"&&J(e,d.team,["alchemist","cleric"]))for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);Math.abs(H-p)+Math.abs(ee-m)<=j&&(z.shieldHp=(z.shieldHp||0)+10*(d.star||1),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:H,c:ee},color:"#86efac",startedAt:t,durationMs:240,maxRadiusCells:.6,rings:3,glow:.45,power:"synergy"}))}if(d.templateKey==="paladin"&&J(e,d.team,["druid","paladin"]))for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);if(Math.abs(H-p)+Math.abs(ee-m)<=j){const b=te[z.templateKey].stats.hp*(z.star||1),T=5*(d.star||1);z.hp=Math.min(b,z.hp+T),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:H,c:ee},color:"#86efac",startedAt:t,durationMs:220,maxRadiusCells:.6,rings:3,glow:.4,power:"synergy"})}}if(Qe(e,d.team,["druid","monk","paladin"])&&d.templateKey==="paladin")for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);if(Math.abs(H-p)+Math.abs(ee-m)<=j){const b=te[z.templateKey].stats.hp*(z.star||1),T=8*(d.star||1);z.hp=Math.min(b,z.hp+T),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:H,c:ee},shape:"leaf",color:"#86efac",color2:"#fde68a",startedAt:t,durationMs:320,sizeScale:1.1,glow:.6,power:"synergy"})}}if(Qe(e,d.team,["cleric","monk","medic"])&&d.templateKey==="cleric")for(const[Z,X]of Object.entries(e.board)){if(!X)continue;const z=e.units[X];if(!z||z.team!==d.team)continue;const[H,ee]=Z.split(",").map(Number);if(Math.abs(H-p)+Math.abs(ee-m)<=j){const b=te[z.templateKey].stats.hp*(z.star||1),T=4*(d.star||1),C=z.hp;z.hp=Math.min(b,z.hp+T),z.hp>C&&(e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"text",at:{r:H,c:ee},value:`+${z.hp-C}`,color:"#22c55e",startedAt:t,durationMs:600,sizeScale:.9,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:H,c:ee},shape:"leaf",color:"#86efac",color2:"#22c55e",startedAt:t,durationMs:260,sizeScale:.9,glow:.45,power:"synergy"}))}}}if((c=d.status)!=null&&c.stunnedUntil&&d.status.stunnedUntil>t)continue;if(_<=D.range&&t-d.lastAttackAt>=V){d.lastAttackAt=t;const j=e.units[A],[P,E]=Object.entries(e.board).find(([b,T])=>T===A)[0].split(",").map(Number);if(D.range>1){const b=te[d.templateKey].key;let T="orb",C="#7cf",S;const M=[];if(b==="archer"||b==="hunter"||b==="sniper"||b==="marksman"||b==="crossbow"||b==="icearcher"||b==="slinger"||b==="sentry"||b==="beastmaster"||b==="ballista"||b==="javelin"||b==="spear"){const q=we(d.templateKey);switch(b){case"crossbow":T="bullet",C=q.accent,S=q.primary;break;case"marksman":T="bullet",C=q.accent,S="#ffffff";break;case"sniper":T="saber",C=q.accent,S="#ffffff";break;case"icearcher":T="arrow",C="#60a5fa",S="#e0f2fe";break;case"archer":T="arrow",C=q.accent,S=q.primary;break;case"hunter":T="feather",C=q.accent,S=q.primary;break;case"slinger":T="bomb",C=q.accent,S=q.primary;break;case"sentry":T="chakram",C=q.accent,S=q.primary;break;case"beastmaster":T="chakram",C=q.accent,S="#86efac";break;case"ballista":T="shard",C=q.accent,S=q.primary;break;case"javelin":case"spear":T="spear",C="#67e8f9",S="#0ea5e9";break;default:T="orb",C=q.accent,S=q.primary;break}$===3&&(M.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:P,c:E},color:C,color2:"#ffffff",shape:T,startedAt:t,durationMs:260,tier:$,trail:!0,sizeScale:.9,glow:.35}),(b==="sniper"||b==="marksman")&&M.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:P,c:E},color:"#ffffff",color2:"#ffffff",shape:"bullet",startedAt:t,durationMs:220,tier:$,trail:!0,sizeScale:.6,glow:.25}))}else if(b==="mage"||b==="sorcerer"||b==="warlock"||b==="frost"||b==="mystic"||b==="witch"||b==="stormcaller"||b==="cleric"||b==="monk"||b==="druid"||b==="paladin"){const q=we(d.templateKey);T=b==="stormcaller"?"bolt":b==="witch"?"chakram":"orb",C=b==="frost"?"#93c5fd":q.accent,S=q.primary,$===3&&(b==="sorcerer"||b==="mage")&&(T="beam",S="#ffffff")}else b==="pikeman"||b==="templar"?(T="spear",C="#67e8f9",S="#0ea5e9"):b==="ballista"&&(T="shard",C="#a3e4d7",S="#d6fff4");e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:P,c:E},color:we(d.templateKey).accent,startedAt:t,durationMs:Math.floor(300*($===3?.75:$===2?.88:1)),maxRadiusCells:.7,tier:$,rings:3,glow:.12}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:P,c:E},color:C,color2:S,shape:T,startedAt:t,durationMs:Math.floor(300*($===3?.75:$===2?.88:1)),tier:$,trail:!0,sizeScale:1+($-1)*.28,glow:$>=3?.7:$===2?.4:.2});const F={r:p,c:m},L=we(d.templateKey),U=L.accent,K=L.primary;b==="sniper"||b==="marksman"?e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:F,shape:"reticle",color:U,color2:K,startedAt:t,durationMs:320,sizeScale:.9,glow:.2}):b==="icearcher"||b==="frost"?e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:F,shape:"snow",color:U,color2:K,startedAt:t,durationMs:360,sizeScale:1,glow:.25,rotate:!0}):b==="sorcerer"||b==="warlock"||b==="mage"||b==="mystic"||b==="witch"||b==="stormcaller"?e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:F,shape:b==="stormcaller"?"lightning":"rune",color:U,color2:K,startedAt:t,durationMs:380,sizeScale:1.1,glow:.35,rotate:b!=="stormcaller"}):e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:F,shape:"reticle",color:U,color2:K,startedAt:t,durationMs:260,sizeScale:.85,glow:.18});for(const q of M)e.effects.push(q);if($>=2){const q=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:"reticle",color:q.accent,color2:q.primary,startedAt:t,durationMs:260,sizeScale:.8+($-1)*.2,glow:.2+($-1)*.15})}}else{const b=te[d.templateKey].key;let T="slash",C="#fc7",S;const M=we(d.templateKey);if(b==="warrior"||b==="knight"||b==="guardian"||b==="gladiator"||b==="valkyrie"||b==="champion"||b==="berserker"?(T="slash",C=M.accent,S=M.primary):b==="rogue"||b==="assassin"||b==="duelist"?(T="rip",C=M.accent,S=M.primary):b==="paladin"||b==="templar"||b==="monk"||b==="druid"||b==="cleric"?(T="smite",C=M.accent,S=M.primary):b==="spear"||b==="pikeman"||b==="phalanx"||b==="javelin"?(T="thrust",C="#67e8f9",S="#0ea5e9"):(T="impact",C=M.accent,S=M.primary),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:P,c:E},color:we(d.templateKey).accent,startedAt:t,durationMs:160,maxRadiusCells:.55,tier:$,rings:2,glow:.1}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:C,color2:S,shape:T,startedAt:t,durationMs:Math.floor(200*($===3?.85:$===2?.92:1)),tier:$,sizeScale:1+($-1)*.3,glow:$>=3?.6:$===2?.35:.15,particles:10+($-1)*6}),d.templateKey==="valkyrie"&&J(e,d.team,["valkyrie","templar"])&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:"#fde68a",shape:"smite",startedAt:t,durationMs:240,glow:.7,power:"synergy"}),(d.templateKey==="knight"||d.templateKey==="guardian")&&J(e,d.team,["knight","guardian"])){const F=d.team==="player"?p+1:p-1,L=m;if(F>=0&&F<be&&L>=0&&L<pe){const U=e.board[`${F},${L}`];if(U){const K=e.units[U];K&&K.team===d.team&&(K.shieldHp=(K.shieldHp||0)+14*(d.star||1),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:F,c:L},color:"#60a5fa",startedAt:t,durationMs:240,maxRadiusCells:.6,rings:3,glow:.5,power:"synergy"}))}}}if(["warrior","knight","guardian","gladiator","valkyrie","champion","berserker","templar","paladin"].includes(b)){const F=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:"crest",color:F.accent,color2:F.primary,startedAt:t,durationMs:280,sizeScale:.9,glow:.25})}else if(["rogue","assassin","duelist"].includes(b)){const F=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:"rune",color:F.accent,color2:F.primary,startedAt:t,durationMs:260,sizeScale:.8,glow:.2,rotate:!0})}else if(["spear","pikeman","phalanx","javelin"].includes(b)){const F=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:"reticle",color:F.accent,color2:F.primary,startedAt:t,durationMs:260,sizeScale:.8,glow:.2})}else{const F=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:"crest",color:F.accent,color2:F.primary,startedAt:t,durationMs:220,sizeScale:.8,glow:.2})}if($===3){["warrior","knight","guardian","gladiator","valkyrie","champion","berserker"].includes(b)?e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:"#f59e0b",shape:"slash",startedAt:t,durationMs:140,tier:$,sizeScale:1.1,glow:.3,particles:6}):["spear","pikeman"].includes(b)?e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:"#67e8f9",color2:"#0ea5e9",shape:"impact",startedAt:t,durationMs:160,tier:$,sizeScale:1.1,glow:.3,particles:8}):["paladin","templar","monk","druid","cleric"].includes(b)&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:P,c:E},color:"#22c55e",startedAt:t,durationMs:220,maxRadiusCells:1,tier:$,rings:3,glow:.25});const F=we(d.templateKey);if(b==="berserker")e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:F.accent,color2:F.primary,shape:"shock",startedAt:t,durationMs:200,tier:$,sizeScale:1.1,glow:.5});else if(b==="duelist")e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:F.accent,color2:F.primary,shape:"rip",startedAt:t,durationMs:180,tier:$,sizeScale:1.1,glow:.4});else if(["spear","pikeman","phalanx","javelin"].includes(b)){const L=Math.sign(P-p),U=Math.sign(E-m),K=P+L,q=E+U;K>=0&&K<be&&q>=0&&q<pe&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:K,c:q},color:"#67e8f9",color2:"#0ea5e9",shape:"impact",startedAt:t,durationMs:200,tier:$,sizeScale:.9,glow:.3})}}}let R=Math.floor((D.atk+ie)*$);const Z=d.items||[];Z.includes("berserker_axe")&&(R+=10),(Q==null?void 0:Q.type)==="stunOnHit"&&Math.random()<Q.chance&&(j.status=j.status??{},j.status.stunnedUntil=t+Q.durationMs,e.log.push(`${d.templateKey} stuns ${j.templateKey}`),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:"#ffd166",shape:"burst",startedAt:t,durationMs:300,tier:$,particles:14+($-1)*4,glow:.65}));const X=ne.Caster?[0,.05,.08,.12][ne.Caster]:0;if((Q==null?void 0:Q.type)==="slowOnHit"&&Math.random()<Q.chance+X&&(j.status=j.status??{},j.status.slowUntil=t+Q.durationMs,j.status.slowFactor=Q.factor,e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:"#60a5fa",shape:"burst",startedAt:t,durationMs:320,tier:$,particles:14+($-1)*4,glow:.7}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:P,c:E},color:"#60a5fa",startedAt:t,durationMs:400,maxRadiusCells:1,tier:$,rings:3,glow:.25})),Z.includes("frost_rune")&&Math.random()<.2&&(j.status=j.status??{},j.status.slowUntil=t+900,j.status.slowFactor=.7),Z.includes("barbed_blade")&&Math.random()<.2&&(j.status=j.status??{},j.status.bleedUntil=t+3e3,j.status.bleedDps=8),D.range>1)T0(e,p,m,P,E,d.team)&&!(d.templateKey==="sniper"||d.templateKey==="marksman")&&(R=Math.floor(R*.8));else{const b=p===P&&Math.abs(m-E)===1,T=Sc(e,P,E,j.team)===0;b&&(R=Math.floor(R*1.1)),T&&(R=Math.floor(R*1.08))}const z=j.hp;ue(j,R);const H=j.hp,ee=z-H>=Math.max(12,te[j.templateKey].stats.hp*.22),Pe=ee?"#facc15":"#f87171";if(e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"text",at:{r:P,c:E},value:`-${Math.max(1,z-H)}`,color:Pe,startedAt:t,durationMs:720,sizeScale:(1+($-1)*.2)*(ee?1.1:1)}),ee&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:"#fde68a",shape:"impact",startedAt:t,durationMs:180,tier:$,sizeScale:1.1,glow:.6}),ee&&(e.shakeMs=Math.max(e.shakeMs||0,240),e.shakeKey=`sk-${Math.random().toString(36).slice(2,6)}`),(j.shieldHp||0)===0&&z>H&&z!==j.hp&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"decal",at:{r:P,c:E},color:"#60a5fa",shape:"scorch",startedAt:t,durationMs:500,sizeScale:.8}),Z.includes("vampiric_fang")){const T=te[d.templateKey].stats.hp*(d.star||1),C=Math.floor(R*.15);d.hp=Math.min(T,d.hp+C),C>0&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"text",at:{r:p,c:m},value:`+${C}`,color:"#22c55e",startedAt:t,durationMs:700,sizeScale:.9})}if(D.range>1){e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:P,c:E},color:"#0ea5e9",shape:"impact",startedAt:t,durationMs:220,tier:$,sizeScale:1,glow:.35});const b=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:P,c:E},shape:"reticle",color:b.accent,color2:b.primary,startedAt:t,durationMs:180,sizeScale:.7,glow:.2})}if(d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+R),e.log.push(`${d.templateKey}${$>1?`(${$})`:""} hits ${j.templateKey} for ${R}`),Qe(e,d.team,["knight","paladin","templar"])&&Math.random()<.2){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:b,c:T},color:"#fde68a",color2:"#ffffff",shape:"beam",startedAt:t,durationMs:260,trail:!0,sizeScale:1.1,glow:1,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:b,c:T},color:"#fde68a",color2:"#f59e0b",shape:"smite",startedAt:t,durationMs:260,glow:1,sizeScale:1.3,power:"synergy"});const C=Math.floor(R*.5);ue(j,C),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+C)}if(Qe(e,d.team,["archer","marksman","sniper"])&&D.range>1){const b=[];for(const[C,S]of Object.entries(e.board)){if(!S||S===j.id)continue;const M=e.units[S];if(!M||M.team===d.team||M.hp<=0)continue;const[F,L]=C.split(",").map(Number);Math.abs(F-p)+Math.abs(L-m)<=D.range&&b.push(S)}const T=b.sort(()=>Math.random()-.5).slice(0,2);for(const C of T){const S=e.units[C];if(!S)continue;const[M,F]=Object.entries(e.board).find(([U,K])=>K===C)[0].split(",").map(Number),L=Math.floor(R*.4);ue(S,L),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:M,c:F},color:"#facc15",color2:"#ffffff",shape:"arrow",startedAt:t,durationMs:240,trail:!0,sizeScale:1.1,glow:.8,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:M,c:F},color:"#ffffff",color2:"#ffffff",shape:"bullet",startedAt:t,durationMs:220,trail:!0,sizeScale:.7,glow:.5,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+L)}}if(Qe(e,d.team,["guardian","champion","gladiator"])&&D.range<=1){const b=[[p+1,m],[p-1,m],[p,m+1],[p,m-1]];for(const[T,C]of b){if(T<0||T>=be||C<0||C>=pe)continue;const S=e.board[`${T},${C}`];if(!S)continue;const M=e.units[S];!M||M.team!==d.team||(M.damageReductionPct=Math.min(.2,(M.damageReductionPct||0)+.08),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:T,c:C},color:"#f59e0b",shape:"shock",startedAt:t,durationMs:220,glow:.6,power:"synergy"}))}}if(Qe(e,d.team,["sorcerer","warlock","witch"])){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number),C=[[b+1,T],[b-1,T],[b,T+1],[b,T-1]];for(const[S,M]of C){if(S<0||S>=be||M<0||M>=pe)continue;const F=e.board[`${S},${M}`];if(!F)continue;const L=e.units[F];if(!L||L.team===d.team||L.hp<=0)continue;const U=Math.floor(R*.25);ue(L,U),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:S,c:M},shape:"rune",color:"#a78bfa",color2:"#7c3aed",startedAt:t,durationMs:260,sizeScale:1,glow:.7,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+U)}}if(Qe(e,d.team,["pikeman","phalanx","spear"])){const[b,T]=Object.entries(e.board).find(([L,U])=>U===j.id)[0].split(",").map(Number),C=Math.sign(b-p),S=Math.sign(T-m);let M=b+C,F=T+S;for(let L=0;L<2&&!(M<0||M>=be||F<0||F>=pe);L++){const U=e.board[`${M},${F}`];if(U){const K=e.units[U];if(K&&K.team!==d.team&&K.hp>0){const q=Math.floor(R*.25);ue(K,q),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:M,c:F},color:"#67e8f9",shape:"thrust",startedAt:t,durationMs:220,glow:.6,power:"synergy"})}}M+=C,F+=S}}if(Qe(e,d.team,["mage","sorcerer","stormcaller"])&&D.range>1&&Math.random()<.2){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:b,c:T},color:"#a78bfa",color2:"#7c3aed",shape:"bolt",startedAt:t,durationMs:220,trail:!0,sizeScale:1,glow:.8,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:b,c:T},color:"#7c3aed",color2:"#ffffff",shape:"beam",startedAt:t,durationMs:260,trail:!0,sizeScale:1.1,glow:.9,power:"synergy"});const C=Math.floor(R*.45);ue(j,C),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+C)}if(Qe(e,d.team,["rogue","assassin","duelist"])&&D.range<=1){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number),C=[[b+1,T],[b-1,T],[b,T+1],[b,T-1]];for(const[S,M]of C){if(S<0||S>=be||M<0||M>=pe)continue;const F=e.board[`${S},${M}`];if(!F)continue;const L=e.units[F];if(L&&L.team!==d.team){const U=Math.floor(R*.2);ue(L,U),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:S,c:M},color:"#ef4444",shape:"rip",startedAt:t,durationMs:220,glow:.8,power:"synergy"})}}}if(Qe(e,d.team,["guardian","shieldbearer","shieldman"])&&D.range<=1){const b=[[p+1,m],[p-1,m],[p,m+1],[p,m-1]];let T=!1;for(const[C,S]of b){if(C<0||C>=be||S<0||S>=pe)continue;const M=e.board[`${C},${S}`];if(!M)continue;const F=e.units[M];if(F&&F.team===d.team){const L=Math.floor(10*(d.star||1));F.shieldHp=(F.shieldHp||0)+L,e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:C,c:S},color:"#93c5fd",startedAt:t,durationMs:240,maxRadiusCells:1,glow:.6,power:"synergy"}),T=!0}}T&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:"crest",color:"#60a5fa",color2:"#93c5fd",startedAt:t,durationMs:260,sizeScale:1,glow:.7,power:"synergy"})}if(Qe(e,d.team,["frost","icearcher","mystic"])&&(l=j.status)!=null&&l.slowUntil&&j.status.slowUntil>t&&Math.random()<.35){const[b,T]=Object.entries(e.board).find(([M,F])=>F===j.id)[0].split(",").map(Number),C=650+50*(d.star||1);j.status=j.status||{},j.status.stunnedUntil=Math.max(j.status.stunnedUntil||0,t+C);const S=Math.floor(R*.3);ue(j,S),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+S),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:b,c:T},color:"#bae6fd",shape:"burst",startedAt:t,durationMs:260,glow:1,sizeScale:1.1,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:b,c:T},shape:"snow",color:"#60a5fa",color2:"#e0f2fe",startedAt:t,durationMs:300,sizeScale:1,glow:.8,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"decal",at:{r:b,c:T},color:"#93c5fd",shape:"frostcrack",startedAt:t,durationMs:900,sizeScale:1,rotationDeg:0})}if(Qe(e,d.team,["ballista","sentry","slinger"])&&D.range>1&&Math.random()<.2){const[b,T]=Object.entries(e.board).find(([U,K])=>K===j.id)[0].split(",").map(Number),C=[[b+1,T],[b-1,T],[b,T+1],[b,T-1]];let S=null;for(const[U,K]of C){const q=e.board[`${U},${K}`];if(!q)continue;const dt=e.units[q];if(dt&&dt.team!==d.team){S={id:q,r:U,c:K};break}}const M=(S==null?void 0:S.r)??b,F=(S==null?void 0:S.c)??T;e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:M,c:F},color:"#f59e0b",color2:"#fbbf24",shape:"bomb",startedAt:t,durationMs:260,trail:!0,sizeScale:1.1,glow:.9,power:"synergy"});const L=[[M,F],[M+1,F],[M-1,F],[M,F+1],[M,F-1]];for(const[U,K]of L){const q=e.board[`${U},${K}`];if(!q)continue;const dt=e.units[q];if(dt&&dt.team!==d.team){const kr=Math.floor(R*.25);ue(dt,kr)}}e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:M,c:F},color:"#fbbf24",shape:"impact",startedAt:t,durationMs:280,glow:1,sizeScale:1.3,power:"synergy"})}if(Qe(e,d.team,["hunter","archer","beastmaster"])&&D.range>1&&Math.random()<.25){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number),C=Math.floor(R*.2);for(let S=0;S<2;S++)e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:b,c:T},color:"#22c55e",color2:"#10b981",shape:"chakram",startedAt:t,durationMs:200+S*30,trail:!0,sizeScale:.9,glow:.8,power:"synergy"});ue(j,C*2),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+C*2)}if(J(e,d.team,["frost","marksman"])&&!!((u=j.status)!=null&&u.slowUntil&&j.status.slowUntil>t)){const T=Math.floor(R*.35),C=j.hp;ue(j,T);const[S,M]=Object.entries(e.board).find(([F,L])=>L===j.id)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:S,c:M},color:"#93c5fd",shape:"burst",startedAt:t,durationMs:320,tier:$,particles:18,glow:.9,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"decal",at:{r:S,c:M},color:"#e0f2fe",shape:"frostcrack",startedAt:t,durationMs:900,sizeScale:1.1,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:S,c:Math.max(0,M-1)},to:{r:S,c:M},color:"#bae6fd",color2:"#60a5fa",shape:"shard",startedAt:t,durationMs:160,tier:1,trail:!0,sizeScale:.7,glow:.25}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:S,c:Math.min(11,M+1)},to:{r:S,c:M},color:"#bae6fd",color2:"#60a5fa",shape:"shard",startedAt:t,durationMs:160,tier:1,trail:!0,sizeScale:.7,glow:.25}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+Math.max(0,C-j.hp))}if(d.templateKey==="paladin"&&J(e,d.team,["paladin","sorcerer"])&&d.specialLastAt===t){for(const[T,C]of Object.entries(e.board)){if(!C)continue;const S=e.units[C];if(!S||S.team===d.team)continue;const[M,F]=T.split(",").map(Number);if(Math.abs(M-p)+Math.abs(F-m)<=2){const U=Math.floor(10*(d.star||1));ue(S,U),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:M,c:F},color:"#fde68a",startedAt:t,durationMs:320,maxRadiusCells:1,rings:5,glow:.6,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:M,c:F},color:"#fbbf24",shape:"smite",startedAt:t,durationMs:260,glow:.8,sizeScale:1.2,power:"synergy"})}}e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:p,c:m},shape:"crest",color:"#fde68a",color2:"#fbbf24",startedAt:t,durationMs:260,sizeScale:1.1,glow:.4})}if((d.templateKey==="assassin"||d.templateKey==="rogue")&&J(e,d.team,["assassin","rogue"])){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number);Sc(e,b,T,j.team)===0&&(j.status=j.status??{},j.status.bleedUntil=t+2500,j.status.bleedDps=Math.max(j.status.bleedDps||0,12),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:b,c:T},color:"#ef4444",shape:"rip",startedAt:t,durationMs:320,glow:.8,sizeScale:1.25,power:"synergy"}))}if((d.templateKey==="hunter"||d.templateKey==="beastmaster")&&J(e,d.team,["hunter","beastmaster"])){const b=[];for(const[T,C]of Object.entries(e.board)){if(!C||C===j.id)continue;const S=e.units[C];if(!S||S.team===d.team||S.hp<=0)continue;const[M,F]=T.split(",").map(Number);Math.abs(M-p)+Math.abs(F-m)<=D.range&&b.push(C)}if(b.length>0){const T=b[Math.floor(Math.random()*b.length)],C=e.units[T];if(C){const[S,M]=Object.entries(e.board).find(([L,U])=>U===T)[0].split(",").map(Number),F=Math.floor(R*.4);ue(C,F),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:S,c:M},color:"#22c55e",color2:"#10b981",shape:"chakram",startedAt:t,durationMs:260,tier:$,trail:!0,sizeScale:.9,glow:.3}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:S,c:M},color:"#10b981",shape:"impact",startedAt:t,durationMs:200,glow:.35}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+F)}}}if((d.templateKey==="sniper"||d.templateKey==="marksman")&&J(e,d.team,["sniper","marksman"])&&D.range>1&&Math.random()<.18){const b=Math.floor(R*.8),[T,C]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number);ue(j,b),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:T,c:C},shape:"reticle",color:"#fde68a",color2:"#f59e0b",startedAt:t,durationMs:240,sizeScale:1,glow:.45}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:T,c:C},color:"#f59e0b",shape:"impact",startedAt:t,durationMs:200,glow:.6,sizeScale:1.15}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+b)}if((d.templateKey==="ballista"||d.templateKey==="sentry")&&J(e,d.team,["ballista","sentry"])&&D.range>1&&Math.random()<.2){const b=[];for(const[T,C]of Object.entries(e.board)){if(!C)continue;const S=e.units[C];if(!S||S.team===d.team||S.hp<=0)continue;const[M,F]=T.split(",").map(Number);Math.abs(M-p)+Math.abs(F-m)<=D.range&&b.push(C)}if(b.length>0){const T=b[Math.floor(Math.random()*b.length)],C=e.units[T],[S,M]=Object.entries(e.board).find(([L,U])=>U===T)[0].split(",").map(Number),F=Math.floor(R*.35);ue(C,F),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:S,c:M},color:"#60a5fa",color2:"#1d4ed8",shape:"chakram",startedAt:t,durationMs:240,tier:$,trail:!0,sizeScale:.85,glow:.3}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:S,c:M},color:"#1d4ed8",shape:"impact",startedAt:t,durationMs:180,glow:.4}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+F)}}if((d.templateKey==="icearcher"||d.templateKey==="frost")&&J(e,d.team,["icearcher","frost"])&&!!((x=j.status)!=null&&x.slowUntil&&j.status.slowUntil>t)&&Math.random()<.2){const[T,C]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number);j.status=j.status||{},j.status.stunnedUntil=Math.max(j.status.stunnedUntil||0,t+400),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:T,c:C},color:"#93c5fd",shape:"burst",startedAt:t,durationMs:200,glow:.7})}if((d.templateKey==="knight"||d.templateKey==="templar")&&J(e,d.team,["knight","templar"])&&D.range<=1){const[b,T]=Object.entries(e.board).find(([F,L])=>L===j.id)[0].split(",").map(Number),C=Math.sign(b-p),S=Math.sign(T-m),M=[[b+C,T+S],[b+C+(S!==0?0:1),T+S+(S!==0?1:0)],[b+C-(S!==0?0:1),T+S-(S!==0?1:0)]];for(const[F,L]of M){if(F<0||F>=be||L<0||L>=pe)continue;const U=e.board[`${F},${L}`];if(!U)continue;const K=e.units[U];if(!K||K.team===d.team)continue;const q=Math.floor(R*.25);ue(K,q),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:F,c:L},color:"#fcd34d",shape:"smite",startedAt:t,durationMs:280,glow:.9,power:"synergy"})}}if((d.templateKey==="valkyrie"||d.templateKey==="paladin")&&J(e,d.team,["valkyrie","paladin"])&&j.hp<=0){const[b,T]=Object.entries(e.board).find(([C,S])=>S===j.id)[0].split(",").map(Number);for(const[C,S]of Object.entries(e.board)){if(!S)continue;const M=e.units[S];if(!M||M.team===d.team||M.hp<=0)continue;const[F,L]=C.split(",").map(Number);if(Math.abs(F-b)+Math.abs(L-T)===1){const U=Math.floor(D.atk*(d.star||1)*.5);ue(M,U),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:F,c:L},color:"#fde68a",shape:"smite",startedAt:t,durationMs:220,glow:.55})}}}if((d.templateKey==="archer"||d.templateKey==="crossbow")&&J(e,d.team,["archer","crossbow"])&&D.range>1){const b=[];for(const[C,S]of Object.entries(e.board)){if(!S||S===j.id)continue;const M=e.units[S];if(!M||M.team===d.team||M.hp<=0)continue;const[F,L]=C.split(",").map(Number);Math.abs(F-p)+Math.abs(L-m)<=D.range&&b.push(S)}const T=b.slice(0,2);for(const C of T){const S=e.units[C];if(!S)continue;const[M,F]=Object.entries(e.board).find(([K,q])=>q===C)[0].split(",").map(Number),L=Math.floor(R*.3);ue(S,L);const U=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:M,c:F},color:U.accent,color2:U.primary,shape:"arrow",startedAt:t,durationMs:260,tier:$,trail:!0,sizeScale:.9,glow:.4,power:"synergy"}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:M,c:F},color:U.accent,shape:"impact",startedAt:t,durationMs:220,glow:.6,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+L)}}if((d.templateKey==="sorcerer"||d.templateKey==="stormcaller")&&J(e,d.team,["sorcerer","stormcaller"])){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number),C=[[b+1,T],[b-1,T],[b,T+1],[b,T-1]];for(const[S,M]of C){if(S<0||S>=be||M<0||M>=pe)continue;const F=e.board[`${S},${M}`];if(!F)continue;const L=e.units[F];if(!L||L.team===d.team||L.hp<=0)continue;const U=Math.floor(R*.35);ue(L,U),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:b,c:T},to:{r:S,c:M},color:"#a78bfa",color2:"#7c3aed",shape:"bolt",startedAt:t,durationMs:220,tier:$,trail:!0,sizeScale:1,glow:.6,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+U);break}}if((d.templateKey==="warrior"||d.templateKey==="berserker")&&J(e,d.team,["warrior","berserker"])&&D.range<=1){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number),C=Math.floor(R*.25);ue(j,C),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:b,c:T},color:"#ef4444",color2:"#f59e0b",shape:"shock",startedAt:t,durationMs:240,glow:.8,power:"synergy"}),e.shakeMs=Math.max(e.shakeMs||0,200),e.shakeKey=`sk-${Math.random().toString(36).slice(2,6)}`,d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+C)}if((d.templateKey==="assassin"||d.templateKey==="duelist")&&J(e,d.team,["assassin","duelist"])){const b=te[j.templateKey].stats.hp*(j.star||1);if(j.hp<=Math.floor(b*.5)){j.status=j.status||{},j.status.slowUntil=Math.max(j.status.slowUntil||0,t+600),j.status.slowFactor=Math.min(j.status.slowFactor||1,.7);const[T,C]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:T,c:C},color:"#fca5a5",shape:"impact",startedAt:t,durationMs:200,glow:.7,power:"synergy"})}}if((d.templateKey==="pikeman"||d.templateKey==="javelin")&&J(e,d.team,["pikeman","javelin"])){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number),C=Math.floor(R*.25);ue(j,C),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:b,c:T},color:"#67e8f9",color2:"#0ea5e9",shape:"spear",startedAt:t,durationMs:220,tier:$,trail:!0,sizeScale:.9,glow:.6,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+C)}if((d.templateKey==="mage"||d.templateKey==="frost")&&J(e,d.team,["mage","frost"])&&!!((f=j.status)!=null&&f.slowUntil&&j.status.slowUntil>t)){const[T,C]=Object.entries(e.board).find(([M,F])=>F===j.id)[0].split(",").map(Number),S=Math.floor(R*.2);ue(j,S),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:T,c:C},color:"#93c5fd",startedAt:t,durationMs:260,maxRadiusCells:.8,rings:3,glow:.6,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+S)}if((d.templateKey==="warlock"||d.templateKey==="witch")&&J(e,d.team,["warlock","witch"])){j.status=j.status||{},j.status.slowUntil=Math.max(j.status.slowUntil||0,t+500),j.status.slowFactor=Math.min(j.status.slowFactor||1,.8);const[b,T]=Object.entries(e.board).find(([C,S])=>S===j.id)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:b,c:T},shape:"rune",color:"#a78bfa",color2:"#7c3aed",startedAt:t,durationMs:240,sizeScale:1,glow:.6,power:"synergy"})}if((d.templateKey==="sniper"||d.templateKey==="crossbow")&&J(e,d.team,["sniper","crossbow"])&&D.range>1){const[b,T]=Object.entries(e.board).find(([L,U])=>U===j.id)[0].split(",").map(Number),C=Math.sign(b-p),S=Math.sign(T-m),M=b+C,F=T+S;if(M>=0&&M<be&&F>=0&&F<pe){const L=e.board[`${M},${F}`];if(L){const U=e.units[L];if(U&&U.team!==d.team){const K=Math.floor(R*.35);ue(U,K),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:b,c:T},to:{r:M,c:F},color:"#facc15",color2:"#f59e0b",shape:"bullet",startedAt:t,durationMs:180,tier:$,trail:!0,sizeScale:.8,glow:.6,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+K)}}}}if(d.templateKey==="beastmaster"&&J(e,d.team,["druid","beastmaster"])){const[b,T]=Object.entries(e.board).find(([S,M])=>M===d.id)[0].split(",").map(Number),C=[[b+1,T],[b-1,T],[b,T+1],[b,T-1]];for(const[S,M]of C){if(S<0||S>=be||M<0||M>=pe)continue;const F=e.board[`${S},${M}`];if(!F)continue;const L=e.units[F];if(!L||L.team!==d.team)continue;const U=te[L.templateKey].stats.hp*(L.star||1),K=Math.floor(6*(d.star||1)),q=L.hp;L.hp=Math.min(U,L.hp+K),L.hp>q&&e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"text",at:{r:S,c:M},value:`+${L.hp-q}`,color:"#22c55e",startedAt:t,durationMs:600,sizeScale:.9,power:"synergy"});break}}if((d.templateKey==="spear"||d.templateKey==="phalanx"||d.templateKey==="pikeman"||d.templateKey==="javelin")&&J(e,d.team,["spear","phalanx"])){const b=Math.sign(Object.entries(e.board).find(([K,q])=>q===j.id)[0].split(",").map(Number)[0]-p),T=Math.sign(Object.entries(e.board).find(([K,q])=>q===j.id)[0].split(",").map(Number)[1]-m),[C,S]=Object.entries(e.board).find(([K,q])=>q===j.id)[0].split(",").map(Number),M=C+b,F=S+T,L=`${M},${F}`,U=e.board[L];if(U&&e.units[U]&&e.units[U].team!==d.team){const K=e.units[U],q=Math.floor(R*.3);ue(K,q),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:M,c:F},color:"#67e8f9",shape:"thrust",startedAt:t,durationMs:200,glow:.35}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+q)}}if((d.templateKey==="mage"||d.templateKey==="warlock")&&J(e,d.team,["mage","warlock"])){const[b,T]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number),C=Math.floor(R*.2);for(const[S,M]of Object.entries(e.board)){if(!M||M===j.id)continue;const F=e.units[M];if(!F||F.team===d.team||F.hp<=0)continue;const[L,U]=S.split(",").map(Number);Math.abs(L-b)+Math.abs(U-T)===1&&(ue(F,C),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:L,c:U},color:"#a78bfa",shape:"burst",startedAt:t,durationMs:220,glow:.5}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:L,c:U},shape:"rune",color:"#c4b5fd",color2:"#7c3aed",startedAt:t,durationMs:220,sizeScale:.9,glow:.35}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+C))}}if((Q==null?void 0:Q.type)==="cleave"){const b=Math.floor(R*Q.ratio);for(const[T,C]of Object.entries(e.board)){if(!C||C===j.id)continue;const[S,M]=T.split(",").map(Number);if(Math.abs(S-P)+Math.abs(M-E)===1){const F=e.units[C];F&&F.team!==d.team&&(F.hp-=b,d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+b),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:S,c:M},color:"#f96",shape:"slash",startedAt:t,durationMs:200,tier:$,sizeScale:1+($-1)*.15,glow:Math.max(.4,$>=3?.5:.4),particles:8+($-1)*4}))}}}if((d.templateKey==="gladiator"||d.templateKey==="valkyrie")&&J(e,d.team,["gladiator","valkyrie"])&&D.range<=1){const[b,T]=Object.entries(e.board).find(([C,S])=>S===j.id)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:b,c:T},color:"#fde68a",shape:"smite",startedAt:t,durationMs:220,glow:.6,power:"synergy"})}if((d.templateKey==="rogue"||d.templateKey==="mystic")&&J(e,d.team,["rogue","mystic"])){const b=te[j.templateKey].stats.hp*(j.star||1);if(j.hp<=Math.floor(b*.35)&&Math.random()<.15){j.status=j.status||{},j.status.stunnedUntil=Math.max(j.status.stunnedUntil||0,t+450);const[T,C]=Object.entries(e.board).find(([S,M])=>M===j.id)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"special",at:{r:T,c:C},shape:"rune",color:"#fca5a5",color2:"#a78bfa",startedAt:t,durationMs:220,sizeScale:.9,glow:.5,power:"synergy"})}}if((d.templateKey==="guardian"||d.templateKey==="champion")&&J(e,d.team,["guardian","champion"])&&D.range<=1){const b=[[p+1,m],[p-1,m],[p,m+1],[p,m-1]];for(const[T,C]of b){if(T<0||T>=be||C<0||C>=pe)continue;const S=e.board[`${T},${C}`];if(!S)continue;const M=e.units[S];!M||M.team!==d.team||(M.shieldHp=(M.shieldHp||0)+10*(d.star||1),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:T,c:C},color:"#93c5fd",startedAt:t,durationMs:200,maxRadiusCells:.5,rings:2,glow:.4,power:"synergy"}))}}if((d.templateKey==="sentry"||d.templateKey==="marksman")&&J(e,d.team,["sentry","marksman"])&&D.range>1&&Math.random()<.18){const[b,T]=Object.entries(e.board).find(([M,F])=>F===j.id)[0].split(",").map(Number),C=Math.floor(R*.35);ue(j,C);const S=we(d.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:b,c:T},color:S.accent,color2:S.primary,shape:"chakram",startedAt:t,durationMs:200,tier:$,trail:!0,sizeScale:.8,glow:.6,power:"synergy"}),d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+C)}if((d.templateKey==="guardian"||d.templateKey==="valkyrie")&&J(e,d.team,["guardian","valkyrie"])){const b=d.templateKey==="valkyrie",T=Object.entries(e.board).find(([C,S])=>{if(!S)return!1;const M=e.units[S];return M&&M.team===d.team&&M.templateKey===(b?"guardian":"valkyrie")});if(T){const[C,S]=T[0].split(",").map(Number);S===m&&Math.abs(C-p)===1&&b&&(d.shieldHp=(d.shieldHp||0)+12*(d.star||1),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:p,c:m},color:"#93c5fd",startedAt:t,durationMs:200,maxRadiusCells:.5,rings:2,glow:.4,power:"synergy"}))}}if((d.templateKey==="monk"||d.templateKey==="paladin")&&J(e,d.team,["monk","paladin"])&&d.templateKey==="monk"){const b=te[d.templateKey].stats.hp*(d.star||1);d.hp=Math.min(b,d.hp+3),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"text",at:{r:p,c:m},value:"+3",color:"#22c55e",startedAt:t,durationMs:500,sizeScale:.8,power:"synergy"})}if((Q==null?void 0:Q.type)==="pierce"){const b=Math.sign(P-p),T=Math.sign(E-m);let C=P+b,S=E+T,M=null;for(let F=1;F<=D.range;F++){const L=`${C},${S}`,U=e.board[L];if(U&&e.units[U]&&e.units[U].team!==d.team){M=U;break}if(C+=b,S+=T,C<0||C>=be||S<0||S>=pe)break}if(M){const F=e.units[M],L=Math.floor(R*Q.ratio);if(F.hp-=L,d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+L),D.range>1){const[U,K]=Object.entries(e.board).find(([q,dt])=>dt===M)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:P,c:E},to:{r:U,c:K},color:"#a3e4d7",color2:"#d6fff4",shape:"shard",startedAt:t,durationMs:Math.floor(220*($===3?.8:$===2?.9:1)),tier:$,trail:$>=2,sizeScale:1+($-1)*.15,glow:$>=3?.5:0}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:U,c:K},color:"#0ea5e9",shape:"impact",startedAt:t,durationMs:220,tier:$,sizeScale:1.1,glow:.4})}else e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:C,c:S},color:"#0ea5e9",shape:"burst",startedAt:t,durationMs:240,glow:.4})}}if((Q==null?void 0:Q.type)==="multishot"){const b=Q.extraTargets,T=Q.ratio,C=[];for(const[S,M]of Object.entries(e.board)){if(!M||M===j.id)continue;const[F,L]=S.split(",").map(Number);Math.abs(F-p)+Math.abs(L-m)<=D.range&&C.push(M)}C.slice(0,b).forEach(S=>{const M=e.units[S];if(!M||M.team===d.team)return;const[F,L]=Object.entries(e.board).find(([K,q])=>q===S)[0].split(",").map(Number);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"projectile",from:{r:p,c:m},to:{r:F,c:L},color:"#0ea5e9",color2:"#fff",shape:"arrow",startedAt:t,durationMs:Math.floor(300*($===3?.8:$===2?.9:1)),tier:$,trail:!0,sizeScale:1+($-1)*.15,glow:$>=2?.35:0}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"hit",at:{r:F,c:L},color:"#0ea5e9",shape:"impact",startedAt:t,durationMs:220,tier:$,sizeScale:1.05,glow:.35});const U=Math.floor(R*T);M.hp-=U,d.team==="player"&&(e.damageThisRound=e.damageThisRound||{},e.damageThisRound[d.id]=(e.damageThisRound[d.id]||0)+U)})}if(j.hp<=0){for(const[T,C]of Object.entries(e.board))C===j.id&&(e.board[T]=void 0);e.log.push(`${j.templateKey} dies`);const b=we(j.templateKey);e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"decal",at:{r:P,c:E},color:b.primary,shape:"slashmark",startedAt:t,durationMs:900,sizeScale:1.1,rotationDeg:Math.floor(Math.random()*60-30)}),e.effects.push({id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"ring",at:{r:P,c:E},color:"#111827",startedAt:t,durationMs:500,maxRadiusCells:1,tier:1,rings:2,glow:.1})}continue}const ce=(v=d.status)!=null&&v.slowUntil&&d.status.slowUntil>t?d.status.slowFactor??1:1;(d.items||[]).includes("swift_gloves")&&(re=Math.floor(re*.95));const I=Math.floor(re/ce);if(_>D.range&&t-d.lastMoveAt>=I){d.lastMoveAt=t;const[j,P]=Object.entries(e.board).find(([Z,X])=>X===A)[0].split(",").map(Number),R=[{nr:p+1,nc:m},{nr:p-1,nc:m},{nr:p,nc:m+1},{nr:p,nc:m-1}].filter(({nr:Z,nc:X})=>Z>=0&&Z<be&&X>=0&&X<pe).filter(({nr:Z,nc:X})=>!e.board[`${Z},${X}`]).map(({nr:Z,nc:X})=>({nr:Z,nc:X,dist:Math.abs(j-Z)+Math.abs(P-X)}));if(R.length>0){R.sort((U,K)=>U.dist-K.dist||Math.random()-.5);const Z=R[0],X=p,z=m,H=`${X},${z}`,ee=`${Z.nr},${Z.nc}`,Pe=te[d.templateKey],b=we(d.templateKey),T=Pe.stats.range<=1?1:Pe.stats.range===2?.9:.8;let C="dust",S=d.team==="player"?"#94a3b8":"#9ca3af",M;switch(d.templateKey){case"frost":case"icearcher":C="ice",S="#93c5fd",M="#e0f2fe";break;case"druid":C="leaves",S="#86efac",M="#bbf7d0";break;case"berserker":C="sparks",S="#f59e0b",M="#ef4444";break;case"warlock":case"sorcerer":case"mage":case"mystic":case"witch":C="motes",S="#a78bfa",M="#e9d5ff";break;case"gladiator":case"champion":case"guardian":case"warrior":C="sand",S="#e9d5b1",M="#f1e3c2";break;case"pikeman":case"spear":case"phalanx":case"javelin":C="skid",S="#67e8f9",M="#0ea5e9";break;case"valkyrie":C="feather",S="#fde68a",M="#fbcfe8";break;case"ballista":C="track",S="#9ca3af",M="#6b7280";break;case"paladin":case"cleric":case"monk":C="motes",S="#22c55e",M="#a7f3d0";break;case"rogue":case"assassin":C="shadow",S="#0f172a",M="#1f2937";break;default:S=b.secondary,M=b.accent}const F=d.star||1,L={id:`fx-${Math.random().toString(36).slice(2,8)}`,type:"foot",at:{r:X,c:z},color:S,color2:M,variant:C,startedAt:t,durationMs:700,sizeScale:T*(1+(F-1)*.18),dir:{dr:Z.nr-X,dc:Z.nc-z},glow:0,tier:F};e.effects.push({...L,id:`fx-${Math.random().toString(36).slice(2,8)}`,dist:.18,side:1}),e.effects.push({...L,id:`fx-${Math.random().toString(36).slice(2,8)}`,dist:.42,side:-1}),e.effects.push({...L,id:`fx-${Math.random().toString(36).slice(2,8)}`,dist:.68,side:1}),e.board[H]=void 0,e.board[ee]=d.id,p=Z.nr,m=Z.nc}}}}function $0(e){const t=new Set(Object.values(e.board).filter(Boolean)),r=Array.from(t).some(a=>{const i=e.units[a];return i&&i.team==="player"&&i.hp>0}),n=Array.from(t).some(a=>{const i=e.units[a];return i&&i.team==="enemy"&&i.hp>0});if(r&&n)return null;if(r&&!n)return e.roundResult={wasWin:!0,hpLoss:0},e.log.push("You win!"),{result:"win",message:"Victory! Click Next Round."};if(!r&&n){const i=Array.from(t).map(c=>e.units[c]).filter(c=>c&&c.team==="enemy"&&c.hp>0).reduce((c,l)=>c+(l.star||1),2),s=e.health;return e.health=Math.max(0,s-i),e.recentHpAnim={from:s,to:e.health,startedAt:performance.now(),durationMs:900},e.roundResult={wasWin:!1,hpLoss:i},e.log.push(`You lose the round, taking ${i} damage.`),{result:"loss",message:"Defeat. Click Next Round."}}return e.roundResult={wasWin:!1,hpLoss:0},{result:"loss",message:"Draw. Click Next Round."}}function ni(e,t,r){const n=Object.values(e.units).filter(i=>i.team===r&&i.templateKey===t),a=new Map;for(const i of n){const s=a.get(i.star)??[];s.push(i),a.set(i.star,s)}for(const i of[1,2]){const s=a.get(i);if(!s||s.length<3)continue;const c=s.slice(0,3),l=c[0],u=jn(e.board,l.id);for(const y of c){delete e.units[y.id],e.bench=e.bench.filter(d=>d!==y.id);const g=jn(e.board,y.id);g&&(e.board[g]=void 0)}const x=ei(t,r);x.star=i+1;const f=te[t].stats,v=x.star;if(x.hp=f.hp*v,e.units[x.id]=x,u)e.board[u]=x.id;else if(r==="player")e.bench.push(x.id);else{let y=!1;for(let g=0;g<Math.min(3,be);g++){for(let d=0;d<pe;d++){const w=`${g},${d}`;if(!e.board[w]){e.board[w]=x.id,y=!0;break}}if(y)break}y||delete e.units[x.id]}e.log.push(`${t} combined to ${x.star}-star!`),ni(e,t,r);break}}function ns(e,t){const r={};for(const[a,i]of Object.entries(e.board)){if(!i)continue;const s=e.units[i];if(!s||s.team!==t)continue;const c=zt(s.templateKey);for(const l of c)r[l]=(r[l]??0)+1}const n={};for(const[a,i]of Object.entries(r)){let s=0;i>=6?s=3:i>=4?s=2:i>=2?s=1:s=0,n[a]=s}return n}function bc(e,t){const r=ns(e,t),n=[0,14,26,40][r.Vanguard||0];if(n>0)for(const a of Object.values(e.board)){if(!a)continue;const i=e.units[a];!i||i.team!==t||(i.shieldHp=Math.max(i.shieldHp||0,n*(i.star||1)))}}function J(e,t,r){const n=new Set(Object.values(e.units).filter(a=>a.team===t).map(a=>a.templateKey));return n.has(r[0])&&n.has(r[1])}function Qe(e,t,r){const n=new Set(Object.values(e.units).filter(a=>a.team===t).map(a=>a.templateKey));for(const a of r)if(!n.has(a))return!1;return!0}function ue(e,t){let r=t;if(e.damageReductionPct&&e.damageReductionPct>0&&(r=r*(1-Math.max(0,Math.min(.9,e.damageReductionPct)))),e.shieldHp&&e.shieldHp>0){const n=Math.min(e.shieldHp,r);e.shieldHp-=n,r-=n}r>0&&(e.hp-=Math.floor(r))}function jc(e,t,r){if(Math.random()>=r)return;const n=Object.values(e.units).filter(c=>c.team===t);if(n.length===0)return;const a=["berserker_axe","swift_gloves","vampiric_fang","frost_rune","shield_amulet","barbed_blade"],i=a[Math.floor(Math.random()*a.length)],s=n[Math.floor(Math.random()*n.length)];if(s.items=s.items||[],!(s.items.length>=2)&&(s.items.push(i),t==="player"&&e.log.push(`Found item: ${i.replace(/_/g," ")}, equipped to ${s.templateKey}.`),i==="shield_amulet")){const c=24*(s.star||1);s.shieldHp=(s.shieldHp||0)+c}}function C0(e){if(e.round%10===0){for(const t of Object.values(e.units))t.team==="enemy"&&(te[t.templateKey].stats,t.hp=Math.floor(t.hp*1.25));e.log.push("Boss modifiers active: enemy strength increased.")}else if(e.round%5===0){for(const t of Object.values(e.units))t.team==="enemy"&&(t.shieldHp=(t.shieldHp||0)+26*(t.star||1));e.log.push("Elite modifiers active: enemy shields fortified.")}}function E0(e){for(const t of Object.values(e.units))t.coverAtkBonus=0,t.damageReductionPct=0;for(let t=0;t<pe;t++){for(let r=be-1;r>=Math.floor(be/2);r--){const n=e.board[`${r},${t}`],a=e.board[`${r-1},${t}`];if(!n||!a)continue;const i=e.units[n],s=e.units[a];if(!(!i||!s)&&i.team==="player"&&s.team==="player"){const c=te[i.templateKey].stats,l=te[s.templateKey].stats;c.range<=1&&l.range>=3&&(s.coverAtkBonus=(s.coverAtkBonus||0)+3,s.damageReductionPct=Math.min(.2,(s.damageReductionPct||0)+.12))}}for(let r=0;r<Math.floor(be/2)-1;r++){const n=e.board[`${r},${t}`],a=e.board[`${r+1},${t}`];if(!n||!a)continue;const i=e.units[n],s=e.units[a];if(!(!i||!s)&&i.team==="enemy"&&s.team==="enemy"){const c=te[i.templateKey].stats,l=te[s.templateKey].stats;c.range<=1&&l.range>=3&&(s.coverAtkBonus=(s.coverAtkBonus||0)+3,s.damageReductionPct=Math.min(.2,(s.damageReductionPct||0)+.12))}}}}function T0(e,t,r,n,a,i){if(t!==n&&r!==a)return!1;if(t===n){const s=r<a?1:-1;for(let c=r+s;c!==a;c+=s){const l=e.board[`${t},${c}`];if(!l)continue;const u=e.units[l];if(u&&u.hp>0)return!0}}else{const s=t<n?1:-1;for(let c=t+s;c!==n;c+=s){const l=e.board[`${c},${r}`];if(!l)continue;const u=e.units[l];if(u&&u.hp>0)return!0}}return!1}function Sc(e,t,r,n){let a=0;const i=[[t+1,r],[t-1,r],[t,r+1],[t,r-1]];for(const[s,c]of i){if(s<0||s>=be||c<0||c>=pe)continue;const l=e.board[`${s},${c}`];if(!l)continue;const u=e.units[l];u&&u.team===n&&u.hp>0&&a++}return a}function _0(e){const{rows:t,cols:r,cellSize:n,gap:a=4}=e,i=N(f=>f.effects),s=N(f=>f.phase);N(f=>f.paused||!1);const[c,l]=ae.useState(0);ae.useEffect(()=>{if(s!=="combat"||i.length===0)return;let f=0;const v=()=>{N.getState().paused||l(performance.now()),f=requestAnimationFrame(v)};return f=requestAnimationFrame(v),()=>cancelAnimationFrame(f)},[s,i.length]),ae.useEffect(()=>{const f=requestAnimationFrame(()=>{N.setState(v=>{const y=performance.now(),g=v.effects.filter(d=>y-d.startedAt<d.durationMs+20);return g.length===v.effects.length?v:{...v,effects:g}})});return()=>cancelAnimationFrame(f)},[c]);const u=r*n+(r-1)*a,x=t*n+(t-1)*a;return o.jsx("svg",{width:u,height:x,style:{position:"absolute",inset:8,pointerEvents:"none"},children:i.map(f=>{if(f.type==="special"){const v=Math.min(1,(c-f.startedAt)/f.durationMs),y=f.at.c*(n+a)+n/2,g=f.at.r*(n+a)+n/2,d=f.power==="synergy",w=Math.max(6,n*.28)*(f.sizeScale??1)*(d?1.35:1),h=f.color,p=f.color2||h,m=f.shape||"rune",k=f.rotate?v*360:0,A=1-v,_=Math.max(2,n*.04)*(d?1.2:1);return m==="crest"?o.jsxs("g",{opacity:(d?1:.8)*A,transform:`rotate(${k.toFixed(1)}, ${y}, ${g})`,children:[o.jsx("path",{d:`M ${y} ${g-w*.8} Q ${y+w*.5} ${g-w*.4}, ${y+w*.36} ${g} Q ${y} ${g+w}, ${y-w*.36} ${g} Q ${y-w*.5} ${g-w*.4}, ${y} ${g-w*.8}`,fill:h,opacity:.15}),o.jsx("path",{d:`M ${y} ${g-w*.7} Q ${y+w*.4} ${g-w*.3}, ${y+w*.28} ${g} Q ${y} ${g+w*.8}, ${y-w*.28} ${g} Q ${y-w*.4} ${g-w*.3}, ${y} ${g-w*.7}`,stroke:h,strokeWidth:_,fill:"none"})]},f.id):m==="reticle"?o.jsxs("g",{opacity:.9*A,children:[o.jsx("circle",{cx:y,cy:g,r:w,stroke:h,strokeWidth:_,fill:"none"}),o.jsx("line",{x1:y-w,y1:g,x2:y-w*.4,y2:g,stroke:p,strokeWidth:_*.8}),o.jsx("line",{x1:y+w*.4,y1:g,x2:y+w,y2:g,stroke:p,strokeWidth:_*.8}),o.jsx("line",{x1:y,y1:g-w,x2:y,y2:g-w*.4,stroke:p,strokeWidth:_*.8}),o.jsx("line",{x1:y,y1:g+w*.4,x2:y,y2:g+w,stroke:p,strokeWidth:_*.8})]},f.id):m==="rune"?o.jsxs("g",{opacity:.85*A,transform:`rotate(${k.toFixed(1)}, ${y}, ${g})`,children:[o.jsx("circle",{cx:y,cy:g,r:w*.8,stroke:h,strokeWidth:_,fill:"none"}),o.jsx("polygon",{points:`${y},${g-w*.6} ${y+w*.2},${g-w*.2} ${y+w*.6},${g} ${y+w*.2},${g+w*.2} ${y},${g+w*.6} ${y-w*.2},${g+w*.2} ${y-w*.6},${g} ${y-w*.2},${g-w*.2}`,fill:p,opacity:.3})]},f.id):m==="leaf"?o.jsxs("g",{opacity:.85*A,children:[o.jsx("path",{d:`M ${y} ${g-w*.6} q ${w*.6} ${-w*.4} 0 ${-w} q ${-w*.6} ${w*.4} 0 ${w}`,fill:h,opacity:.18}),o.jsx("path",{d:`M ${y-w*.18} ${g-w*.2} q ${w*.28} ${-w*.18} 0 ${-w*.42}`,stroke:p,strokeWidth:_*.8,fill:"none"})]},f.id):m==="snow"?o.jsxs("g",{opacity:.9*A,transform:`rotate(${k.toFixed(1)}, ${y}, ${g})`,children:[o.jsx("circle",{cx:y,cy:g,r:w*.7,stroke:h,strokeWidth:_,fill:"none"}),o.jsx("line",{x1:y-w*.6,y1:g,x2:y+w*.6,y2:g,stroke:p,strokeWidth:_*.8}),o.jsx("line",{x1:y,y1:g-w*.6,x2:y,y2:g+w*.6,stroke:p,strokeWidth:_*.8}),o.jsx("line",{x1:y-w*.42,y1:g-w*.42,x2:y+w*.42,y2:g+w*.42,stroke:p,strokeWidth:_*.8}),o.jsx("line",{x1:y-w*.42,y1:g+w*.42,x2:y+w*.42,y2:g-w*.42,stroke:p,strokeWidth:_*.8})]},f.id):m==="lightning"?o.jsxs("g",{opacity:.9*A,children:[o.jsx("polyline",{points:`${y-w*.5},${g-w*.2} ${y-w*.1},${g-w*.5} ${y+w*.2},${g-w*.1} ${y+w*.5},${g-w*.4}`,fill:"none",stroke:h,strokeWidth:_*.8}),o.jsx("polyline",{points:`${y-w*.4},${g+w*.2} ${y-w*.1},${g-w*.1} ${y+w*.2},${g+w*.1} ${y+w*.4},${g-w*.2}`,fill:"none",stroke:p,strokeWidth:_*.6})]},f.id):null}if(f.type==="text"){const v=Math.min(1,(c-f.startedAt)/f.durationMs),y=f.at.c*(n+a)+n/2,g=f.at.r*(n+a)+n/2,d=-Math.sin(v*Math.PI)*Math.max(10,n*.4),w=1-v,h=(10*(f.sizeScale??1)+n*.08)*(f.power==="synergy"?1.2:1);return o.jsx("text",{x:y,y:g+d,fill:f.color,fontSize:h,fontWeight:900,textAnchor:"middle",opacity:w,style:{paintOrder:"stroke",stroke:"rgba(0,0,0,0.65)",strokeWidth:2},children:f.value},f.id)}if(f.type==="decal"){const v=Math.min(1,(c-f.startedAt)/f.durationMs),y=f.at.c*(n+a)+n/2,g=f.at.r*(n+a)+n/2,d=Math.max(6,n*.24)*(f.sizeScale??1)*(f.power==="synergy"?1.25:1),w=1-v,h=f.rotationDeg||0,p=f.shape||"slashmark";if(p==="slashmark")return o.jsx("g",{opacity:.5*w,transform:`rotate(${h}, ${y}, ${g})`,children:o.jsx("rect",{x:y-d*.6,y:g-2,width:d*1.2,height:4,fill:f.color,rx:2})},f.id);if(p==="scorch")return o.jsx("g",{opacity:.4*w,children:o.jsx("circle",{cx:y,cy:g,r:d*.6,fill:f.color})},f.id);if(p==="frostcrack")return o.jsx("g",{opacity:.4*w,children:o.jsx("circle",{cx:y,cy:g,r:d*.5,fill:f.color})},f.id)}if(f.type==="foot"){const v=Math.max(0,Math.min(1,(c-f.startedAt)/f.durationMs)),y=f.at.c*(n+a)+n/2,g=f.at.r*(n+a)+n/2,d=Math.max(3,n*.08)*(f.sizeScale??1),w=1-v,h=Math.max(0,Math.max(4,n*.14)*v),p=f.dir||{dr:0,dc:0},m=n+a,A=f.dist??.3;let _=y+(p.dc||0)*m*A,O=g+(p.dr||0)*m*A+n*.28;const $=f.side??(ce%2===0?1:-1),W=1-v,D=Math.hypot(p.dc||0,p.dr||0)||1,Q=-(p.dr||0)/D*$*Math.max(2,n*.08),G=(p.dc||0)/D*$*Math.max(2,n*.08);_+=Q,O+=G;const V=f.color||"#94a3b8",ie=f.color2||V,re=f.variant||"dust",ne=f.tier||1,ce=Math.abs((f.id||"").split("").reduce((Z,X)=>Z*31+X.charCodeAt(0)|0,0)),I=(Z,X,z)=>Z+z%997/997*(X-Z),j=I(-10,10,ce)*(1+(ne-1)*.15),P=I(-1,1,ce>>2)*(1+(ne-1)*.15),E=I(-.5,.5,ce>>4)*(1+(ne-1)*.15),R=(Z,X,z)=>Math.max(X,Math.min(z,Z));if(re==="ice")return o.jsxs("g",{opacity:.85*W,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)}) rotate(${j.toFixed(2)}, ${_}, ${O})`,children:[o.jsx("ellipse",{cx:_-h*.15,cy:O,rx:R(d*(1+v*.4),.1,9999),ry:R(d*.45*(1+v*.3),.1,9999),fill:ie,opacity:.5}),o.jsx("ellipse",{cx:_+h*.15,cy:O+2,rx:R(d*.7*(1+v*.4),.1,9999),ry:R(d*.35*(1+v*.3),.1,9999),fill:V})]},f.id);if(re==="leaves"){const Z=(X,z,H,ee,Pe)=>o.jsxs("g",{transform:`translate(${_+X+P}, ${O+z+E}) rotate(${H+H*.2})`,opacity:.75*w,children:[o.jsx("path",{d:`M 0 0 q ${6*ee} ${-4*ee} 0 ${-10*ee} q ${-6*ee} ${4*ee} 0 ${10*ee}`,fill:V}),o.jsx("path",{d:`M 0 ${-5*ee} q ${3*ee} ${-2*ee} 0 ${-5*ee}`,fill:ie,opacity:.6})]},Pe);return o.jsxs("g",{opacity:W,children:[Z(-h*.2,0,-20,.5+v*.3,"l1"),Z(h*.15,2,15,.4+v*.2,"l2")]},f.id)}return re==="sparks"?o.jsxs("g",{opacity:.9*W,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)})`,children:[o.jsx("circle",{cx:_-h*.15,cy:O,r:R(d*.3*(1+v*.3),.1,9999),fill:V}),o.jsx("circle",{cx:_+h*.12,cy:O+2,r:R(d*.22*(1+v*.3),.1,9999),fill:ie,opacity:.8})]},f.id):re==="motes"?o.jsxs("g",{opacity:.8*W,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)})`,children:[o.jsx("circle",{cx:_-h*.12,cy:O-6,r:R(d*.22,.1,9999),fill:ie,opacity:.7}),o.jsx("circle",{cx:_+h*.12,cy:O-10,r:R(d*.18,.1,9999),fill:V,opacity:.5})]},f.id):re==="shadow"?o.jsxs("g",{opacity:.7*W,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)}) rotate(${j.toFixed(2)}, ${_}, ${O})`,children:[o.jsx("ellipse",{cx:_-h*.2,cy:O,rx:R(d*(1+v*.5),.1,9999),ry:R(d*.5*(1+v*.3),.1,9999),fill:V}),o.jsx("ellipse",{cx:_+h*.25,cy:O+1,rx:R(d*.6*(1+v*.4),.1,9999),ry:R(d*.3*(1+v*.3),.1,9999),fill:ie,opacity:.6})]},f.id):re==="sand"?o.jsxs("g",{opacity:.75*W,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)})`,children:[o.jsx("ellipse",{cx:_-h*.22,cy:O,rx:R(d*(1+v*.6),.1,9999),ry:R(d*.4*(1+v*.3),.1,9999),fill:V}),o.jsx("ellipse",{cx:_+h*.18,cy:O+1,rx:R(d*.7*(1+v*.5),.1,9999),ry:R(d*.28*(1+v*.3),.1,9999),fill:ie,opacity:.6})]},f.id):re==="skid"?o.jsxs("g",{opacity:.85*W,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)}) rotate(${j.toFixed(2)}, ${_}, ${O})`,children:[o.jsx("rect",{x:_-h*.3,y:O-d*.16,width:Math.max(.1,h*.6+d*.8),height:Math.max(.1,d*.22),rx:Math.max(.1,d*.1),fill:V}),o.jsx("rect",{x:_-h*.15,y:O-d*.08,width:Math.max(.1,h*.3+d*.6),height:Math.max(.1,d*.14),rx:Math.max(.1,d*.07),fill:ie,opacity:.6})]},f.id):re==="feather"?o.jsxs("g",{opacity:.8*W,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)}) rotate(${j.toFixed(2)}, ${_}, ${O})`,children:[o.jsx("path",{d:`M ${_-h*.18} ${O} q -6 -6 -2 -12 q 8 2 12 6 q -6 2 -10 6`,fill:V}),o.jsx("path",{d:`M ${_+h*.12} ${O+2} q -6 -6 -2 -12 q 8 2 12 6 q -6 2 -10 6`,fill:ie,opacity:.7})]},f.id):re==="track"?o.jsxs("g",{opacity:.75*w,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)})`,children:[o.jsx("rect",{x:_-h*.22,y:O-2,width:Math.max(.1,h*.44+d*.6),height:3,fill:V}),o.jsx("rect",{x:_-h*.12,y:O+2,width:Math.max(.1,h*.24+d*.4),height:2,fill:ie})]},f.id):o.jsxs("g",{opacity:.8*w,transform:`translate(${P.toFixed(2)}, ${E.toFixed(2)}) rotate(${j.toFixed(2)}, ${_}, ${O})`,children:[o.jsx("ellipse",{cx:_-h*.2,cy:O,rx:R(d*(1+v*.6),.1,9999),ry:R(d*.5*(1+v*.4),.1,9999),fill:V}),o.jsx("ellipse",{cx:_+h*.2,cy:O+2,rx:R(d*.8*(1+v*.5),.1,9999),ry:R(d*.4*(1+v*.3),.1,9999),fill:V,opacity:.7})]},f.id)}if(f.type==="projectile"){const v=Math.min(1,(c-f.startedAt)/f.durationMs),y=P=>P<.5?2*P*P:-1+(4-2*P)*P,g=P=>1-Math.pow(1-P,2),d=f.shape==="bolt"||f.shape==="orb"?y(v):f.shape==="beam"?v:g(v),w=f.from.c*(n+a)+n/2,h=f.from.r*(n+a)+n/2,p=f.to.c*(n+a)+n/2,m=f.to.r*(n+a)+n/2,k=p-w,A=m-h,_=w+k*d,O=h+A*d,$=Math.hypot(k,A)||1,W=-A/$,D=k/$;let Q=0;(f.shape==="arrow"||f.shape==="spear")&&(Q=Math.sin(Math.PI*d)*Math.max(4,n*.12)),f.shape==="bolt"&&(Q=(Math.sin(16*Math.PI*d)+Math.sin(22*Math.PI*d+.6))*Math.max(2,n*.05));const G=_+W*Q,V=O+D*Q,ie=f.power==="synergy",re=(f.sizeScale??1)*(ie?1.25:1),ne=(f.glow??0)*(ie?1.5:1),ce=f.tier??1;let I=null;if(f.trail){const E=[];for(let R=1;R<=6;R++){const Z=Math.max(0,d-R*.04),X=w+k*Z,z=h+A*Z;E.push(o.jsx("circle",{cx:X,cy:z,r:Math.max(1,n*.03*re),fill:f.color,opacity:.08*(1-R/6)},`tr-${R}`))}I=o.jsx("g",{children:E})}if(f.shape==="arrow"){const P=Math.atan2(m-h,p-w),E=Math.max(10,n*.5)*re,R=Math.max(3,n*.1)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${G},${V}) rotate(${P*180/Math.PI})`,opacity:.95,children:[ne>0&&o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:-E*.5,y:-R/2,width:E*.7,height:R,fill:f.color,rx:R,opacity:ne*.35}),o.jsx("polygon",{points:`${E*.25},${-R} ${E*.5},0 ${E*.25},${R}`,fill:f.color,opacity:ne*.35})]}),o.jsx("rect",{x:-E*.5,y:-R/2,width:E*.7,height:R,fill:f.color,rx:R/2}),o.jsx("polygon",{points:`${E*.25},${-R} ${E*.5},0 ${E*.25},${R}`,fill:f.color}),f.trail&&o.jsx("line",{x1:-E,y1:0,x2:-E*.2,y2:0,stroke:f.color2||f.color,strokeWidth:R*.4,opacity:.3}),ce>=3&&o.jsxs("g",{opacity:.5,children:[o.jsx("polygon",{points:`${E*.1},${-R*1.3} ${E*.3},${-R*.8} ${E*.1},${-R*.3}`,fill:f.color2||"#fff"}),o.jsx("polygon",{points:`${-E*.2},${R*1.1} ${-E*.05},${R*.7} ${-E*.2},${R*.3}`,fill:f.color2||"#fff"})]})]})]},f.id)}if(f.shape==="bolt"){const P=Math.atan2(m-h,p-w),E=Math.max(12,n*.54)*re,R=Math.max(3,n*.1)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${G},${V}) rotate(${P*180/Math.PI})`,children:[o.jsx("rect",{x:-E*.5,y:-R/3,width:E,height:R/1.5,fill:f.color,rx:R}),o.jsx("rect",{x:-E*.3,y:-R/2.2,width:E*.6,height:R/3,fill:f.color2||"#fff",opacity:.6,rx:R})]})]},f.id)}if(f.shape==="chakram"){const P=Math.atan2(m-h,p-w),E=Math.max(6,n*.18)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${G},${V}) rotate(${P*180/Math.PI})`,opacity:.95,children:[o.jsx("circle",{cx:0,cy:0,r:E,stroke:f.color,strokeWidth:Math.max(2,E*.3),fill:"none"}),o.jsx("circle",{cx:0,cy:0,r:E*.6,stroke:f.color2||"#fff",strokeWidth:Math.max(1,E*.18),fill:"none",opacity:.6})]})]},f.id)}if(f.shape==="feather"){const P=Math.atan2(m-h,p-w),E=Math.max(5,n*.16)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${G},${V}) rotate(${P*180/Math.PI})`,opacity:.9,children:[o.jsx("path",{d:`M ${-E} 0 q ${E*.6} ${-E*.4} 0 ${-E} q ${-E*.6} ${E*.4} 0 ${E}`,fill:f.color}),o.jsx("path",{d:`M ${-E*.6} ${-E*.2} q ${E*.3} ${-E*.2} 0 ${-E*.5}`,fill:f.color2||"#fff",opacity:.7})]})]},f.id)}if(f.shape==="saber"){const P=Math.atan2(m-h,p-w),E=Math.max(16,n*.6)*re,R=Math.max(3,n*.08)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${G},${V}) rotate(${P*180/Math.PI})`,opacity:.95,children:[o.jsx("rect",{x:-E*.5,y:-R/2,width:E,height:R,fill:f.color,rx:R}),o.jsx("rect",{x:-E*.4,y:-R/3,width:E*.8,height:R/2,fill:f.color2||"#fff",opacity:.6,rx:R})]})]},f.id)}if(f.shape==="bomb"){const P=Math.atan2(m-h,p-w),E=Math.max(6,n*.14)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${G},${V}) rotate(${P*180/Math.PI})`,opacity:.95,children:[o.jsx("circle",{cx:0,cy:0,r:E,fill:f.color}),o.jsx("rect",{x:-E*.2,y:-E*.9,width:E*.4,height:E*.4,fill:f.color2||"#fff"})]})]},f.id)}if(f.shape==="shard"){const P=Math.max(3,n*.12)*re;return o.jsxs("g",{opacity:.95,children:[I,o.jsx("polygon",{points:`${G-P},${V} ${G},${V-P*1.6} ${G+P},${V}`,fill:f.color}),f.color2&&o.jsx("polygon",{points:`${G-P*.6},${V} ${G},${V-P} ${G+P*.6},${V}`,fill:f.color2,opacity:.7})]},f.id)}if(f.shape==="bullet"){const P=Math.max(3,n*.09)*re;return o.jsxs("g",{children:[I,o.jsx("circle",{cx:G,cy:V,r:P,fill:f.color,stroke:f.color2||"#fff",strokeWidth:1,opacity:.95})]},f.id)}if(f.shape==="spear"){const P=Math.atan2(m-h,p-w),E=Math.max(16,n*.7)*re,R=Math.max(3,n*.1)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${G},${V}) rotate(${P*180/Math.PI})`,opacity:.95,children:[o.jsx("rect",{x:-E*.6,y:-R/6,width:E*.9,height:R/3,fill:f.color,rx:R}),o.jsx("polygon",{points:`${E*.25},${-R*.7} ${E*.55},0 ${E*.25},${R*.7}`,fill:f.color2||f.color})]})]},f.id)}if(f.shape==="beam"){const P=Math.atan2(m-h,p-w),E=Math.hypot(p-w,m-h),R=Math.max(4,n*.14)*re;return o.jsxs("g",{children:[I,o.jsxs("g",{transform:`translate(${w},${h}) rotate(${P*180/Math.PI})`,opacity:.8,children:[o.jsx("rect",{x:0,y:-R/2,width:E*d,height:R,fill:f.color,rx:R}),o.jsx("rect",{x:0,y:-R/4,width:E*d,height:R/2,fill:f.color2||"#fff",opacity:.8,rx:R})]})]},f.id)}const j=Math.max(3,n*.14)*re;return o.jsxs("g",{opacity:.95,children:[I,ne>0&&o.jsx("circle",{cx:G,cy:V,r:j*1.6,fill:f.color,opacity:ne*.25}),f.color2&&o.jsx("circle",{cx:G,cy:V,r:j*1.15,fill:f.color2,opacity:.6}),o.jsx("circle",{cx:G,cy:V,r:j,fill:f.color}),ce>=3&&o.jsx("circle",{cx:G,cy:V,r:j*.5,fill:"#fff",opacity:.35})]},f.id)}if(f.type==="hit"){const v=Math.min(1,(c-f.startedAt)/f.durationMs),y=f.at.c*(n+a)+n/2,g=f.at.r*(n+a)+n/2,d=f.sizeScale??1,w=f.power==="synergy",h=(f.glow??0)*(w?1.5:1);if(f.shape==="slash"){const k=Math.max(12,n*.6)*(1-v)*d*(w?1.25:1),A=4*d;return o.jsxs("g",{children:[h>0&&o.jsx("rect",{x:y-k/2,y:g-A,width:k,height:A*2,fill:f.color,opacity:h*.25*(1-v),rx:A}),o.jsx("rect",{x:y-k/2,y:g-A/2,width:k,height:A,fill:f.color,opacity:.7*(1-v),rx:A/2})]},f.id)}if(f.shape==="rip"){const k=Math.max(10,n*.5)*(1-v)*d*(w?1.3:1),A=3*d;return o.jsxs("g",{opacity:.9,children:[o.jsx("g",{transform:`rotate(-30, ${y}, ${g})`,children:o.jsx("rect",{x:y-k/2,y:g-A/2,width:k,height:A,fill:f.color,opacity:.8*(1-v),rx:A/2})}),o.jsx("g",{transform:`rotate(30, ${y}, ${g})`,children:o.jsx("rect",{x:y-k/2,y:g-A/2,width:k,height:A,fill:f.color2||f.color,opacity:.6*(1-v),rx:A/2})})]},f.id)}if(f.shape==="impact"){const k=((1-v)*(n*.28)+3)*d*(w?1.25:1);return o.jsxs("g",{children:[o.jsx("circle",{cx:y,cy:g,r:k,fill:f.color,opacity:.4*(1-v)}),o.jsx("circle",{cx:y,cy:g,r:k*.6,fill:f.color2||"#fff",opacity:.3*(1-v)})]},f.id)}if(f.shape==="thrust"){const k=Math.max(16,n*.7)*(1-v)*d*(w?1.25:1),A=Math.max(3,n*.08)*d;return o.jsx("g",{opacity:.95,children:o.jsx("polygon",{points:`${y-k/2},${g-A/2} ${y+k/2},${g} ${y-k/2},${g+A/2}`,fill:f.color,opacity:.8*(1-v)})},f.id)}if(f.shape==="smite"){const k=((1-v)*(n*.34)+4)*d*(w?1.3:1);return o.jsxs("g",{children:[o.jsx("polygon",{points:`${y-4},${g-k} ${y+4},${g-k} ${y+8},${g} ${y-8},${g}`,fill:f.color,opacity:.5*(1-v)}),o.jsx("circle",{cx:y,cy:g,r:k*.5,fill:f.color2||f.color,opacity:.35*(1-v)})]},f.id)}if(f.shape==="shock"){const k=((1-v)*(n*.36)+6)*d*(w?1.25:1);return o.jsxs("g",{opacity:.9*(1-v),children:[o.jsx("circle",{cx:y,cy:g,r:k,stroke:f.color,strokeWidth:Math.max(2,n*.04),fill:"none"}),o.jsx("circle",{cx:y,cy:g,r:k*.6,stroke:f.color2||f.color,strokeWidth:Math.max(1,n*.03),fill:"none",opacity:.6})]},f.id)}const p=Math.max(6,(f.particles??12)*(f.power==="synergy"?1.3:1)|0),m=((1-v)*(n*.3)+4)*(f.sizeScale??1)*(f.power==="synergy"?1.25:1);return o.jsxs("g",{children:[h>0&&o.jsx("circle",{cx:y,cy:g,r:m*1.6,fill:f.color,opacity:h*.2*(1-v)}),[...Array(p)].map((k,A)=>{const _=A/p*Math.PI*2,O=y+Math.cos(_)*m,$=g+Math.sin(_)*m;return o.jsx("line",{x1:y,y1:g,x2:O,y2:$,stroke:f.color,strokeWidth:1.2,opacity:.5*(1-v)},A)}),[...Array(Math.floor(p/2))].map((k,A)=>{const _=A/(p/2)*Math.PI*2,O=y+Math.cos(_)*m*.6,$=g+Math.sin(_)*m*.6;return o.jsx("circle",{cx:O,cy:$,r:Math.max(1.2,n*.04*(1-v)),fill:f.color2||f.color,opacity:.7*(1-v)},`c${A}`)})]},f.id)}if(f.type==="ring"){const v=Math.min(1,(c-f.startedAt)/f.durationMs),y=f.at.c*(n+a)+n/2,g=f.at.r*(n+a)+n/2,w=(f.maxRadiusCells??2)*(n+a)+n*.5,h=Math.max(2,w*v),p=f.power==="synergy",m=(f.glow??0)*(p?1.5:1),k=Math.max(3,(f.rings??3)+(p?2:0)),A=4,_=[...Array(k)].map((O,$)=>{const W=1-$/k;return o.jsx("circle",{cx:y,cy:g,r:h*W,stroke:f.color,strokeWidth:A*Math.max(.4,W),fill:"none",opacity:.8*(1-v)*Math.max(.3,W),strokeDasharray:`${Math.max(10,h*.4)} ${Math.max(14,h*.6)}`,strokeDashoffset:h*v*.6},$)});return o.jsxs("g",{transform:`rotate(${v*90}, ${y}, ${g})`,children:[m>0&&o.jsx("circle",{cx:y,cy:g,r:h*1.2,fill:f.color,opacity:m*.15*(1-v)}),_]},f.id)}return null})})}function R0(e){const{rows:t,cols:r,cellSize:n,gap:a=4}=e,i=N(v=>v.board),s=N(v=>v.units),c=N(v=>v.phase);N(v=>v.paused||!1);const[l,u]=ae.useState(0);ae.useEffect(()=>{if(c!=="combat")return;let v=0;const y=()=>{N.getState().paused||u(performance.now()),v=requestAnimationFrame(y)};return v=requestAnimationFrame(y),()=>cancelAnimationFrame(v)},[c]);const x=r*n+(r-1)*a,f=t*n+(t-1)*a;return o.jsx("svg",{width:x,height:f,style:{position:"absolute",inset:8,pointerEvents:"none"},children:Object.entries(i).map(([v,y])=>{var G;if(!y)return null;const[g,d]=v.split(",").map(Number),w=d*(n+a)+n/2,h=g*(n+a)+n/2,p=s[y];if(!p)return null;const m=we(p.templateKey),k=p.team==="player"?"#2ecc71":"#e74c3c",_=(((G=te[p.templateKey])==null?void 0:G.stats.hp)??100)*(p.star||1),O=Math.max(0,Math.min(1,p.hp/_)),$=Math.max(10,n*.35),W=A0(y)*Math.PI*2,D=Math.sin(l/700+W)*(n*.03),Q=(l/20+W*57)%360;return o.jsxs("g",{transform:`translate(0, ${D.toFixed(2)})`,children:[o.jsxs("defs",{children:[o.jsxs("radialGradient",{id:`g-${y}`,cx:"50%",cy:"40%",r:"60%",children:[o.jsx("stop",{offset:"0%",stopColor:m.accent,stopOpacity:"0.95"}),o.jsx("stop",{offset:"100%",stopColor:m.primary,stopOpacity:"0.9"})]}),o.jsxs("filter",{id:`glow-${y}`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[o.jsx("feGaussianBlur",{stdDeviation:"6",result:"coloredBlur"}),o.jsxs("feMerge",{children:[o.jsx("feMergeNode",{in:"coloredBlur"}),o.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),o.jsx("ellipse",{cx:w,cy:h+$*.82,rx:$*.78,ry:$*.26,fill:"rgba(0,0,0,0.25)"}),P0(p.templateKey,w,h,$,m,Q,k),o.jsx("rect",{x:w-n*.32,y:h-n*.58,width:n*.64,height:5,fill:"#1a233a",rx:3}),o.jsx("rect",{x:w-n*.32,y:h-n*.58,width:n*.64*O,height:5,fill:p.team==="player"?"#2ecc71":"#e74c3c",rx:3}),p.shieldHp&&p.shieldHp>0&&o.jsx("rect",{x:w-n*.32,y:h-n*.58,width:Math.min(n*.64,n*.64*(p.shieldHp/Math.max(1,_))),height:5,fill:"#60a5fa",opacity:.6,rx:3}),p.star&&p.star>=1&&o.jsxs("g",{children:[o.jsx("rect",{x:w-$*.5,y:h-$-14,width:$,height:14,rx:7,fill:"rgba(0,0,0,0.55)"}),Array.from({length:p.star}).map((V,ie)=>o.jsx("path",{d:F0(w-(p.star-1)*7+ie*14,h-$-7,4),fill:p.star>=3?"#ffd166":p.star===2?"#c3e88d":"#e0e0e0",opacity:.95},ie))]}),(()=>{var I,j,P;const V=[],re=l/700%1*Math.PI*2+W*2*Math.PI,ne=(E,R,Z)=>{const X=re+E*(Math.PI/2),z=$*.95,H=w+Math.cos(X)*z,ee=h+Math.sin(X)*z;V.push(o.jsx("g",{opacity:.95,children:Z(H,ee)},`st-${E}`))};let ce=0;return(((I=p.status)==null?void 0:I.stunnedUntil)||0)>l&&ne(ce++,"#fcd34d",(E,R)=>o.jsxs("g",{children:[o.jsx("path",{d:`M ${E-4} ${R-2} L ${E-1} ${R-2} L ${E-2} ${R+2} L ${E+2} ${R+2}`,stroke:"#fcd34d",strokeWidth:2,fill:"none"}),o.jsx("circle",{cx:E,cy:R,r:6,stroke:"#f59e0b",strokeWidth:1,fill:"none",opacity:.6})]})),(((j=p.status)==null?void 0:j.slowUntil)||0)>l&&ne(ce++,"#60a5fa",(E,R)=>o.jsxs("g",{children:[o.jsx("circle",{cx:E,cy:R,r:5,stroke:"#60a5fa",strokeWidth:2,fill:"none"}),o.jsx("line",{x1:E,y1:R-3,x2:E,y2:R+1,stroke:"#93c5fd",strokeWidth:1.5}),o.jsx("line",{x1:E,y1:R,x2:E+3,y2:R,stroke:"#93c5fd",strokeWidth:1.5})]})),(((P=p.status)==null?void 0:P.bleedUntil)||0)>l&&ne(ce++,"#ef4444",(E,R)=>o.jsx("path",{d:`M ${E} ${R-5} q 4 6 0 9 q -4 -3 0 -9`,fill:"#ef4444",stroke:"#b91c1c",strokeWidth:1})),(p.shieldHp||0)>0&&ne(ce++,"#60a5fa",(E,R)=>o.jsxs("g",{children:[o.jsx("path",{d:`M ${E} ${R-6} L ${E+6} ${R-2} L ${E+4} ${R+6} L ${E-4} ${R+6} L ${E-6} ${R-2} Z`,fill:"#60a5fa",opacity:.5}),o.jsx("path",{d:`M ${E} ${R-6} L ${E+6} ${R-2} L ${E+4} ${R+6} L ${E-4} ${R+6} L ${E-6} ${R-2} Z`,stroke:"#3b82f6",strokeWidth:1.5,fill:"none"})]})),V})()]},y)})})}function A0(e){let t=0;for(let r=0;r<e.length;r++)t=t*31+e.charCodeAt(r)|0;return(t>>>0)/2**32}function P0(e,t,r,n,a,i,s){const c=n*1.2,l=c*.44,u=c*.56,x=Math.max(6,n*.32),f=c*.34,v=c*.34,y=o.jsxs("g",{children:[o.jsx("path",{d:`M ${t} ${r-x*.2} C ${t-l} ${r+u*.05}, ${t-l} ${r+u*.9}, ${t} ${r+u*.95} C ${t+l} ${r+u*.9}, ${t+l} ${r+u*.05}, ${t} ${r-x*.2}`,fill:a.secondary,opacity:.18}),o.jsx("rect",{x:t-l/2,y:r-u*.15,width:l,height:u,rx:l*.2,fill:a.primary,stroke:s,strokeWidth:2,opacity:.95}),o.jsx("rect",{x:t-l/2,y:r+u*.12,width:l,height:u*.12,fill:a.secondary,opacity:.8}),o.jsx("circle",{cx:t,cy:r-u*.35,r:x,fill:a.secondary,stroke:s,strokeWidth:2}),o.jsx("rect",{x:t-l*.24,y:r+u*.45,width:l*.18,height:v,rx:4,fill:a.secondary,opacity:.9}),o.jsx("rect",{x:t+l*.06,y:r+u*.45,width:l*.18,height:v,rx:4,fill:a.secondary,opacity:.9}),o.jsx("rect",{x:t-l*.6,y:r-u*.05,width:f,height:l*.16,rx:6,fill:a.secondary,opacity:.9}),o.jsx("rect",{x:t+l*.05,y:r-u*.05,width:f,height:l*.16,rx:6,fill:a.secondary,opacity:.9}),o.jsx("rect",{x:t-l/2+3,y:r-u*.15+3,width:l-6,height:u-6,rx:l*.18,stroke:a.accent,strokeWidth:2,fill:"none",opacity:.6})]}),g=m=>m*Math.PI/180,d=Math.sin(g(i)*1.3)*(n*.06),w=Math.cos(g(i)*1.7)*(n*.04),h=(Math.sin(g(i*.8))+1)/2,p=Math.sin(g(i)*2.2)*(n*.08);switch(e){case"warrior":case"knight":case"guardian":case"paladin":case"champion":case"gladiator":case"shieldman":case"shieldbearer":case"templar":case"recruit":return o.jsxs("g",{children:[y,e==="knight"&&o.jsx("path",{d:`M ${t} ${r-x*.2} C ${t-l*.8} ${r+u*.1}, ${t-l*.6} ${r+u*.9}, ${t} ${r+u*1} C ${t+l*.6} ${r+u*.9}, ${t+l*.8} ${r+u*.1}, ${t} ${r-x*.2}`,fill:a.secondary,opacity:.12}),(e==="knight"||e==="champion"||e==="gladiator")&&o.jsx("path",{d:`M ${t-x*.6} ${r-u*.5} q ${x*.6} ${-x*.8} ${x*1.2} 0`,fill:a.accent,opacity:.7}),e==="knight"?o.jsxs("g",{children:[o.jsx("path",{d:`M ${t-l*.95} ${r-u*.28} L ${t-l*.55} ${r-u*.1} L ${t-l*.7} ${r+u*.7} L ${t-l*1.05} ${r+u*.2} Z`,fill:a.secondary,opacity:.22,stroke:s,strokeWidth:2}),o.jsx("path",{d:`M ${t-l*.95} ${r-u*.24} L ${t-l*.62} ${r+u*.1} L ${t-l*.78} ${r+u*.58}`,stroke:a.accent,strokeWidth:3})]}):e==="guardian"?o.jsxs("g",{children:[o.jsx("rect",{x:t-l*1,y:r-u*.3,width:l*.7,height:u*1.1,rx:8,fill:a.accent,opacity:.22,stroke:s,strokeWidth:2}),o.jsx("rect",{x:t-l*.98,y:r-u*.28,width:l*.66,height:u*1.06,rx:8,fill:"none",stroke:a.accent,strokeWidth:2,opacity:.35}),Array.from({length:4}).map((m,k)=>o.jsx("circle",{cx:t-l*.65,cy:r-u*.2+k*(u*.34),r:2,fill:s,opacity:.7},k)),o.jsx("path",{d:`M ${t-x*.6} ${r-u*.5} q ${x*.6} ${-x*.6} ${x*1.2} 0`,stroke:a.secondary,strokeWidth:3})]}):e==="shieldbearer"?o.jsx("rect",{x:t-l*1.05,y:r-u*.15,width:l*.8,height:u*.9,rx:6,fill:a.accent,opacity:.22,stroke:s,strokeWidth:2}):e==="shieldman"||e==="recruit"?o.jsxs("g",{children:[o.jsx("circle",{cx:t-l*.7,cy:r+u*.05,r:l*.28,fill:a.accent,opacity:.22,stroke:s,strokeWidth:2}),e==="recruit"&&o.jsxs(o.Fragment,{children:[o.jsx("line",{x1:t-l*.84,y1:r+u*.05,x2:t-l*.56,y2:r+u*.05,stroke:a.secondary,strokeWidth:2,opacity:.7}),o.jsx("line",{x1:t-l*.8,y1:r-u*.08,x2:t-l*.6,y2:r+u*.18,stroke:a.secondary,strokeWidth:2,opacity:.5})]}),e==="shieldman"&&o.jsx(o.Fragment,{children:Array.from({length:5}).map((m,k)=>o.jsx("circle",{cx:t-l*.7+Math.cos(k/5*Math.PI*2)*(l*.18),cy:r+u*.05+Math.sin(k/5*Math.PI*2)*(l*.18),r:2,fill:s,opacity:.8},k))})]}):e==="templar"||e==="paladin"?o.jsxs("g",{children:[o.jsx("path",{d:`M ${t-l*.9} ${r-u*.2} Q ${t-l*.3} ${r-u*.4}, ${t-l*.2} ${r} Q ${t-l*.4} ${r+u*.6}, ${t-l*.9} ${r} Q ${t-l*1} ${r-u*.4}, ${t-l*.9} ${r-u*.2}`,fill:a.accent,opacity:.22,stroke:s,strokeWidth:2}),o.jsx("rect",{x:t-l*.62,y:r-u*.02,width:l*.24,height:4,fill:a.accent}),o.jsx("rect",{x:t-l*.62+(l*.24-4)/2,y:r-u*.12,width:4,height:u*.24,fill:a.accent}),o.jsx("rect",{x:t-l*.72,y:r-u*.02,width:l*.44,height:2,fill:"#fff",opacity:.5}),o.jsx("rect",{x:t-l*.5,y:r-u*.16,width:2,height:u*.32,fill:"#fff",opacity:.5})]}):o.jsx("path",{d:`M ${t-l*.9} ${r-u*.2} Q ${t-l*.3} ${r-u*.4}, ${t-l*.2} ${r} Q ${t-l*.4} ${r+u*.6}, ${t-l*.9} ${r} Q ${t-l*1} ${r-u*.4}, ${t-l*.9} ${r-u*.2}`,fill:a.accent,opacity:.22,stroke:s,strokeWidth:2}),e==="guardian"?o.jsxs("g",{transform:`rotate(${(i*.03).toFixed(1)}, ${t+l*.82}, ${r-u*.1})`,children:[o.jsx("rect",{x:t+l*.82-2,y:r-u*.36,width:4,height:c*.5,fill:a.accent,rx:2}),o.jsx("circle",{cx:t+l*.82,cy:r+u*.22,r:6,fill:a.accent})]}):e==="knight"?o.jsxs("g",{transform:`rotate(${(i*.03).toFixed(1)}, ${t+l*.78}, ${r-u*.22})`,children:[o.jsx("rect",{x:t+l*.78-2,y:r-u*.62,width:4,height:c*.6,fill:a.accent,rx:2}),o.jsx("rect",{x:t+l*.78-.6,y:r-u*.6,width:1.2,height:c*.5,fill:"#fff",opacity:.4})]}):e==="gladiator"?o.jsxs("g",{children:[o.jsx("rect",{x:t+l*.58-2,y:r-c*.28,width:4,height:c*.42,fill:a.accent,rx:2}),o.jsxs("g",{opacity:.6,children:[o.jsx("line",{x1:t-l*.6,y1:r-u*.1,x2:t-l*.2,y2:r+u*.1,stroke:a.secondary,strokeWidth:1.2}),o.jsx("line",{x1:t-l*.6,y1:r+u*.1,x2:t-l*.2,y2:r-u*.1,stroke:a.secondary,strokeWidth:1.2}),o.jsx("line",{x1:t-l*.4,y1:r-u*.18,x2:t-l*.4,y2:r+u*.18,stroke:a.secondary,strokeWidth:1.2})]}),o.jsx("path",{d:`M ${t-x*.8} ${r-u*.52} q ${x*.8} ${-x*.5} ${x*1.6} 0`,stroke:a.accent,strokeWidth:3})]}):e==="duelist"?o.jsx("rect",{x:t+l*.7-1,y:r-c*.38,width:2,height:c*.6,fill:a.accent,rx:1}):e==="recruit"?o.jsxs("g",{children:[o.jsx("rect",{x:t+l*.74-1.5,y:r-u*.5,width:3,height:c*.42,fill:a.secondary,rx:1.5}),o.jsx("rect",{x:t+l*.74-3.5,y:r-u*.5,width:7,height:3,fill:a.accent})]}):e==="paladin"?o.jsxs("g",{children:[o.jsx("rect",{x:t+l*.78-2,y:r-u*.5,width:4,height:c*.6,fill:a.secondary,rx:1.5}),o.jsx("rect",{x:t+l*.78-8,y:r-u*.6,width:16,height:10,fill:a.accent,rx:2})]}):o.jsxs("g",{transform:`rotate(${(i*.05).toFixed(1)}, ${t+l*.8}, ${r-u*.25})`,children:[o.jsx("rect",{x:t+l*.8-2,y:r-u*.6,width:4,height:c*.58,fill:a.accent,rx:2}),o.jsx("polygon",{points:`${t+l*.8-6},${r-u*.6} ${t+l*.8+6},${r-u*.6} ${t+l*.8},${r-u*.82}`,fill:a.accent})]}),e==="paladin"&&o.jsxs("g",{children:[o.jsx("circle",{cx:t,cy:r-u*.58,r:x*.9,stroke:a.accent,strokeWidth:2,fill:"none",opacity:.6}),o.jsx("rect",{x:t-l*.12,y:r+u*.05,width:l*.24,height:u*.5,fill:a.secondary,opacity:.7}),o.jsx("rect",{x:t-2,y:r+u*.05,width:4,height:u*.5,fill:a.accent,opacity:.9})]}),e==="knight"&&o.jsx("rect",{x:t-x*.7,y:r-u*.38,width:x*1.4,height:x*.38,rx:6,fill:a.primary,stroke:s,strokeWidth:1.5}),e==="templar"&&o.jsxs("g",{opacity:.95,children:[o.jsx("rect",{x:t-x*.6,y:r-u*.44,width:x*1.2,height:x*.48,rx:4,fill:a.primary,stroke:s,strokeWidth:1.5}),o.jsx("rect",{x:t-2,y:r-u*.42,width:4,height:x*.42,fill:a.accent}),o.jsx("rect",{x:t-x*.44,y:r-u*.28,width:x*.88,height:3,fill:a.accent})]}),e==="champion"&&o.jsx("polygon",{points:`${t-16},${r-n} ${t-6},${r-n-10} ${t},${r-n} ${t+6},${r-n-10} ${t+16},${r-n}`,fill:a.accent,opacity:.9}),e==="champion"&&o.jsxs("g",{opacity:.85,children:[o.jsx("path",{d:`M ${t} ${r-x*.2} C ${t-l*.9} ${r+u*0}, ${t-l*.7} ${r+u*1}, ${t} ${r+u*1.1} C ${t+l*.7} ${r+u*1}, ${t+l*.9} ${r+u*0}, ${t} ${r-x*.2}`,fill:a.secondary,opacity:.14}),o.jsx("circle",{cx:t,cy:r-u*.06,r:l*.14,fill:a.secondary,stroke:a.accent,strokeWidth:2}),o.jsx("path",{d:`M ${t-6} ${r-u*.06} L ${t} ${r+u*.06} L ${t+6} ${r-u*.06}`,stroke:a.accent,strokeWidth:2,fill:"none"})]}),(e==="warrior"||e==="champion")&&o.jsxs("g",{opacity:.9,children:[o.jsx("circle",{cx:t-l*.26,cy:r-u*.02,r:l*.14,fill:a.secondary,stroke:a.accent,strokeWidth:2}),o.jsx("circle",{cx:t+l*.26,cy:r-u*.02,r:l*.14,fill:a.secondary,stroke:a.accent,strokeWidth:2}),o.jsx("path",{d:`M ${t-l*.22} ${r} L ${t} ${r+u*.22} L ${t+l*.22} ${r}`,stroke:a.accent,strokeWidth:3,fill:"none"})]}),e==="warrior"&&o.jsxs("g",{opacity:.9,children:[o.jsx("rect",{x:t-l*.36,y:r+u*.06,width:l*.72,height:6,fill:a.secondary,stroke:a.accent,strokeWidth:2}),o.jsx("circle",{cx:t-l*.28,cy:r-u*.02,r:l*.16,fill:a.secondary,stroke:a.accent,strokeWidth:2}),o.jsx("circle",{cx:t+l*.28,cy:r-u*.02,r:l*.16,fill:a.secondary,stroke:a.accent,strokeWidth:2})]})]});case"archer":case"hunter":case"sniper":case"crossbow":case"marksman":case"icearcher":case"sentry":case"beastmaster":return o.jsxs("g",{children:[y,e!=="crossbow"?o.jsxs(o.Fragment,{children:[o.jsx("path",{d:`M ${t-c*.42} ${r-c*.2} Q ${t-c*.56} ${r}, ${t-c*.42} ${r+c*.2}`,stroke:a.accent,strokeWidth:3,fill:"none"}),o.jsx("line",{x1:t-c*.42,y1:r-c*.2,x2:t-c*.42,y2:r+c*.2,stroke:a.accent,strokeWidth:1.5,opacity:.8}),o.jsx("line",{x1:t-c*.42,y1:r,x2:t+c*.18,y2:r,stroke:a.accent,strokeWidth:2}),o.jsx("polygon",{points:`${t+c*.18},${r-4} ${t+c*.18},${r+4} ${t+c*.28},${r}`,fill:a.accent}),o.jsx("rect",{x:t+l*.52,y:r-u*.24,width:6,height:14,fill:a.secondary,stroke:s,strokeWidth:1.5}),Array.from({length:3}).map((m,k)=>o.jsx("polygon",{points:`${t+l*.55},${r-u*(.3+k*.02)} ${t+l*.63},${r-u*(.28+k*.02)} ${t+l*.59},${r-u*(.2+k*.02)}`,fill:a.accent},k))]}):o.jsxs("g",{children:[o.jsx("rect",{x:t-c*.18,y:r-c*.08,width:c*.36,height:c*.16,fill:a.accent,opacity:.7,rx:3}),o.jsx("line",{x1:t-c*.28,y1:r-c*.18,x2:t-c*.02,y2:r,stroke:a.accent,strokeWidth:3}),o.jsx("line",{x1:t-c*.28,y1:r+c*.18,x2:t-c*.02,y2:r,stroke:a.accent,strokeWidth:3}),o.jsx("line",{x1:t+c*.02,y1:r,x2:t+c*.28,y2:r,stroke:a.accent,strokeWidth:3})]}),o.jsx("rect",{x:t-c*.58,y:r-c*.22,width:6,height:c*.44,fill:a.accent,opacity:.35}),e==="marksman"&&o.jsxs("g",{children:[o.jsx("circle",{cx:t+c*.28,cy:r-c*.28,r:6,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("rect",{x:t-l*.4,y:r+u*.05,width:l*.8,height:6,fill:a.secondary,opacity:.7}),o.jsx("path",{d:`M ${t-l*.34} ${r-u*.04} L ${t+l*.34} ${r+u*.32}`,stroke:a.accent,strokeWidth:3})]}),e==="icearcher"&&o.jsxs("g",{opacity:.9,children:[o.jsx("polygon",{points:`${t+c*.24},${r-6} ${t+c*.24},${r+6} ${t+c*.34},${r}`,fill:a.accent}),o.jsx("path",{d:`M ${t-c*.42} ${r-c*.2} Q ${t-c*.56} ${r}, ${t-c*.42} ${r+c*.2}`,stroke:"#e0f2fe",strokeWidth:5,opacity:.45}),o.jsx("ellipse",{cx:t+l*.42,cy:r-u*.36,rx:4+h*2,ry:2+h,fill:"#e0f2fe",opacity:.4}),o.jsxs("g",{transform:`rotate(${(i*.4).toFixed(1)}, ${t+c*.28}, ${r-c*.28})`,children:[o.jsx("circle",{cx:t+c*.28,cy:r-c*.28,r:5,stroke:"#93c5fd",strokeWidth:2,fill:"none"}),o.jsx("line",{x1:t+c*.28-5,y1:r-c*.28,x2:t+c*.28+5,y2:r-c*.28,stroke:"#93c5fd",strokeWidth:1.5}),o.jsx("line",{x1:t+c*.28,y1:r-c*.28-5,x2:t+c*.28,y2:r-c*.28+5,stroke:"#93c5fd",strokeWidth:1.5})]})]}),e==="sentry"&&o.jsxs("g",{children:[o.jsx("rect",{x:t-l*.9,y:r+u*.02,width:l*.5,height:u*.28,rx:4,fill:a.secondary,opacity:.6,stroke:s,strokeWidth:2}),Array.from({length:4}).map((m,k)=>o.jsx("circle",{cx:t-l*.65+(k-1.5)*(l*.12),cy:r+u*.14,r:2,fill:s,opacity:.8},k)),o.jsx("line",{x1:t-l*.65,y1:r-u*.1,x2:t-l*.65,y2:r+u*.02,stroke:a.accent,strokeWidth:2}),o.jsx("circle",{cx:t-l*.65,cy:r-u*.12,r:3,fill:a.accent})]}),e==="beastmaster"&&o.jsxs("g",{opacity:.85,children:[o.jsx("circle",{cx:t+l*.52,cy:r-u*.38,r:4,fill:a.accent}),o.jsx("circle",{cx:t+l*.46,cy:r-u*.48,r:3,fill:a.accent}),o.jsx("polygon",{points:`${t+l*.44},${r-u*.52} ${t+l*.5},${r-u*.62} ${t+l*.56},${r-u*.52}`,fill:a.secondary}),o.jsx("circle",{cx:t-l*.1,cy:r-u*.02,r:4,fill:a.secondary,stroke:s,strokeWidth:1.5}),o.jsx("circle",{cx:t-l*.1,cy:r-u*.04,r:1.4,fill:a.accent}),o.jsx("circle",{cx:t-l*.14,cy:r-u*0,r:1,fill:a.accent}),o.jsx("circle",{cx:t-l*.06,cy:r-u*0,r:1,fill:a.accent}),o.jsx("circle",{cx:t-l*.1,cy:r+u*.02,r:1,fill:a.accent})]}),e==="crossbow"&&o.jsxs("g",{opacity:.9,children:[o.jsx("rect",{x:t+c*.06,y:r-c*.08,width:7,height:c*.16,rx:2,fill:a.secondary,stroke:s,strokeWidth:1}),Array.from({length:3}).map((m,k)=>o.jsx("rect",{x:t+c*.07,y:r-c*(.06-k*.02),width:5,height:2,fill:a.accent,opacity:.8},k)),o.jsx("circle",{cx:t-c*.06,cy:r+c*.02,r:3,fill:a.secondary,stroke:s,strokeWidth:1}),o.jsx("line",{x1:t-c*.06,y1:r+c*.02,x2:t-c*.12,y2:r+c*.06,stroke:a.accent,strokeWidth:2}),o.jsx("rect",{x:t-c*.28,y:r+c*.02,width:c*.16,height:6,fill:a.secondary,stroke:s,strokeWidth:1})]}),e!=="crossbow"&&o.jsx("g",{transform:`translate(${w.toFixed(2)}, 0)`,children:o.jsx("line",{x1:t-c*.42,y1:r,x2:t+c*.18,y2:r,stroke:a.accent,strokeWidth:1,opacity:.4})}),e==="hunter"&&o.jsxs("g",{children:[o.jsx("path",{d:`M ${t+c*.15} ${r-c*.35} q -8 8 -14 0`,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("path",{d:`M ${t+c*.08} ${r-c*.34} q -6 6 -10 0`,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("path",{d:`M ${t} ${r-x*.2} C ${t-l} ${r+u*0}, ${t-l*.8} ${r+u*.9}, ${t} ${r+u*1}`,fill:a.secondary,opacity:.12}),Array.from({length:5}).map((m,k)=>o.jsx("path",{d:`M ${t-8+k*4} ${r-u*.2} q 2 3 0 5`,stroke:a.accent,strokeWidth:2},k))]}),e==="archer"&&o.jsx("g",{opacity:.9,children:o.jsx("rect",{x:t+l*.18,y:r-u*.08,width:8,height:6,fill:a.secondary,stroke:a.accent,strokeWidth:1.5})}),e==="sniper"&&o.jsxs("g",{opacity:.9,children:[o.jsx("circle",{cx:t+c*.28,cy:r-c*.28,r:6,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("line",{x1:t+c*.22,y1:r-c*.28,x2:t+c*.34,y2:r-c*.28,stroke:a.accent,strokeWidth:2}),o.jsx("line",{x1:t+c*.28,y1:r-c*.34,x2:t+c*.28,y2:r-c*.22,stroke:a.accent,strokeWidth:2}),o.jsx("circle",{cx:t+c*.16,cy:r-c*.06,r:3,fill:a.secondary,stroke:s,strokeWidth:1.5}),o.jsx("line",{x1:t+c*.2,y1:r+c*.02,x2:t+c*.36,y2:r+c*.04,stroke:a.secondary,strokeWidth:2})]})]});case"mage":case"sorcerer":case"warlock":case"mystic":case"witch":case"stormcaller":case"druid":case"cleric":case"monk":case"paladin":return o.jsxs("g",{children:[y,e==="sorcerer"&&o.jsxs("g",{children:[o.jsx("rect",{x:t+l*.6,y:r-c*.32,width:4,height:c*.74,fill:a.secondary}),o.jsx("circle",{cx:t+l*.62,cy:r-c*.32,r:6+h*2,fill:a.accent,opacity:.7}),o.jsx("circle",{cx:t+l*.62,cy:r-c*.32,r:3+h,fill:"#fff",opacity:.5})]}),e==="mage"&&o.jsxs("g",{opacity:.95,children:[o.jsx("circle",{cx:t+l*.66,cy:r-u*.22,r:5+h,fill:a.accent,opacity:.75}),o.jsx("rect",{x:t-l*.22,y:r-u*.08,width:l*.44,height:2,fill:a.accent,opacity:.5}),o.jsx("rect",{x:t-1.5,y:r-u*.08,width:3,height:u*.5,fill:a.accent,opacity:.7})]}),e==="cleric"&&o.jsxs("g",{opacity:.9,children:[o.jsx("line",{x1:t+l*.6,y1:r-c*.2,x2:t+l*.6,y2:r+c*.1,stroke:a.secondary,strokeWidth:2}),o.jsx("circle",{cx:t+l*.6,cy:r+c*.12,r:5,fill:a.accent}),o.jsx("ellipse",{cx:t,cy:r+u*.62,rx:l*.6,ry:l*.18,fill:a.accent,opacity:.12})]}),e==="monk"&&o.jsxs("g",{opacity:.95,children:[Array.from({length:8}).map((m,k)=>{const A=-Math.PI/2+k/7*Math.PI,_=t+Math.cos(A)*(l*.28),O=r-u*.22+Math.sin(A)*(l*.2);return o.jsx("circle",{cx:_,cy:O,r:2.4,fill:a.accent},k)}),o.jsx("path",{d:`M ${t-l*.4} ${r-u*.08} L ${t+l*.4} ${r+u*.26}`,stroke:a.secondary,strokeWidth:4})]}),o.jsx("rect",{x:t+l*.6,y:r-c*.3,width:4,height:c*.7,fill:a.accent}),o.jsxs("g",{transform:`rotate(${i.toFixed(1)}, ${t}, ${r-u*.35})`,children:[o.jsx("circle",{cx:t,cy:r-u*.35,r:n*.56,stroke:a.accent,strokeDasharray:"6 6",strokeWidth:3,fill:"none",opacity:.85}),o.jsx("circle",{cx:t,cy:r-u*.35,r:n*.36,stroke:a.accent,strokeDasharray:"4 6",strokeWidth:2,fill:"none",opacity:.7}),o.jsx("circle",{cx:t+n*.56,cy:r-u*.35,r:4,fill:a.accent})]}),e==="stormcaller"&&o.jsxs("g",{opacity:.9,children:[o.jsx("polyline",{points:`${t-10},${r-u*.5} ${t-2},${r-u*.62} ${t+6},${r-u*.54} ${t+14},${r-u*.68}`,fill:"none",stroke:a.accent,strokeWidth:2}),o.jsx("polyline",{points:`${t-6},${r-u*.42} ${t+2},${r-u*.54} ${t+10},${r-u*.46} ${t+18},${r-u*.6}`,fill:"none",stroke:a.accent,strokeWidth:2,opacity:.8}),o.jsxs("g",{opacity:.85,children:[o.jsx("circle",{cx:t-l*.26,cy:r-u*.02,r:l*.14,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("circle",{cx:t+l*.26,cy:r-u*.02,r:l*.14,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("circle",{cx:t-l*.26,cy:r-u*.02,r:l*.08+h*1.5,fill:a.accent,opacity:.35}),o.jsx("circle",{cx:t+l*.26,cy:r-u*.02,r:l*.08+h*1.5,fill:a.accent,opacity:.35})]})]}),e==="sorcerer"&&o.jsx("g",{opacity:.95,children:Array.from({length:3}).map((m,k)=>o.jsx("circle",{cx:t+Math.cos(g(i*.6+k*2.094))*(n*.6),cy:r-u*.1+Math.sin(g(i*.6+k*2.094))*(n*.3),r:4,fill:a.accent},k))}),e==="warlock"&&o.jsxs("g",{opacity:.9,children:[o.jsx("polygon",{points:`${t},${r-n*.6} ${t+6},${r-n*.5} ${t-6},${r-n*.5}`,fill:a.accent}),o.jsx("polygon",{points:`${t-n*.5},${r} ${t-n*.42},${r-6} ${t-n*.58},${r-6}`,fill:a.accent,opacity:.8}),Array.from({length:2}).map((m,k)=>{const A=g(i*.8+k*Math.PI),_=t+Math.cos(A)*(n*.7),O=r-u*.05+Math.sin(A)*(n*.35);return o.jsxs("g",{opacity:.85,children:[o.jsx("rect",{x:_-6,y:O-4,width:12,height:8,rx:1.5,fill:a.secondary,stroke:s,strokeWidth:1.5}),o.jsx("line",{x1:_-4,y1:O,x2:_+4,y2:O,stroke:a.accent,strokeWidth:1.5})]},k)})]}),e==="druid"&&o.jsxs("g",{opacity:.85,children:[o.jsx("path",{d:`M ${t+10} ${r-8} q 8 -6 0 -14 q -8 6 0 14`,fill:a.accent,opacity:.35}),o.jsx("path",{d:`M ${t-10} ${r+8} q -8 6 0 14 q 8 -6 0 -14`,fill:a.accent,opacity:.35}),o.jsx("path",{d:`M ${t-x*.8} ${r-u*.48} q -6 -8 -2 -14`,stroke:a.secondary,strokeWidth:3,fill:"none"}),o.jsx("path",{d:`M ${t+x*.8} ${r-u*.48} q 6 -8 2 -14`,stroke:a.secondary,strokeWidth:3,fill:"none"}),o.jsx("path",{d:`M ${t-l*.4} ${r+u*.02} q ${l*.4} ${u*.2} ${l*.8} 0`,stroke:a.accent,strokeWidth:3})]})]});case"frost":return o.jsxs("g",{opacity:.95,children:[y,o.jsxs("g",{transform:`rotate(${i.toFixed(1)}, ${t}, ${r-u*.2})`,children:[o.jsx("line",{x1:t-n*.6,y1:r-u*.2,x2:t+n*.6,y2:r-u*.2,stroke:a.accent,strokeWidth:2}),o.jsx("line",{x1:t,y1:r-u*.2-n*.6,x2:t,y2:r-u*.2+n*.6,stroke:a.accent,strokeWidth:2}),o.jsx("line",{x1:t-n*.42,y1:r-u*.2-n*.42,x2:t+n*.42,y2:r-u*.2+n*.42,stroke:a.accent,strokeWidth:2}),o.jsx("line",{x1:t-n*.42,y1:r-u*.2+n*.42,x2:t+n*.42,y2:r-u*.2-n*.42,stroke:a.accent,strokeWidth:2})]}),o.jsx("g",{opacity:.9,children:Array.from({length:5}).map((m,k)=>{const A=-Math.PI/4+k/4*(Math.PI/2),_=t+Math.cos(A)*(x*.9),O=r-u*.5+Math.sin(A)*(x*.6);return o.jsx("polygon",{points:`${_},${O} ${_+4},${O-8} ${_-4},${O-8}`,fill:a.accent,opacity:.8},k)})})]});case"rogue":case"berserker":case"assassin":case"duelist":return o.jsxs("g",{children:[y,o.jsx("g",{transform:`rotate(35, ${t}, ${r})`,children:o.jsx("rect",{x:t-2,y:r-c*.35,width:4,height:c*.52,fill:a.accent,rx:2})}),o.jsx("g",{transform:`rotate(-35, ${t}, ${r})`,children:o.jsx("rect",{x:t-2,y:r-c*.35,width:4,height:c*.52,fill:a.accent,rx:2})}),e==="rogue"&&o.jsx("path",{d:`M ${t-x} ${r-u*.48} q ${x} ${-x*.6} ${x*2} 0`,fill:a.secondary,opacity:.7}),e==="berserker"&&o.jsxs("g",{opacity:.9,children:[o.jsxs("g",{transform:`rotate(${(-20+d).toFixed(1)}, ${t-l*.72}, ${r-u*.04})`,children:[o.jsx("rect",{x:t-l*.78,y:r-u*.32,width:3,height:c*.46,fill:a.secondary}),o.jsx("polygon",{points:`${t-l*.78-8},${r-u*.2} ${t-l*.78+8},${r-u*.2} ${t-l*.78},${r-u*.05}`,fill:a.accent})]}),o.jsxs("g",{transform:`rotate(${(20-d).toFixed(1)}, ${t+l*.86}, ${r-u*.02})`,children:[o.jsx("rect",{x:t+l*.84,y:r-u*.34,width:3,height:c*.48,fill:a.secondary}),o.jsx("polygon",{points:`${t+l*.84-8},${r-u*.22} ${t+l*.84+8},${r-u*.22} ${t+l*.84},${r-u*.06}`,fill:a.accent})]}),o.jsx("polygon",{points:`${t-l*.26},${r-u*.02} ${t-l*.36},${r+u*.05} ${t-l*.24},${r+u*.08}`,fill:a.accent}),o.jsx("polygon",{points:`${t+l*.26},${r-u*.02} ${t+l*.36},${r+u*.05} ${t+l*.24},${r+u*.08}`,fill:a.accent}),o.jsx("circle",{cx:t,cy:r-c*.15,r:3+h,fill:a.accent}),o.jsx("circle",{cx:t,cy:r+c*.15,r:2.5+h*.6,fill:a.accent})]}),e==="assassin"&&o.jsx("path",{d:`M ${t-x} ${r-u*.48} q ${x} ${-x*.8} ${x*2} 0`,fill:a.secondary,opacity:.8}),e==="duelist"&&o.jsxs("g",{children:[o.jsx("rect",{x:t+l*.72-1,y:r-c*.38,width:2,height:c*.6,fill:a.accent,rx:1}),o.jsx("circle",{cx:t+l*.72,cy:r-c*.06,r:5,fill:a.secondary,stroke:a.accent,strokeWidth:2}),o.jsx("path",{d:`M ${t-x*.8} ${r-u*.55} q ${x*.8} ${-x*.4} ${x*1.6} 0`,stroke:a.secondary,strokeWidth:3}),o.jsx("path",{d:`M ${t+x*.2} ${r-u*.6} q 8 -6 0 -12`,stroke:a.accent,strokeWidth:2})]}),(e==="rogue"||e==="assassin"||e==="duelist")&&o.jsx("path",{d:`M ${t} ${r-x*.2} C ${t-l} ${r+u*.05}, ${t-l} ${r+u*.9}, ${t+d} ${r+u*.95}`,fill:a.secondary,opacity:.16})]});case"spear":case"pikeman":case"javelin":case"phalanx":return o.jsxs("g",{children:[y,o.jsx("rect",{x:t+l*.66,y:r-c*.48,width:e==="javelin"?3:4,height:e==="javelin"?c*.56:c*.76,fill:a.accent,rx:2}),o.jsx("polygon",{points:`${t+l*.66-6},${r-c*.48} ${t+l*.66+6},${r-c*.48} ${t+l*.66},${r-(e==="javelin"?c*.64:c*.78)}`,fill:a.accent}),e==="spear"&&o.jsx("g",{opacity:.85,children:o.jsx("circle",{cx:t-l*.78,cy:r+u*.02,r:l*.18,fill:a.secondary,stroke:s,strokeWidth:2})}),e==="javelin"&&o.jsxs("g",{opacity:.85,children:[o.jsx("rect",{x:t+l*.06,y:r-u*.02,width:l*.24,height:3,fill:a.secondary}),o.jsx("rect",{x:t+l*.06,y:r+u*.06,width:l*.22,height:3,fill:a.accent,opacity:.7})]}),e==="phalanx"&&o.jsxs("g",{children:[o.jsx("rect",{x:t-l*.9,y:r-u*.05,width:l*.42,height:u*.5,rx:6,fill:a.accent,opacity:.18,stroke:s,strokeWidth:2}),o.jsx("circle",{cx:t-l*.69,cy:r+u*.16,r:l*.06,fill:a.secondary,stroke:s,strokeWidth:1.5}),o.jsx("path",{d:`M ${t-l*.86} ${r+u*.06} q ${l*.2} ${-u*.12} ${l*.28} 0`,stroke:a.accent,strokeWidth:2})]}),e==="pikeman"&&o.jsx("g",{opacity:.85,children:o.jsx("polygon",{points:`${t+l*.78},${r-c*.22} ${t+l*1.02},${r-c*.18} ${t+l*.86},${r-c*.08}`,fill:a.secondary})})]});case"valkyrie":return o.jsxs("g",{children:[y,o.jsx("path",{d:`M ${t-22} ${r-n-4} q 12 -10 24 0`,stroke:a.accent,strokeWidth:3,fill:"none"}),o.jsx("path",{d:`M ${t-22} ${r-n+2} q 12 -10 24 0`,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("rect",{x:t-2,y:r-c*.35,width:4,height:c*.52,fill:a.accent,rx:2}),o.jsx("polygon",{points:`${t+4},${r-c*.22} ${t+18},${r-c*.16} ${t+4},${r-c*.08}`,fill:a.secondary,opacity:.6}),o.jsx("g",{transform:`translate(0, ${p.toFixed(2)})`,opacity:.75,children:o.jsx("path",{d:`M ${t-22} ${r-n-8} q 12 -10 24 0`,stroke:a.accent,strokeWidth:2,fill:"none"})})]});case"ballista":return o.jsxs("g",{children:[y,o.jsx("rect",{x:t-c*.34,y:r+c*.2,width:c*.68,height:c*.16,fill:a.accent,opacity:.6,rx:4}),o.jsx("line",{x1:t-c*.16,y1:r+c*.02,x2:t-c*.36,y2:r-c*.08,stroke:a.secondary,strokeWidth:3}),o.jsx("line",{x1:t+c*.16,y1:r+c*.02,x2:t+c*.36,y2:r-c*.08,stroke:a.secondary,strokeWidth:3}),o.jsx("polygon",{points:`${t-c*.1},${r+c*0} ${t+c*.1},${r+c*0} ${t},${r-c*.22}`,fill:a.accent}),o.jsx("circle",{cx:t-c*.24,cy:r+c*.36,r:c*.06,fill:a.secondary,stroke:s,strokeWidth:2}),o.jsx("circle",{cx:t+c*.24,cy:r+c*.36,r:c*.06,fill:a.secondary,stroke:s,strokeWidth:2})]});case"slinger":return o.jsxs("g",{children:[y,o.jsx("path",{d:`M ${t-c*.36} ${r-c*.08} Q ${t-c*.14} ${r-c*.32}, ${t+c*.18} ${r-c*.04}`,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("circle",{cx:t+c*.18,cy:r-c*.04,r:3,fill:a.accent}),o.jsx("rect",{x:t-l*.12,y:r+u*.22,width:8,height:6,fill:a.secondary,stroke:s,strokeWidth:1.5}),o.jsx("rect",{x:t+l*.12,y:r-u*.02,width:l*.16,height:3,fill:a.accent,opacity:.7})]});case"alchemist":return o.jsxs("g",{children:[y,o.jsxs("g",{transform:`rotate(${(i*.1).toFixed(1)}, ${t+l*.64}, ${r-u*.22})`,children:[o.jsx("rect",{x:t+l*.6,y:r-u*.28,width:8,height:14,rx:3,fill:a.accent,opacity:.8}),o.jsx("circle",{cx:t+l*.64,cy:r-u*.14,r:6,fill:a.accent,opacity:.35})]}),Array.from({length:3}).map((m,k)=>o.jsx("circle",{cx:t+l*.64+k*4,cy:r-u*.2-k*6-h*4,r:2,fill:a.accent,opacity:.6-k*.15},k))]});case"medic":return o.jsxs("g",{children:[y,o.jsx("rect",{x:t-l*.1,y:r+u*.18,width:l*.2,height:u*.18,rx:4,fill:a.accent,opacity:.25}),o.jsx("rect",{x:t-2,y:r+u*.22,width:4,height:u*.1,fill:a.accent}),o.jsx("rect",{x:t-8,y:r+u*.26,width:16,height:4,fill:a.accent}),o.jsx("path",{d:`M ${t-l*.18} ${r-u*.1} q ${l*.18} ${u*.12} ${l*.36} 0`,stroke:a.secondary,strokeWidth:2,fill:"none"})]});case"mystic":return o.jsxs("g",{children:[y,o.jsx("path",{d:`M ${t-8} ${r-u*.5} q 8 -12 16 0`,stroke:a.accent,strokeWidth:2,fill:"none"}),o.jsx("circle",{cx:t,cy:r-u*.42,r:3,fill:a.accent}),o.jsx("rect",{x:t-l*.22,y:r-u*.1,width:l*.44,height:2,fill:a.accent,opacity:.6}),o.jsx("rect",{x:t-1.5,y:r-u*.1,width:3,height:u*.5,fill:a.accent,opacity:.8}),Array.from({length:3}).map((m,k)=>o.jsx("circle",{cx:t+Math.cos(i*1.2*Math.PI/180+k*2.094)*(n*.5),cy:r-u*.2+Math.sin(i*1.2*Math.PI/180+k*2.094)*(n*.24),r:2,fill:"#fff",opacity:.35},k))]});case"witch":return o.jsxs("g",{children:[y,o.jsx("polygon",{points:`${t-x},${r-u*.58} ${t},${r-u*.88} ${t+x},${r-u*.58}`,fill:a.secondary,stroke:s,strokeWidth:2}),o.jsx("rect",{x:t-x*.6,y:r-u*.6,width:x*1.2,height:4,fill:a.accent}),o.jsx("path",{d:`M ${t+x*.4} ${r-u*.66} l 4 -6 l 4 6 l -4 -2 Z`,fill:"#ffd166"}),o.jsxs("g",{opacity:.6,children:[o.jsx("rect",{x:t-l*.64,y:r-u*.06,width:l*.3,height:3,fill:a.secondary}),o.jsx("rect",{x:t-l*.38,y:r-u*.1,width:6,height:10,fill:a.accent})]}),o.jsx("rect",{x:t+l*.6,y:r-c*.24,width:4,height:c*.62,fill:a.accent})]});default:return o.jsx("g",{children:y})}}function F0(e,t,r){let a=Math.PI/2*3,i=e,s=t;const c=Math.PI/5;let l=`M ${e} ${t-r}`;for(let u=0;u<5;u++)i=e+Math.cos(a)*r,s=t+Math.sin(a)*r,l+=` L ${i} ${s}`,a+=c,i=e+Math.cos(a)*(r/2),s=t+Math.sin(a)*(r/2),l+=` L ${i} ${s}`,a+=c;return l+=" Z",l}function ef(e){const{unitId:t,draggable:r,onDropToBoard:n,onClear:a,onSell:i,compact:s}=e,c=m0(t),l=we(c.templateKey),u=N(_=>_.units[t]),x=N(_=>_.phase),f=(u==null?void 0:u.star)??1,v=c.stats.atk*f,y=Math.max(200,Math.floor(c.stats.atkIntervalMs/f));Math.max(120,Math.floor(c.stats.moveIntervalMs/f));const g=ae.useRef(null),[d,w]=ae.useState(!1),[h,p]=ae.useState(!1),m=ae.useRef(null),[k,A]=ae.useState(10);return ae.useLayoutEffect(()=>{if(!s)return;const _=()=>{try{const $=g.current;if(!$)return;const W=Math.max(20,$.clientWidth-8),Q=document.createElement("canvas").getContext("2d");if(!Q)return;let G=10;for(;G>=7&&(Q.font=`${G}px Inter, system-ui, Arial, sans-serif`,!(Q.measureText(c.name).width<=W));)G-=1;A(G)}catch{}};_();const O=()=>_();return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[s,c.name]),o.jsxs("div",{ref:g,draggable:r??!0,onMouseEnter:()=>{w(!0);try{const _=g.current;if(_){const O=_.getBoundingClientRect();p(O.right+280>window.innerWidth-8)}}catch{}},onMouseLeave:()=>w(!1),onDragStart:_=>{_.dataTransfer.setData("text/plain",t),_.currentTarget.style.opacity="0.85"},onDragEnd:()=>{g.current&&(g.current.style.opacity="1")},style:{userSelect:"none",background:`linear-gradient(160deg, ${l.secondary} 0%, ${l.primary} 100%)`,border:`1px solid ${l.accent}`,borderRadius:s?6:10,padding:s?4:"6px 8px",fontSize:s?11:12,display:"grid",gridTemplateColumns:s?"1fr":"28px 1fr auto",gridTemplateRows:s?"auto auto":void 0,gap:s?2:8,alignItems:"center",width:s?"100%":void 0,height:s?"100%":void 0,overflow:"visible",justifyItems:s?"center":void 0,textAlign:s?"center":"left",boxSizing:"border-box",color:s?void 0:"#ffffff",position:"relative"},children:[o.jsx("div",{style:{width:s?24:28,height:s?24:28,borderRadius:6,background:l.accent,display:"grid",placeItems:"center"},children:o.jsx(z0,{kind:l.emblem,color:l.secondary})}),o.jsxs("div",{style:{maxWidth:"100%",minWidth:0},children:[o.jsxs("div",{ref:m,title:`${c.name}${u!=null&&u.star&&u.star>1?` ${u.star}`:""}`,style:s?{fontWeight:900,overflow:"hidden",color:"#ffffff",fontSize:k,lineHeight:1.1,whiteSpace:"nowrap",textOverflow:"ellipsis",minWidth:0,textShadow:"0 1px 2px rgba(0,0,0,0.9)",background:"rgba(0,0,0,0.38)",padding:"1px 3px",borderRadius:4}:{fontWeight:800,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"#ffffff",textShadow:"0 1px 4px rgba(0,0,0,0.9)",minWidth:0},children:[c.name," ",!s&&(u!=null&&u.star)&&u.star>1?`${u.star}`:""]}),o.jsx("div",{style:{display:"flex",gap:4,marginTop:s?2:4,flexWrap:"wrap"},children:zt(c.templateKey).slice(0,2).map(_=>o.jsx("span",{title:`${_}  thresholds 2/4/6`,style:{fontSize:10,fontWeight:800,padding:"2px 6px",borderRadius:999,background:"rgba(255,255,255,0.18)",color:"#ffffff",border:"1px solid rgba(255,255,255,0.35)"},children:_},_))}),!s&&o.jsxs("div",{style:{color:"rgba(255,255,255,0.9)",opacity:1,fontSize:11},children:["HP ",c.stats.hp*f,"  ATK ",v,"  RNG ",c.stats.range,"  CD ",(y/1e3).toFixed(2),"s"]})]}),!s&&x==="prep"&&o.jsxs("div",{style:{display:"flex",gap:6},children:[a&&o.jsx("button",{onClick:()=>a(),style:{padding:"4px 6px"},children:"X"}),i&&o.jsxs("button",{onClick:()=>i(),onMouseDown:_=>{_.currentTarget.style.transform="translateY(1px) scale(0.995)"},onMouseUp:_=>{_.currentTarget.style.transform="translateY(0) scale(1)"},style:{padding:"8px 10px",borderRadius:10,border:"1px solid var(--bad)",background:"var(--bad)",color:"#ffffff",fontWeight:800,letterSpacing:.4,boxShadow:"0 6px 12px rgba(220,38,38,0.25)",display:"inline-flex",alignItems:"center",gap:6},title:"Sell unit",children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"#fff","aria-hidden":!0,children:o.jsx("path",{d:"M9 3h6l1 2h4v2H4V5h4l1-2zm1 7h2v8h-2v-8zm4 0h2v8h-2v-8zM7 10h2v8H7v-8z"})}),"Sell"]})]}),d&&o.jsx(O0,{unitId:t,compact:!!s,flip:h}),s&&o.jsxs("div",{style:{position:"absolute",top:2,right:2,padding:"1px 4px",borderRadius:6,fontSize:10,fontWeight:900,color:f>=3?"#ffd166":f===2?"#c3e88d":"#ffffff",background:"rgba(0,0,0,0.55)",border:`1px solid ${l.accent}`,textShadow:"0 1px 2px rgba(0,0,0,0.8)"},title:`${f}`,children:["",f]})]})}function z0({kind:e,color:t}){return e==="sword"?o.jsx("svg",{width:18,height:18,viewBox:"0 0 24 24",children:o.jsx("path",{fill:t,d:"M7 21l3-3-4-4-3 3v4h4zm5.586-7.414l2.829 2.828L22 10.828 18.172 7l-4.586 4.586L9 16l3 3 2.586-5.414z"})}):e==="bow"?o.jsx("svg",{width:18,height:18,viewBox:"0 0 24 24",children:o.jsx("path",{fill:t,d:"M21 3l-6 6 2 2 6-6-2-2zM3 21s6-2 9-5 5-9 5-9l-2-2s-6 2-9 5-5 9-5 9l2 2z"})}):e==="shield"?o.jsx("svg",{width:18,height:18,viewBox:"0 0 24 24",children:o.jsx("path",{fill:t,d:"M12 2l7 4v6c0 5-3.5 9.74-7 10-3.5-.26-7-5-7-10V6l7-4z"})}):e==="dagger"?o.jsx("svg",{width:18,height:18,viewBox:"0 0 24 24",children:o.jsx("path",{fill:t,d:"M2 22l7-7 2 2-7 7H2v-2zm9-9l8-8 2 2-8 8-2-2z"})}):e==="spear"?o.jsx("svg",{width:18,height:18,viewBox:"0 0 24 24",children:o.jsx("path",{fill:t,d:"M2 22l8-8 2 2-8 8H2v-2zm9-9L20 4l2 2-9 9-2-2z"})}):e==="plus"?o.jsx("svg",{width:18,height:18,viewBox:"0 0 24 24",children:o.jsx("path",{fill:t,d:"M11 5h2v6h6v2h-6v6h-2v-6H5v-2h6z"})}):o.jsx("svg",{width:18,height:18,viewBox:"0 0 24 24",children:o.jsx("circle",{cx:12,cy:12,r:6,fill:t})})}function O0({unitId:e,compact:t,flip:r}){const n=N(d=>d.units[e]),a=te[n.templateKey],i=a.stats,s=n.star||1,c=i.hp*s,l=i.atk*s,u=Math.max(200,Math.floor(i.atkIntervalMs/s)),x=Math.max(120,Math.floor(i.moveIntervalMs/s)),f=i.range>=3?"Ranged":i.range===2?"Mid":"Melee",v=a.abilityLevels&&a.abilityLevels[s]?a.abilityLevels[s]:a.ability,y=v?I0(v):"None",g={position:"absolute",zIndex:30,pointerEvents:"none",minWidth:220,maxWidth:260,background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:10,color:"var(--text)",boxShadow:"var(--shadow)",padding:10,lineHeight:1.25,top:t?-8:0,left:r?void 0:"100%",right:r?"100%":void 0,marginLeft:r?void 0:8,marginRight:r?8:void 0,transform:t?"translateY(-50%)":void 0};return o.jsxs("div",{style:g,children:[o.jsxs("div",{style:{fontWeight:800,marginBottom:4},children:[a.name," ",s>1?`${s}`:""]}),o.jsxs("div",{style:{fontSize:12,color:"#aeb4c6",marginBottom:6},children:[f,"  Cost ",a.cost,"g"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",columnGap:8,rowGap:4,fontSize:12},children:[o.jsx("span",{style:{color:"#9fb0d7"},children:"HP"}),o.jsxs("span",{children:[n.hp,"/",c]}),o.jsx("span",{style:{color:"#9fb0d7"},children:"ATK"}),o.jsx("span",{children:l}),o.jsx("span",{style:{color:"#9fb0d7"},children:"RNG"}),o.jsx("span",{children:i.range}),o.jsx("span",{style:{color:"#9fb0d7"},children:"Atk CD"}),o.jsxs("span",{children:[(u/1e3).toFixed(2),"s"]}),o.jsx("span",{style:{color:"#9fb0d7"},children:"Move CD"}),o.jsxs("span",{children:[(x/1e3).toFixed(2),"s"]}),o.jsx("span",{style:{color:"#9fb0d7"},children:"Ability"}),o.jsx("span",{children:y})]})]})}function I0(e){switch(e==null?void 0:e.type){case"cleave":return`Cleave: splash ${Math.round(e.ratio*100)}% damage to adjacent enemies`;case"multishot":return`Multishot: hits ${e.extraTargets} extra target(s) for ${Math.round(e.ratio*100)}% damage`;case"stunOnHit":return`On-hit Stun: ${Math.round(e.chance*100)}% to stun for ${(e.durationMs/1e3).toFixed(2)}s`;case"slowOnHit":return`On-hit Slow: ${Math.round(e.chance*100)}% to slow to ${Math.round((e.factor||1)*100)}% for ${(e.durationMs/1e3).toFixed(2)}s`;case"healPulse":return`Heal Pulse: every ${(e.cooldownMs/1e3).toFixed(2)}s, heal nearby allies for ${e.amount}`;case"pierce":return`Pierce: projectile continues to next enemy for ${Math.round(e.ratio*100)}% damage`;default:return"None"}}const at=8,nt=8,Le=4;function L0(){const e=N(y=>y.board),t=N(y=>y.units),r=N(y=>y.moveUnit),n=N(y=>y.moveUnitToBoard),a=N(y=>y.removeUnit),i=N(y=>y.phase),s=N(y=>y.bench),c=N(y=>y.level),[l,u]=ae.useState(),x=N(y=>y.cellSize),f=Math.max(1,Math.min(15,c)),v=Object.values(e).filter(y=>{var g;return!!y&&((g=N.getState().units[y])==null?void 0:g.team)==="player"}).length;return o.jsxs("div",{style:{position:"relative",background:"transparent",border:"none",borderRadius:12,padding:8,marginBottom:8,width:"max-content",marginInline:"auto"},children:[o.jsx("style",{children:`
        @keyframes bgShift { 0% { background-position: 0% 0%; } 100% { background-position: 120% 120%; } }
      `}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:`repeat(${nt}, ${x}px)`,gap:Le,position:"relative"},onDragOver:y=>y.preventDefault(),children:[Array.from({length:at*nt}).map((y,g)=>{const d=Math.floor(g/nt),w=g%nt,h=`${d},${w}`,p=e[h],m=p?t[p]:void 0;return o.jsx(B0,{r:d,c:w,unitId:p,cellSize:x,allowDrop:i==="prep"&&!p&&d>=Math.floor(at/2),isCombat:i==="combat",onDropUnit:k=>{i==="prep"&&(s.includes(k)?n(k,{r:d,c:w}):r(k,{r:d,c:w}))},onClear:()=>i==="prep"&&p&&a({r:d,c:w}),onHover:i==="prep"&&m&&m.team==="player"?()=>u(p):void 0,onUnhover:i==="prep"?()=>u(k=>k===p?void 0:k):void 0},h)}),(i==="prep"||N.getState().alwaysShowRanges)&&(l||N.getState().alwaysShowRanges)&&(()=>{var _;t[l];const y=l||Object.values(e).find(O=>{var $;return!!O&&(($=t[O])==null?void 0:$.team)==="player"});if(!y)return null;const g=t[y];if(!g||g.team!=="player")return null;const d=(_=Object.entries(e).find(([,O])=>O===y))==null?void 0:_[0];if(!d)return null;const[w,h]=d.split(",").map(Number),p=h*(x+Le)+x/2,m=w*(x+Le)+x/2,A=te[g.templateKey].stats.range*(x+Le)+x*.5;return o.jsxs("svg",{width:nt*x+(nt-1)*Le,height:at*x+(at-1)*Le,style:{position:"absolute",pointerEvents:"none",inset:0},children:[o.jsx("defs",{children:o.jsxs("radialGradient",{id:"rngFill",cx:"50%",cy:"50%",r:"50%",children:[o.jsx("stop",{offset:"0%",stopColor:"rgba(59,130,246,0.16)"}),o.jsx("stop",{offset:"100%",stopColor:"rgba(59,130,246,0.06)"})]})}),o.jsx("circle",{cx:p,cy:m,r:A,fill:"url(#rngFill)",stroke:"rgba(59,130,246,0.6)",strokeDasharray:"6 8"})]},"rng-overlay")})()]}),o.jsx(N0,{board:e,units:t,cellSize:x,hoveredId:l}),i==="prep"&&(()=>{const y=nt*x+(nt-1)*Le+2,g=Math.floor(at/2),d=at-g,w=g*(x+Le)-1,h=d*x+(d-1)*Le+2;return o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"absolute",top:8+w-6,left:1,width:y+12,height:h+12,borderRadius:16,pointerEvents:"none",background:"transparent",boxShadow:"0 0 0 rgba(34,197,94,0)",animation:"pulseHalo 1.6s ease-in-out infinite"}}),o.jsx("div",{style:{position:"absolute",top:8+w,left:7,width:y,height:h,boxSizing:"border-box",border:"2px solid #22c55e",borderRadius:10,background:"transparent",pointerEvents:"none",boxShadow:"0 0 18px rgba(34,197,94,0.28)",animation:"pulseOutline 1.6s ease-in-out infinite"}}),o.jsx("style",{children:`
              @keyframes pulseOutline {
                0% { box-shadow: 0 0 10px rgba(34,197,94,0.18); }
                50% { box-shadow: 0 0 34px rgba(34,197,94,0.55); }
                100% { box-shadow: 0 0 10px rgba(34,197,94,0.18); }
              }
              @keyframes pulseHalo {
                0% { transform: scale(1); box-shadow: 0 0 0 rgba(34,197,94,0); }
                50% { transform: scale(1.02); box-shadow: 0 0 64px rgba(34,197,94,0.45); }
                100% { transform: scale(1); box-shadow: 0 0 0 rgba(34,197,94,0); }
              }
            `})]})})(),i==="prep"&&o.jsxs("div",{style:{marginTop:6,textAlign:"center",fontSize:12,color:"var(--muted)"},children:["Units on board: ",v,"/",f]}),i==="combat"&&o.jsx(R0,{rows:at,cols:nt,cellSize:x,gap:Le}),o.jsx(_0,{rows:at,cols:nt,cellSize:x,gap:Le})]})}function N0({board:e,units:t,cellSize:r,hoveredId:n}){const a=N(G=>G.phase),[i,s]=ae.useState(0),[c,l]=ae.useState(null);ae.useEffect(()=>{let G=0;const V=()=>{s(performance.now()),G=requestAnimationFrame(V)};return G=requestAnimationFrame(V),()=>cancelAnimationFrame(G)},[]);const u=new Map;for(const[G,V]of Object.entries(e)){if(!V)continue;const ie=t[V];if(!ie||ie.team!=="player")continue;const[re,ne]=G.split(",").map(Number),ce=ne*(r+Le)+r/2,I=re*(r+Le)+r/2,j=u.get(ie.templateKey)||[];j.push({r:re,c:ne,x:ce,y:I,id:V}),u.set(ie.templateKey,j)}const x=[["frost","marksman","Shatter","#60a5fa","#bae6fd"],["paladin","sorcerer","Nova","#fde68a","#fbbf24"],["assassin","rogue","Backstab","#ef4444","#f59e0b"],["guardian","cleric","Bulwark","#60a5fa","#93c5fd"],["hunter","beastmaster","Pack","#22c55e","#10b981"],["spear","phalanx","Impale","#67e8f9","#0ea5e9"],["mage","warlock","Ruin","#a78bfa","#7c3aed"],["druid","monk","Grove","#86efac","#bbf7d0"],["sniper","marksman","Headshot","#facc15","#f59e0b"],["ballista","sentry","Overwatch","#60a5fa","#1d4ed8"],["icearcher","frost","Freeze","#93c5fd","#e0f2fe"],["knight","templar","Bash","#fcd34d","#f59e0b"],["valkyrie","paladin","Judgement","#fde68a","#fbbf24"],["archer","crossbow","Volley","#22c55e","#10b981"],["sorcerer","stormcaller","Chain","#a78bfa","#7c3aed"],["warrior","berserker","Rage","#ef4444","#f59e0b"],["assassin","duelist","Lunge","#fca5a5","#f87171"],["pikeman","javelin","Reach","#67e8f9","#0ea5e9"],["guardian","paladin","Aegis","#60a5fa","#fde68a"],["valkyrie","templar","Wings","#fde68a","#f59e0b"],["knight","guardian","Wall","#93c5fd","#fcd34d"],["paladin","templar","Radiance","#fcd34d","#fde68a"],["mage","frost","Glacier","#93c5fd","#a78bfa"],["warlock","witch","Hex","#a78bfa","#c4b5fd"],["sniper","crossbow","Pierce","#facc15","#f59e0b"],["druid","beastmaster","Mending","#86efac","#10b981"],["cleric","medic","Triage","#22c55e","#86efac"],["gladiator","champion","Roar","#f59e0b","#fcd34d"],["knight","paladin","Oath","#60a5fa","#fde68a"],["archer","hunter","Falcon","#22c55e","#10b981"],["warlock","mystic","Hexburst","#a78bfa","#c4b5fd"],["ballista","slinger","Explosive","#f59e0b","#fbbf24"],["alchemist","cleric","Elixir","#86efac","#22c55e"],["gladiator","valkyrie","Skyfall","#fde68a","#f59e0b"],["rogue","mystic","Bewilder","#fca5a5","#a78bfa"],["guardian","champion","Bulwark","#93c5fd","#fcd34d"],["druid","paladin","Blessed","#86efac","#fde68a"],["sentry","marksman","Focus","#60a5fa","#f59e0b"],["guardian","valkyrie","Aerial","#93c5fd","#fde68a"],["monk","paladin","Serenity","#22c55e","#fde68a"]],f=[{keys:["knight","paladin","templar"],label:"Holy Triumvirate"},{keys:["archer","marksman","sniper"],label:"Arrow Storm"},{keys:["guardian","champion","gladiator"],label:"Phalanx Wall"},{keys:["druid","monk","paladin"],label:"Sanctuary"},{keys:["sorcerer","warlock","witch"],label:"Chaos Nexus"},{keys:["pikeman","phalanx","spear"],label:"Piercing Wall"},{keys:["cleric","monk","medic"],label:"Hymn of Life"},{keys:["mage","sorcerer","stormcaller"],label:"Tempest"},{keys:["rogue","assassin","duelist"],label:"Deathblossom"},{keys:["guardian","shieldbearer","shieldman"],label:"Iron Bulwark"},{keys:["frost","icearcher","mystic"],label:"Absolute Zero"},{keys:["ballista","sentry","slinger"],label:"Siege Network"},{keys:["hunter","archer","beastmaster"],label:"Pack Hunt"}],v=nt*r+(nt-1)*Le,y=at*r+(at-1)*Le,g=N.getState().phase==="combat"?1.6:1,d=Math.floor(i/(20/g)%200),w=i/(1200/g)%360,h=i/(1e3/g),p=2,m={Shatter:"Bonus damage to slowed enemies with icy burst.",Nova:"Paladin pulses also damage nearby foes.",Backstab:"Isolated targets suffer heavy bleed.",Bulwark:"Allies gain brief shields/DR.",Pack:"Rangers fire an extra weaker shot.",Impale:"Extra damage to the cell behind the target.",Ruin:"Splash damage around the struck target.",Grove:"Cleanse and small extra heal on pulses.",Headshot:"Chance to massively amplify a ranged hit.",Overwatch:"Auto-fire at a random enemy after a hit.",Freeze:"Slow may briefly stun on hit.",Bash:"Smite in a small cone behind the target.",Judgement:"On kill, smite adjacent enemies.",Volley:"Extra arrows to nearby enemies.",Chain:"Lightning jumps to a nearby enemy.",Rage:"Shock damage on melee hit; screenshake.",Lunge:"Brief slow on low-HP enemies on hit.",Reach:"Extra spear jab to the same target.",Aegis:"Heal pulses grant damage reduction.",Wings:"Smite ring on Valkyrie melee hits.",Wall:"Shield ally directly behind attacker.",Radiance:"Radiant ring when Paladin heals.",Glacier:"Extra frost ring + damage on slowed foes.",Hex:"Brief slow on hit with arcane rune.",Pierce:"Try to hit the enemy behind the target.",Mending:"Heal a nearby ally on Beastmaster hit.",Triage:"Heal the lowest-HP ally on heal pulse.",Roar:"Damage or shield effect to nearby units.",Oath:"Knight gains a small shield on hit.",Falcon:"Extra arrow to same target.",Hexburst:"Bonus damage vs slowed or stunned enemies.",Explosive:"Small AoE around the target.",Blessed:"Extra small heals around Paladin pulses.",Focus:"Chance to refire at same target.",Aerial:"Valkyrie shield when near Guardian.",Serenity:"Monk gains a small HoT after hits."},k=[];for(const G of f)G.keys.every(ie=>(u.get(ie)||[]).length>0)&&k.push(G.label);function A(G,V,ie,re,ne,ce,I){const j=(1-I)*(1-I)*G+2*(1-I)*I*ie+I*I*ne,P=(1-I)*(1-I)*V+2*(1-I)*I*re+I*I*ce;return{x:j,y:P}}function _(G,V,ie,re,ne,ce,I){const j=2*(1-I)*(ie-G)+2*I*(ne-ie),P=2*(1-I)*(re-V)+2*I*(ce-re),E=Math.max(1e-6,Math.hypot(j,P));return{x:j/E,y:P/E}}const O=[],$=[],W=[],D=[],Q=[];for(const[G,V,ie,re,ne]of x){const ce=u.get(G)||[],I=u.get(V)||[];if(ce.length===0||I.length===0)continue;const j=[];for(const z of ce)for(const H of I){const ee=Math.abs(z.r-H.r)+Math.abs(z.c-H.c);j.push({A:z,B:H,d:ee})}j.sort((z,H)=>z.d-H.d);const P=new Set,E=[];for(const z of j){if(E.length>=p)break;P.has(z.A.id)||P.has(z.B.id)||(E.push({A:z.A,B:z.B}),P.add(z.A.id),P.add(z.B.id))}if(E.length===0)continue;const R=n&&E.some(z=>z.A.id===n||z.B.id===n),Z=R?1:.9,X=R?.12:.08;for(const{A:z,B:H}of E){const ee=(z.x+H.x)/2,Pe=(z.y+H.y)/2,b=H.x-z.x,T=H.y-z.y,C=-T,S=b,M=Math.max(20,Math.hypot(b,T)*.12),F=ee+C/Math.max(1,Math.hypot(C,S))*M*(z.x<H.x?1:-1),L=Pe+S/Math.max(1,Math.hypot(C,S))*M*(z.y<H.y?-1:1),U=`duo-${G}-${V}-${z.id.slice(-3)}-${H.id.slice(-3)}`;O.push(o.jsxs("g",{opacity:Z,style:{pointerEvents:"visibleStroke",cursor:"help"},onMouseEnter:()=>l({x:K.x,y:K.y,label:ie,desc:m[ie]||""}),onMouseLeave:()=>l(null),children:[o.jsx("defs",{children:o.jsxs("linearGradient",{id:U,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[o.jsx("stop",{offset:"0%",stopColor:re}),o.jsx("stop",{offset:"100%",stopColor:ne})]})}),o.jsx("path",{d:`M ${z.x} ${z.y} Q ${F} ${L} ${H.x} ${H.y}`,stroke:`url(#${U})`,strokeWidth:4,fill:"none",strokeDasharray:"10 8",strokeLinecap:"round",style:{mixBlendMode:"screen"},strokeDashoffset:d}),o.jsx("path",{d:`M ${z.x} ${z.y} Q ${F} ${L} ${H.x} ${H.y}`,stroke:ne,strokeWidth:8,fill:"none",opacity:X})]},`arc-${G}-${V}-${z.id}-${H.id}`));const K=A(z.x,z.y,F,L,H.x,H.y,.5);$.push(o.jsxs("g",{opacity:R?1:.95,children:[o.jsxs("g",{transform:`rotate(${w.toFixed(1)}, ${K.x}, ${K.y})`,children:[o.jsx("polygon",{points:`${K.x-4},${K.y} ${K.x},${K.y-8} ${K.x+4},${K.y} ${K.x},${K.y+8}`,fill:re,opacity:.6}),o.jsx("polygon",{points:`${K.x-6},${K.y} ${K.x},${K.y-12} ${K.x+6},${K.y} ${K.x},${K.y+12}`,fill:ne,opacity:.2})]}),o.jsx("rect",{x:K.x-28,y:K.y-16,width:56,height:20,rx:10,fill:"rgba(0,0,0,0.45)",stroke:ne,strokeWidth:1.5}),o.jsx("text",{x:K.x,y:K.y-6,fill:re,fontSize:10,fontWeight:900,textAnchor:"middle",dominantBaseline:"central",style:{letterSpacing:.6},children:ie})]},`lbl-${G}-${V}-${z.id}-${H.id}`));const q=Math.max(10,r*.42),dt=.5+.5*Math.sin(i/(400/g));W.push(o.jsxs("g",{opacity:.85,children:[o.jsx("circle",{cx:z.x,cy:z.y,r:q,stroke:re,strokeWidth:2,fill:"none",strokeDasharray:"6 6"}),o.jsx("circle",{cx:z.x,cy:z.y,r:q*(.82+.04*dt),stroke:ne,strokeWidth:1.5,fill:"none",opacity:.6})]},`ha-${z.id}`)),W.push(o.jsxs("g",{opacity:.85,children:[o.jsx("circle",{cx:H.x,cy:H.y,r:q,stroke:re,strokeWidth:2,fill:"none",strokeDasharray:"6 6"}),o.jsx("circle",{cx:H.x,cy:H.y,r:q*(.82+.04*dt),stroke:ne,strokeWidth:1.5,fill:"none",opacity:.6})]},`hb-${H.id}`));for(let wr=0;wr<3;wr++){const Mi=(h+wr*.33)%1,Yn=A(z.x,z.y,F,L,H.x,H.y,Mi);D.push(o.jsx("circle",{cx:Yn.x,cy:Yn.y,r:2.5,fill:re,opacity:.85},`pt-${G}-${V}-${z.id}-${H.id}-${wr}`))}const kr=_(z.x,z.y,F,L,H.x,H.y,.08),Qn=_(z.x,z.y,F,L,H.x,H.y,.92),tl=(wr,Mi,Yn,rf,nf)=>o.jsx("g",{opacity:.9,children:o.jsx("g",{transform:`translate(${wr}, ${Mi}) rotate(${(Math.atan2(rf,Yn)*180/Math.PI).toFixed(1)})`,children:o.jsx("polygon",{points:"0,0 8,3 8,-3",fill:ne,opacity:.8})})},nf);Q.push(tl(z.x+kr.x*10,z.y+kr.y*10,kr.x,kr.y,`capA-${z.id}-${H.id}`)),Q.push(tl(H.x-Qn.x*10,H.y-Qn.y*10,-Qn.x,-Qn.y,`capB-${z.id}-${H.id}`))}}return O.length===0?null:o.jsxs("svg",{width:v,height:y,style:{position:"absolute",inset:8,pointerEvents:a==="prep"?"none":"auto"},children:[O,$,W,D,Q,k.length>0&&o.jsxs("g",{children:[o.jsx("rect",{x:8,y:8,width:220,height:18+k.length*14,rx:8,fill:"rgba(0,0,0,0.6)",stroke:"#ffffff22",strokeWidth:1}),o.jsx("text",{x:18,y:20,fill:"#ffffff",fontSize:11,fontWeight:900,children:"Trios Active"}),k.map((G,V)=>o.jsx("text",{x:18,y:36+V*14,fill:"#e5e7eb",fontSize:10,children:G},G))]}),c&&o.jsxs("g",{children:[o.jsx("rect",{x:c.x-80,y:c.y-42,width:160,height:36,rx:8,fill:"rgba(0,0,0,0.7)",stroke:"#ffffff22",strokeWidth:1}),o.jsx("text",{x:c.x,y:c.y-30,fill:"#ffffff",fontSize:11,fontWeight:900,textAnchor:"middle",children:c.label}),o.jsx("text",{x:c.x,y:c.y-16,fill:"#e5e7eb",fontSize:10,textAnchor:"middle",children:m[c.label]||""})]})]})}function B0(e){const{r:t,c:r,unitId:n,cellSize:a,allowDrop:i,isCombat:s,onDropUnit:c,onClear:l,onHover:u,onUnhover:x}=e,[f,v]=ae.useState(!1);return o.jsx("div",{onDragOver:y=>{i&&(y.preventDefault(),y.dataTransfer.dropEffect="move")},onDrop:y=>{y.preventDefault();const g=y.dataTransfer.getData("text/plain");v(!1),g&&i&&c(g)},onDragEnter:()=>i&&v(!0),onDragLeave:()=>v(!1),onMouseEnter:()=>u&&u(),onMouseLeave:()=>x&&x(),style:{background:t<Math.floor(at/2)?"linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 60%), rgba(14, 165, 233, 0.22)":"linear-gradient(135deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0) 60%), rgba(99, 102, 241, 0.18)",border:t<Math.floor(at/2)?"1px solid rgba(14, 165, 233, 0.45)":"1px solid rgba(99, 102, 241, 0.4)",borderRadius:6,width:a,height:a,position:"relative",boxShadow:f?"0 0 0 2px rgba(14,165,233,0.7) inset":void 0,opacity:i||n?1:.6,boxSizing:"border-box",backgroundSize:"200% 200%",animation:"bgShift 12s linear infinite"},children:n?s?o.jsx("div",{}):o.jsx("div",{style:{position:"absolute",inset:2},children:o.jsx(ef,{unitId:n,compact:!0})}):o.jsx("div",{})})}function D0(){const e=N(g=>g.bench),t=N(g=>g.board),r=N(g=>g.units),n=N(g=>g.moveUnitToBoard),a=N(g=>g.sellUnit),i=N(g=>g.phase),s=N(g=>g.storeUnit),[c,l]=ae.useState(!1),u=ae.useMemo(()=>{const g=new Set;for(const[,d]of Object.entries(t)){if(!d)continue;const w=r[d];w&&w.team==="player"&&g.add(w.templateKey)}return g},[t,r]),x=ae.useMemo(()=>[["frost","marksman"],["paladin","sorcerer"],["assassin","rogue"],["guardian","cleric"],["hunter","beastmaster"],["spear","phalanx"],["mage","warlock"],["druid","monk"],["sniper","marksman"],["ballista","sentry"],["icearcher","frost"],["knight","templar"],["valkyrie","paladin"],["archer","crossbow"],["sorcerer","stormcaller"],["warrior","berserker"],["assassin","duelist"],["pikeman","javelin"],["guardian","paladin"],["valkyrie","templar"],["knight","guardian"],["paladin","templar"],["mage","frost"],["warlock","witch"],["sniper","crossbow"],["druid","beastmaster"],["cleric","medic"],["gladiator","champion"],["knight","paladin"],["archer","hunter"],["warlock","mystic"],["ballista","slinger"]],[]),f=ae.useMemo(()=>[["knight","paladin","templar"],["archer","marksman","sniper"],["guardian","champion","gladiator"],["druid","monk","paladin"],["sorcerer","warlock","witch"],["pikeman","phalanx","spear"],["cleric","monk","medic"],["mage","sorcerer","stormcaller"],["rogue","assassin","duelist"],["guardian","shieldbearer","shieldman"],["frost","icearcher","mystic"],["ballista","sentry","slinger"],["hunter","archer","beastmaster"]],[]),v=ae.useMemo(()=>{const g={};for(const d of e){const w=r[d];if(!w)continue;let h=!1,p;for(const[k,A]of x){if(w.templateKey===k&&u.has(A)){h=!0,p=A;break}if(w.templateKey===A&&u.has(k)){h=!0,p=k;break}}let m=!1;for(const[k,A,_]of f){if(w.templateKey===k&&u.has(A)&&u.has(_)){m=!0;break}if(w.templateKey===A&&u.has(k)&&u.has(_)){m=!0;break}if(w.templateKey===_&&u.has(k)&&u.has(A)){m=!0;break}}g[d]={canPair:h,partner:p,canTrio:m}}return g},[e,r,u,x,f]),y=ae.useMemo(()=>{const g=w=>{const h=v[w];return(h!=null&&h.canTrio?2:0)+(h!=null&&h.canPair?1:0)},d=w=>{var h,p;return((p=te[((h=r[w])==null?void 0:h.templateKey)||"recruit"])==null?void 0:p.cost)||0};return[...e].sort((w,h)=>{const p=g(w),m=g(h);if(m!==p)return m-p;const k=d(w),A=d(h);return A!==k?A-k:0})},[e,v,r]);return o.jsxs("div",{onDragOver:g=>{i==="prep"&&(g.preventDefault(),g.dataTransfer.dropEffect="move")},onDragEnter:()=>i==="prep"&&l(!0),onDragLeave:()=>l(!1),onDrop:g=>{if(g.preventDefault(),l(!1),i!=="prep")return;const d=g.dataTransfer.getData("text/plain");d&&s(d)},style:{background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:12,padding:8,marginTop:8,boxShadow:"var(--shadow)",transition:"box-shadow 120ms ease",boxSizing:"border-box"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:6,color:"var(--text)"},children:[o.jsx("div",{style:{fontWeight:800},children:"Bench"}),o.jsxs("div",{style:{marginLeft:"auto",fontSize:12,color:"var(--muted)"},children:[e.length," slot(s)"]})]}),o.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap",boxShadow:c?"inset 0 0 0 2px rgba(14,165,233,0.45)":void 0,borderRadius:10,padding:c?4:0},children:[y.map(g=>{var w,h,p;const d=v[g];return o.jsxs("div",{style:{position:"relative"},children:[o.jsx(ef,{unitId:g,draggable:!0,onDropToBoard:m=>i==="prep"&&n(g,m),onSell:()=>i==="prep"&&a(g)}),d!=null&&d.canTrio?o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",borderRadius:10,boxShadow:"0 0 0 2px rgba(167,139,250,0.9), 0 0 26px rgba(167,139,250,0.6) inset"}}),o.jsx("div",{style:{position:"absolute",top:-8,left:-8,background:"#a78bfa",color:"#0b1020",fontWeight:900,fontSize:10,padding:"2px 6px",borderRadius:6,border:"1px solid #6d28d9",pointerEvents:"none"},title:"Placing this will activate a trio synergy",children:"TRIO READY"})]}):(d==null?void 0:d.canPair)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",borderRadius:10,boxShadow:"0 0 0 2px rgba(250,204,21,0.8), 0 0 22px rgba(250,204,21,0.6) inset"}}),o.jsx("div",{style:{position:"absolute",top:-8,left:-8,background:"#facc15",color:"#111827",fontWeight:900,fontSize:10,padding:"2px 6px",borderRadius:6,border:"1px solid #b45309",pointerEvents:"none"},title:`Placing this will activate a duo synergy with ${((w=te[d.partner])==null?void 0:w.name)||d.partner}`,children:`DUO READY WITH ${((p=(h=te[d.partner])==null?void 0:h.name)==null?void 0:p.toUpperCase())||(d.partner||"").toUpperCase()}`})]})]},g)}),e.length===0&&o.jsx("div",{style:{color:"var(--muted)",fontSize:12},children:"Empty"})]})]})}function W0(){const e=N(h=>h.shop),t=N(h=>h.gold),r=N(h=>h.level),n=N(h=>h.shopLocked),a=N(h=>h.xp),i=N(h=>h.buyXp),s=N(h=>h.board),c=N(h=>h.units),l=N(h=>h.bench);N(h=>h.buyUnit);const u=N(h=>h.reroll);N(h=>h.shopFrozen??{});const x=N(h=>h.shopFocusTrait),f=ae.useMemo(()=>{const h=new Set;for(const[,p]of Object.entries(s)){if(!p)continue;const m=c[p];m&&m.team==="player"&&h.add(m.templateKey)}for(const p of l){const m=c[p];m&&m.team==="player"&&h.add(m.templateKey)}return h},[s,l,c]),v=ae.useMemo(()=>{const h={},p=m=>{const k=zt(m);for(const A of k)h[A]=(h[A]??0)+1};for(const[,m]of Object.entries(s)){if(!m)continue;const k=c[m];k&&k.team==="player"&&p(k.templateKey)}for(const m of l){const k=c[m];k&&k.team==="player"&&p(k.templateKey)}return h},[s,l,c]),y=ae.useMemo(()=>{const h={},p=m=>{h[m]=(h[m]??0)+1};for(const[,m]of Object.entries(s)){if(!m)continue;const k=c[m];k&&k.team==="player"&&p(k.templateKey)}for(const m of l){const k=c[m];k&&k.team==="player"&&p(k.templateKey)}return h},[s,l,c]),g=ae.useMemo(()=>[["frost","marksman","Shatter"],["paladin","sorcerer","Sanctified Nova"],["assassin","rogue","Backstab Bleed"],["guardian","cleric","Bulwark"],["hunter","beastmaster","Pack Volley"],["spear","phalanx","Impale"],["mage","warlock","Arcane Ruin"],["druid","monk","Purify"],["sniper","marksman","Headshot"],["ballista","sentry","Overwatch"],["icearcher","frost","Deep Freeze"],["knight","templar","Holy Bash"],["valkyrie","paladin","Judgement"]],[]),d=h=>h>=6?3:h>=4?2:h>=2?1:0,w=h=>h<2?2:h<4?4:(h<6,6);return o.jsxs("div",{style:{padding:12},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[o.jsx("div",{style:{fontWeight:600},children:"Shop"}),o.jsxs("div",{style:{fontSize:12,color:"var(--muted)"},children:["Gold: ",o.jsx("span",{style:{color:"var(--accent)",fontWeight:700},children:t}),"  Lv ",r]})]}),o.jsx("div",{style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))"},children:e.map(h=>{let p=0;for(const[,$]of Object.entries(s)){if(!$)continue;const W=c[$];!W||W.team!=="player"||W.templateKey===h.templateKey&&p++}const m=p>0,k=zt(h.templateKey),A=[];for(const $ of k){const W=v[$]??0,D=W+1,Q=d(W),G=d(D);if(G>Q)A.push({trait:$,from:W,to:D,fromTier:Q,toTier:G,need:0});else{const V=Math.max(0,w(W)-D);A.push({trait:$,from:W,to:D,fromTier:Q,toTier:G,need:V})}}let _;for(const[$,W,D]of g){if(h.templateKey===$&&f.has(W)){_={label:D,pair:[$,W]};break}if(h.templateKey===W&&f.has($)){_={label:D,pair:[$,W]};break}}const O=y[h.templateKey]||0;return o.jsx(H0,{item:h,gold:t,focusTrait:x,isOnBoard:m,onBoardCount:p,synergy:{traitUps:A,duo:_,dupCount:O}},h.id)})}),o.jsxs("div",{style:{marginTop:10,display:"flex",gap:10,alignItems:"center",flexWrap:"wrap"},children:[o.jsx(Mc,{label:"Reroll (2g)",onClick:()=>u(),disabled:n||t<2,accent:$c("--accent"),pulse:!n&&t>=2,variant:"filled"}),o.jsx(K0,{}),o.jsxs("div",{style:{marginLeft:"auto",display:"grid",gap:6,minWidth:240,flex:"1 1 260px"},children:[o.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"},children:[o.jsxs("span",{style:{fontSize:12,color:"var(--muted)"},children:["XP ",a,"/",Cc(r)]}),o.jsx(Mc,{label:"Buy XP (4g)",onClick:()=>i(),disabled:t<4,accent:$c("--ok"),pulse:t>=4,variant:"filled"})]}),o.jsx("div",{style:{position:"relative",height:6,background:"rgba(0,0,0,0.15)",borderRadius:999,border:"1px solid var(--panel-border)",overflow:"hidden"},children:o.jsx("div",{style:{position:"absolute",inset:1,width:`${Math.min(100,Math.max(0,a/Cc(r)*100))}%`,background:"linear-gradient(90deg, #38bdf8, #0ea5e9)",borderRadius:999}})})]})]})]})}function tf(e){switch(e==null?void 0:e.type){case"cleave":return`Cleave: splash ${Math.round(e.ratio*100)}% dmg`;case"multishot":return`Multishot: +${e.extraTargets} tgt @ ${Math.round(e.ratio*100)}%`;case"stunOnHit":return`On-hit Stun: ${Math.round(e.chance*100)}% for ${(e.durationMs/1e3).toFixed(1)}s`;case"slowOnHit":return`On-hit Slow: ${Math.round(e.chance*100)}% to ${Math.round((e.factor||1)*100)}% for ${(e.durationMs/1e3).toFixed(1)}s`;case"healPulse":return`Heal Pulse: ${(e.cooldownMs/1e3).toFixed(1)}s CD, heal ${e.amount}`;case"pierce":return`Pierce: ${Math.round(e.ratio*100)}% next target`;default:return"None"}}function H0({item:e,gold:t,focusTrait:r,isOnBoard:n,onBoardCount:a,synergy:i}){var _,O,$;const s=te[e.templateKey],c=N(W=>!!(W.shopFrozen??{})[e.id]),l=N(W=>W.buyUnit),u=we(e.templateKey),x=!!(r&&zt(e.templateKey).includes(r)),[f,v]=ae.useState(!1),[y,g]=ae.useState(!1),[d,w]=ae.useState(!1),h=V0(s.cost),p=ae.useRef(null),m=((i==null?void 0:i.traitUps)||[]).some(W=>W.toTier>W.fromTier),k=!!(i!=null&&i.duo),A=((i==null?void 0:i.dupCount)||0)>=1;return ae.useEffect(()=>{if(f)try{const W=p.current;if(W){const D=W.getBoundingClientRect();w(D.right+260>window.innerWidth-8)}}catch{}},[f]),ae.useEffect(()=>{let W;return!f&&y&&(W=setTimeout(()=>g(!1),250)),()=>W&&clearTimeout(W)},[f,y]),o.jsxs("div",{ref:p,role:"button",tabIndex:0,onKeyDown:W=>{(W.key==="Enter"||W.key===" ")&&t>=e.cost&&l(e.id)},onClick:()=>{t>=e.cost&&l(e.id)},onMouseEnter:()=>{v(!0),g(!0)},onMouseLeave:()=>v(!1),style:{display:"grid",gridTemplateRows:"auto auto 1fr auto",alignItems:"center",gap:6,textAlign:"left",padding:"10px 12px",position:"relative",background:`linear-gradient(160deg, ${u.secondary} 0%, ${u.primary} 100%)`,color:"#ffffff",border:k?"2px solid #facc15":m?"2px solid #0ea5e9":x?"2px solid #f59e0b":`1px solid ${u.accent}`,borderRadius:10,cursor:t>=e.cost?"pointer":"not-allowed",opacity:t>=e.cost?1:.7,boxShadow:c?`0 0 0 2px ${u.accent}55 inset`:k?"0 0 0 3px rgba(250,204,21,0.55) inset, 0 0 44px rgba(250,204,21,0.65)":m?"0 0 0 3px rgba(14,165,233,0.5) inset, 0 0 36px rgba(14,165,233,0.6)":x?"0 0 0 3px rgba(245,158,11,0.55) inset, 0 0 42px rgba(245,158,11,0.75)":"0 8px 22px rgba(0,0,0,0.18)",transform:f?"translateY(-2px) scale(1.01)":"none",transition:"transform 160ms ease, box-shadow 160ms ease"},children:[o.jsx("span",{style:{position:"absolute",inset:0,borderRadius:10,background:"linear-gradient(180deg, rgba(0,0,0,0.14), rgba(0,0,0,0.22))",pointerEvents:"none"}}),o.jsx("div",{style:{position:"absolute",top:-6,right:-6,transform:"rotate(8deg)",pointerEvents:"none"},children:o.jsx("span",{style:{padding:"2px 6px",fontSize:10,fontWeight:900,color:h.fg,background:h.bg,border:`1px solid ${h.border}`,borderRadius:6,textTransform:"uppercase",letterSpacing:.6},children:h.label})}),n&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{position:"absolute",top:-4,left:-4,background:"#22c55e",color:"#052e16",fontWeight:900,fontSize:10,padding:"2px 8px",borderRadius:6,border:"1px solid #16a34a",boxShadow:"0 6px 14px rgba(34,197,94,0.45)"},children:["MATCH",a&&a>1?` x${a}`:""]}),o.jsxs("svg",{width:64,height:64,style:{position:"absolute",top:-12,right:-12,opacity:.18,pointerEvents:"none"},children:[o.jsx("circle",{cx:32,cy:32,r:20,fill:"#22c55e"}),o.jsx("polyline",{points:"20,34 28,42 44,24",fill:"none",stroke:"#052e16",strokeWidth:6,strokeLinecap:"round",strokeLinejoin:"round"})]})]}),x&&o.jsxs(o.Fragment,{children:[o.jsx("span",{style:{position:"absolute",top:6,right:6,padding:"2px 6px",fontSize:10,fontWeight:900,color:"#111827",background:"#f59e0b",borderRadius:6,border:"1px solid #b45309"},children:"FOCUS"}),o.jsx("span",{style:{position:"absolute",inset:-2,borderRadius:12,boxShadow:"0 0 0 0 rgba(245,158,11,0.45)",animation:"focusPulse 1.2s ease-in-out infinite",pointerEvents:"none"}}),o.jsx("style",{children:"@keyframes focusPulse { 0% { box-shadow: 0 0 0 0 rgba(245,158,11,0.45); } 70% { box-shadow: 0 0 0 14px rgba(245,158,11,0); } 100% { box-shadow: 0 0 0 0 rgba(245,158,11,0); } }"})]}),k&&o.jsx("span",{style:{position:"absolute",top:6,left:6,padding:"2px 6px",fontSize:10,fontWeight:900,color:"#111827",background:"#facc15",borderRadius:6,border:"1px solid #b45309"},title:`Duo synergy: ${(_=i==null?void 0:i.duo)==null?void 0:_.pair.join(" + ")} (${(O=i==null?void 0:i.duo)==null?void 0:O.label})`,children:"DUO"}),o.jsx("span",{style:{fontWeight:800,textShadow:"0 1px 4px rgba(0,0,0,0.45)"},children:e.name}),o.jsxs("span",{style:{fontSize:12,color:"rgba(255,255,255,0.9)"},children:["HP ",s.stats.hp,"  ATK ",s.stats.atk,"  RNG ",s.stats.range]}),o.jsxs("span",{style:{fontSize:12,color:"rgba(255,255,255,0.95)"},children:["Ability: ",tf(s.ability)]}),o.jsxs("div",{style:{fontSize:11,color:"#ffffff",display:"flex",gap:6,flexWrap:"wrap"},children:[o.jsx(jr,{text:`Cost ${e.cost}g`,accent:u.accent}),o.jsx(jr,{text:s.stats.range>=3?"Ranged":s.stats.range===2?"Mid":"Melee",accent:u.accent}),x&&o.jsx(jr,{text:`Focus: ${r}`,accent:"#f59e0b"}),k&&o.jsx(jr,{text:`Duo: ${($=i==null?void 0:i.duo)==null?void 0:$.label}`,accent:"#facc15"}),A&&((i==null?void 0:i.dupCount)||0)>=2&&o.jsx(jr,{text:"Complete 2",accent:"#22c55e"}),A&&((i==null?void 0:i.dupCount)||0)===1&&o.jsx(jr,{text:"Makes Pair",accent:"#a3e635"})]}),i&&i.traitUps.length>0&&o.jsx("div",{style:{display:"grid",gap:4,marginTop:4},children:i.traitUps.map((W,D)=>{const Q=W.toTier>W.fromTier,G=Q?`${W.trait} ${W.fromTier===0?"":W.fromTier===1?"I":W.fromTier===2?"II":"III"}${W.toTier===1?"I":W.toTier===2?"II":"III"}`:`${W.trait} +1 (toward next tier)`;return o.jsx("div",{style:{fontSize:11,color:Q?"#0ea5e9":"#e5e7eb"},children:G},D)})}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("span",{style:{fontWeight:900,color:u.accent,textShadow:"0 1px 4px rgba(0,0,0,0.4)"},children:[e.cost,"g"]}),o.jsx(G0,{id:e.id,frozen:c})]}),(f||y)&&o.jsx(U0,{templateKey:e.templateKey,flip:d})]})}function U0({templateKey:e,flip:t}){const r=te[e],n=r.stats,a=n.range>=3?"Ranged":n.range===2?"Mid":"Melee",i=r.ability?tf(r.ability):"None",s={position:"absolute",zIndex:30,pointerEvents:"none",minWidth:220,maxWidth:260,background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:10,color:"var(--text)",boxShadow:"var(--shadow)",padding:10,lineHeight:1.25,top:0,left:t?void 0:"100%",right:t?"100%":void 0,marginLeft:t?void 0:8,marginRight:t?8:void 0};return o.jsxs("div",{style:s,children:[o.jsx("div",{style:{fontWeight:800,marginBottom:4},children:r.name}),o.jsxs("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:6},children:[a,"  Cost ",r.cost,"g"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",columnGap:8,rowGap:4,fontSize:12},children:[o.jsx("span",{style:{color:"var(--muted)"},children:"HP"}),o.jsx("span",{children:n.hp}),o.jsx("span",{style:{color:"var(--muted)"},children:"ATK"}),o.jsx("span",{children:n.atk}),o.jsx("span",{style:{color:"var(--muted)"},children:"RNG"}),o.jsx("span",{children:n.range}),o.jsx("span",{style:{color:"var(--muted)"},children:"Atk CD"}),o.jsxs("span",{children:[(n.atkIntervalMs/1e3).toFixed(2),"s"]}),o.jsx("span",{style:{color:"var(--muted)"},children:"Move CD"}),o.jsxs("span",{children:[(n.moveIntervalMs/1e3).toFixed(2),"s"]}),o.jsx("span",{style:{color:"var(--muted)"},children:"Ability"}),o.jsx("span",{children:i})]}),o.jsx("div",{style:{marginTop:6,fontSize:11,color:"var(--muted)"},children:"Hover shows base stats; star scaling applies after purchase/combines."})]})}function Mc({label:e,onClick:t,disabled:r,accent:n,pulse:a,variant:i}){const s=i==="filled",c=s?"#ffffff":"var(--text)",l={padding:"10px 16px",borderRadius:10,border:`1px solid ${n}`,background:s?`linear-gradient(180deg, ${n}, ${n})`:`linear-gradient(180deg, ${n}2A, ${n}14)`,color:c,fontWeight:800,letterSpacing:.4,cursor:r?"default":"pointer",boxShadow:s?`0 8px 22px ${n}55, inset 0 0 0 1px ${n}44`:`0 8px 20px ${n}22, inset 0 0 0 1px ${n}22`,position:"relative",overflow:"hidden",transition:"transform 120ms ease, box-shadow 120ms ease, opacity 120ms ease, filter 120ms ease",opacity:r?.6:1,whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",justifyContent:"center"};return o.jsxs("button",{onClick:r?void 0:t,disabled:r,onMouseDown:u=>{u.currentTarget.style.transform="translateY(1px) scale(0.995)"},onMouseUp:u=>{u.currentTarget.style.transform="translateY(0) scale(1)"},style:l,children:[s&&!r&&o.jsx("span",{style:{position:"absolute",inset:-6,borderRadius:14,filter:"blur(10px)",background:n,opacity:.34,pointerEvents:"none"}}),a&&o.jsx("span",{style:{position:"absolute",inset:-2,borderRadius:12,boxShadow:`0 0 0 0 ${s?"#ffffff66":n+"66"}`,animation:"pulseGlow 1.3s ease-in-out infinite",pointerEvents:"none"}}),o.jsx("span",{style:{position:"relative"},children:e}),o.jsx("style",{children:`@keyframes pulseGlow { 0% { box-shadow: 0 0 0 0 ${s?"#ffffff66":n+"66"}; } 70% { box-shadow: 0 0 0 12px ${s?"#ffffff00":n+"00"}; } 100% { box-shadow: 0 0 0 0 ${s?"#ffffff00":n+"00"}; } }`})]})}function $c(e){try{const t=getComputedStyle(document.documentElement).getPropertyValue(e);return t&&t.trim().length?t.trim():"#0ea5e9"}catch{return"#0ea5e9"}}function K0(){const e=N(r=>r.shopLocked),t=ae.useCallback(r=>{N.setState(n=>({...n,shopLocked:r}))},[]);return o.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:12,color:"#aeb4c6"},children:[o.jsx("input",{type:"checkbox",checked:!!e,onChange:r=>t(r.target.checked)}),"Lock shop"]})}function Cc(e){return 4+e*2}function V0(e){return e>=5?{label:"Legendary",bg:"linear-gradient(180deg, #f59e0b, #facc15)",border:"#b45309",fg:"#1f2937"}:e===4?{label:"Epic",bg:"linear-gradient(180deg, #8b5cf6, #a78bfa)",border:"#6d28d9",fg:"#111827"}:e===3?{label:"Rare",bg:"linear-gradient(180deg, #38bdf8, #0ea5e9)",border:"#0369a1",fg:"#0b1220"}:{label:"Common",bg:"linear-gradient(180deg, #e5e7eb, #cbd5e1)",border:"#94a3b8",fg:"#111827"}}function G0({id:e,frozen:t}){const r=ae.useCallback(()=>{N.setState(n=>({...n,shopFrozen:{...n.shopFrozen??{},[e]:!t}}))},[e,t]);return o.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6,fontSize:11,cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:t,onChange:r}),t?"Frozen":"Freeze"]})}function jr({text:e,accent:t}){const r=t||"var(--panel-border)",n=t?`${t}33`:"rgba(14,165,233,0.12)";return o.jsx("span",{style:{padding:"2px 6px",border:`1px solid ${r}`,borderRadius:999,background:n},children:e})}function Q0(){const e=N(x=>x.phase),t=N(x=>x.startCombat),r=N(x=>x.nextRound),n=N(x=>x.cellSize),a=N(x=>x.setCellSize),i=N(x=>x.combatSpeed||.5),s=N(x=>x.setCombatSpeed),c=N(x=>x.round),l=N(x=>x.paused||!1),u=N(x=>x.togglePause);return o.jsxs("div",{style:{marginTop:8},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:10},children:[e==="prep"&&o.jsx(pa,{label:`Start Combat  R${c}`,accent:"var(--accent)",variant:"filled",onClick:()=>t()}),e==="combat"&&o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx(pa,{label:l?"Resume":"Pause",accent:l?"#22c55e":"#f59e0b",variant:"filled",onClick:()=>u&&u()}),o.jsx(pa,{label:l?"Paused":"Simulating",accent:"#9aa3b2",variant:"filled",disabled:!0,pulse:!l})]}),e==="result"&&o.jsx(pa,{label:"Next Round",accent:"#22c55e",variant:"filled",pulse:!0,onClick:()=>r()})]}),o.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",justifyContent:"flex-end",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontSize:12,color:"var(--muted)"},children:"Board size"}),o.jsx("input",{type:"range",min:48,max:240,step:2,value:n,onChange:x=>a(Number(x.target.value))}),o.jsxs("span",{style:{width:36,textAlign:"right",fontSize:12},children:[n,"px"]}),o.jsx("span",{style:{marginLeft:14,fontSize:12,color:"var(--muted)"},children:"Speed"}),o.jsx("input",{type:"range",min:.1,max:4,step:.05,value:i,onChange:x=>s&&s(Math.max(.1,Math.min(4,Number(x.target.value))))}),o.jsxs("span",{style:{width:36,textAlign:"right",fontSize:12},children:[i.toFixed(2),"x"]})]})]})}function pa({label:e,onClick:t,disabled:r,accent:n,pulse:a,variant:i}){const s=i==="filled",c={padding:"12px 18px",minHeight:40,borderRadius:12,border:`1px solid ${n}`,background:s?`linear-gradient(180deg, ${n}, ${n})`:`linear-gradient(180deg, ${n}2A, ${n}14)`,color:s?"#ffffff":"var(--text)",fontWeight:900,fontSize:14,letterSpacing:.6,cursor:r?"default":"pointer",boxShadow:s?`0 8px 24px ${n}55, 0 0 0 1px ${n}55 inset`:`0 8px 20px ${n}22, inset 0 0 0 1px ${n}22`,position:"relative",overflow:"hidden",transition:"transform 120ms ease, box-shadow 120ms ease, filter 120ms ease",userSelect:"none",whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",justifyContent:"center",maxWidth:"100%",flex:"0 0 auto",animation:a&&!r?"btnPulse 1.4s ease-in-out infinite":void 0,gap:8};return o.jsxs("button",{onClick:r?void 0:t,disabled:r,onMouseDown:l=>{l.currentTarget.style.transform="translateY(1px) scale(0.995)"},onMouseUp:l=>{l.currentTarget.style.transform="translateY(0) scale(1)"},onMouseEnter:l=>{l.currentTarget.style.transform="translateY(0) scale(1.03) rotate(-0.4deg)",l.currentTarget.style.filter="brightness(1.06) saturate(1.2)"},onMouseLeave:l=>{l.currentTarget.style.transform="translateY(0) scale(1)",l.currentTarget.style.filter="none"},style:c,children:[s&&!r&&o.jsx("span",{style:{position:"absolute",inset:-6,borderRadius:16,filter:"blur(12px)",background:"var(--accent)",opacity:.35,pointerEvents:"none"}}),o.jsx("span",{style:{position:"absolute",top:0,left:0,right:0,height:"46%",background:"linear-gradient(180deg, rgba(255,255,255,0.25), rgba(255,255,255,0))",pointerEvents:"none"}}),o.jsx("span",{style:{position:"absolute",inset:0,background:"repeating-linear-gradient( 45deg, rgba(255,255,255,0.08) 0px, rgba(255,255,255,0.08) 2px, transparent 2px, transparent 8px )",mixBlendMode:"overlay",backgroundSize:"200% 200%",animation:"slantMove 6s linear infinite",pointerEvents:"none"}}),a&&!r&&o.jsxs(o.Fragment,{children:[o.jsx("span",{style:{position:"absolute",inset:-3,borderRadius:14,boxShadow:`0 0 18px ${n}88, 0 0 36px ${n}55`,pointerEvents:"none"}}),o.jsx("span",{style:{position:"absolute",top:0,left:"-30%",width:"30%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.35), transparent)",transform:"skewX(-20deg)",animation:"sheen 1.8s linear infinite",pointerEvents:"none"}})]}),s&&!r&&o.jsxs(o.Fragment,{children:[o.jsx("span",{style:{position:"absolute",top:6,left:10,width:6,height:6,borderRadius:999,background:"#fff",filter:"blur(0.5px)",opacity:.85,animation:"spark 1.8s ease-in-out infinite"}}),o.jsx("span",{style:{position:"absolute",bottom:6,right:12,width:5,height:5,borderRadius:999,background:"#fff",filter:"blur(0.5px)",opacity:.85,animation:"spark 2.2s 0.4s ease-in-out infinite"}}),o.jsx("span",{style:{position:"absolute",top:10,right:18,width:4,height:4,borderRadius:999,background:"#fff",filter:"blur(0.5px)",opacity:.8,animation:"spark 2.6s 0.2s ease-in-out infinite"}})]}),o.jsxs("span",{style:{position:"relative",display:"inline-flex",alignItems:"center",gap:8},children:[e.toLowerCase().includes("start")&&o.jsx("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"#fff","aria-hidden":!0,children:o.jsx("path",{d:"M8 5v14l11-7z"})}),e.toLowerCase().includes("next")&&o.jsx("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"#fff","aria-hidden":!0,children:o.jsx("path",{d:"M12 4l1.41 1.41L8.83 10H20v2H8.83l4.58 4.59L12 18l-8-8 8-8z"})}),e.toLowerCase().includes("simulating")&&o.jsx("svg",{width:16,height:16,viewBox:"0 0 24 24",fill:"#fff","aria-hidden":!0,children:o.jsx("path",{d:"M12 6v12m-6-6h12",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e]}),o.jsx("style",{children:`
        @keyframes btnPulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        @keyframes sheen { 0% { left: -30%; } 100% { left: 130%; } }
        @keyframes slantMove { 0% { background-position: 0% 0%; } 100% { background-position: 200% 200%; } }
        @keyframes spark { 0%, 100% { transform: scale(0.8); opacity: 0.55; } 50% { transform: scale(1.15); opacity: 1; } }
      `})]})}const Y0=[{a:"frost",b:"marksman",name:"Shatter",desc:"Bonus damage to slowed enemies with icy burst."},{a:"paladin",b:"sorcerer",name:"Sanctified Nova",desc:"Paladin pulses also damage nearby foes."},{a:"assassin",b:"rogue",name:"Backstab Bleed",desc:"Isolated targets suffer heavy bleed."},{a:"guardian",b:"cleric",name:"Bulwark Blessing",desc:"Heal pulses also grant shields."},{a:"hunter",b:"beastmaster",name:"Pack Volley",desc:"Rangers fire an extra weaker shot."},{a:"spear",b:"phalanx",name:"Impale",desc:"Bonus damage to the cell behind the target."},{a:"mage",b:"warlock",name:"Arcane Ruin",desc:"Splash damage around the struck target."},{a:"druid",b:"monk",name:"Purifying Grove",desc:"Cleanse and small extra heal on pulses."},{a:"sniper",b:"marksman",name:"Headshot",desc:"Chance to massively amplify a ranged hit."},{a:"ballista",b:"sentry",name:"Overwatch",desc:"Auto-fire at a random enemy after a hit."},{a:"icearcher",b:"frost",name:"Deep Freeze",desc:"Slow may briefly stun on hit."},{a:"knight",b:"templar",name:"Holy Bash",desc:"Smite in a small cone behind the target."},{a:"valkyrie",b:"paladin",name:"Judgement",desc:"On kill, smite adjacent enemies."},{a:"archer",b:"crossbow",name:"Volley Spread",desc:"Fires extra arrows to up to two nearby enemies."},{a:"sorcerer",b:"stormcaller",name:"Chain Bolt",desc:"Lightning arcs from the struck target to a nearby enemy."},{a:"warrior",b:"berserker",name:"Rage Shock",desc:"Extra shock damage on melee hits plus brief screen shake."},{a:"assassin",b:"duelist",name:"Lunge",desc:"Brief slow on low-HP enemies when hit."},{a:"pikeman",b:"javelin",name:"Long Reach",desc:"Extra spear jab to the same target."},{a:"guardian",b:"paladin",name:"Aegis",desc:"Heal pulses grant brief damage reduction."},{a:"valkyrie",b:"templar",name:"Wings",desc:"Smite ring on Valkyrie melee hits."},{a:"knight",b:"guardian",name:"Wall",desc:"Shield ally directly behind the attacker."},{a:"paladin",b:"templar",name:"Holy Radiance",desc:"Radiant ring at Paladin on heal pulse."},{a:"mage",b:"frost",name:"Glacier",desc:"Frost ring + bonus damage vs slowed enemies."},{a:"warlock",b:"witch",name:"Hex",desc:"Brief slow on hit with arcane visuals."},{a:"sniper",b:"crossbow",name:"Piercing Round",desc:"Attempts to hit the enemy behind the target."},{a:"druid",b:"beastmaster",name:"Pack Mending",desc:"Beastmaster hit heals a nearby ally."},{a:"cleric",b:"medic",name:"Field Triage",desc:"Heal lowest-HP nearby ally on pulse."},{a:"gladiator",b:"champion",name:"Arena Roar",desc:"Damage adjacent enemies around the target."},{a:"knight",b:"paladin",name:"Oathkeeper",desc:"Knight gains a small shield on hit."},{a:"archer",b:"hunter",name:"Falcon Volley",desc:"Extra arrow to the same target."},{a:"warlock",b:"mystic",name:"Hexburst",desc:"Bonus damage if target is slowed or stunned."},{a:"ballista",b:"slinger",name:"Explosive Load",desc:"Small AoE around the target."},{a:"druid",b:"paladin",name:"Blessed Grove",desc:"Extra small heal and ring on allies in radius when Paladin heals."},{a:"sentry",b:"marksman",name:"Focus Fire",desc:"Chance to immediately refire at the same target."},{a:"guardian",b:"valkyrie",name:"Aerial Bulwark",desc:"Valkyrie gains shield when near Guardian in same column."},{a:"monk",b:"paladin",name:"Serenity",desc:"Monk gains small self heal after attacking."}],X0=[{a:"knight",b:"paladin",c:"templar",name:"Holy Triumvirate",desc:"Radiant beam + smite burst on hits."},{a:"archer",b:"marksman",c:"sniper",name:"Arrow Storm",desc:"Extra projectiles to two random targets."},{a:"guardian",b:"champion",c:"gladiator",name:"Phalanx Wall",desc:"Brief DR to adjacent allies with shock visuals."},{a:"druid",b:"monk",c:"paladin",name:"Sanctuary",desc:"Bigger extra heal + radiant-green overlay on pulses."},{a:"sorcerer",b:"warlock",c:"witch",name:"Chaos Nexus",desc:"Rune bursts damage enemies adjacent to the target."},{a:"pikeman",b:"phalanx",c:"spear",name:"Piercing Wall",desc:"Thrust damage continues up to two cells past target."},{a:"cleric",b:"monk",c:"medic",name:"Hymn of Life",desc:"Heal pulses add soft HoT ticks with verdant FX."},{a:"mage",b:"sorcerer",c:"stormcaller",name:"Tempest",desc:"Bolt + rune-beam combo adds bonus damage."},{a:"rogue",b:"assassin",c:"duelist",name:"Deathblossom",desc:"Melee hits apply rip strikes around the target."},{a:"guardian",b:"shieldbearer",c:"shieldman",name:"Iron Bulwark",desc:"On melee hit, pulse small shields to adjacent allies."},{a:"frost",b:"icearcher",c:"mystic",name:"Absolute Zero",desc:"Slow  chance to freeze and bonus damage with icy FX."},{a:"ballista",b:"sentry",c:"slinger",name:"Siege Network",desc:"Launch a bomb that deals small AoE on impact."},{a:"hunter",b:"archer",c:"beastmaster",name:"Pack Hunt",desc:"Chance to fire two extra weaker shots at the target."}];function q0({onClose:e}){return o.jsx("div",{style:xe.overlay,onClick:e,children:o.jsxs("div",{style:xe.modal,onClick:t=>t.stopPropagation(),children:[o.jsxs("div",{style:xe.header,children:[o.jsx("h2",{style:xe.title,children:"Synergy Book"}),o.jsx("button",{style:xe.closeButton,onClick:e,children:""})]}),o.jsxs("div",{style:xe.content,children:[o.jsxs("div",{style:xe.section,children:[o.jsx("h3",{style:xe.sectionTitle,children:"Trio Synergies"}),o.jsx("div",{style:xe.grid,children:X0.map(t=>o.jsxs("div",{style:xe.card,children:[o.jsxs("div",{style:xe.cardHeader,children:[o.jsx("div",{style:xe.cardTitle,children:t.name}),o.jsx("div",{style:xe.cardMembers,children:`${t.a} + ${t.b} + ${t.c}`})]}),o.jsx("div",{style:xe.cardDesc,children:t.desc})]},t.name))})]}),o.jsxs("div",{style:xe.section,children:[o.jsx("h3",{style:xe.sectionTitle,children:"Duo Synergies"}),o.jsx("div",{style:xe.grid,children:Y0.map(t=>o.jsxs("div",{style:xe.card,children:[o.jsxs("div",{style:xe.cardHeader,children:[o.jsx("div",{style:xe.cardTitle,children:t.name}),o.jsx("div",{style:xe.cardMembers,children:`${t.a} + ${t.b}`})]}),o.jsx("div",{style:xe.cardDesc,children:t.desc})]},t.name))})]})]})]})})}const xe={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},modal:{background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:"12px",width:"90%",maxWidth:"800px",height:"80vh",display:"flex",flexDirection:"column",boxShadow:"0 5px 15px rgba(0,0,0,0.3)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",borderBottom:"1px solid var(--panel-border)"},title:{margin:0,fontWeight:900,fontSize:"20px"},closeButton:{background:"transparent",border:"none",fontSize:"28px",cursor:"pointer",color:"var(--muted)"},content:{padding:"16px 24px",overflowY:"auto"},section:{marginBottom:"24px"},sectionTitle:{marginTop:0,marginBottom:"12px",borderBottom:"1px solid var(--panel-border)",paddingBottom:"8px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(220px, 1fr))",gap:"12px"},card:{background:"var(--panel-raised)",border:"1px solid var(--panel-border)",borderRadius:"8px",padding:"12px",display:"flex",flexDirection:"column",gap:"8px"},cardHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"8px"},cardTitle:{fontWeight:800,fontSize:"14px"},cardMembers:{fontSize:"11px",color:"var(--muted)",textTransform:"capitalize",flexShrink:0},cardDesc:{fontSize:"12px"}};function Z0(){const e=N(n=>n.board),t=N(n=>n.units),r=xt.useMemo(()=>{const n=new Map;for(const l of Object.values(e)){if(!l)continue;const u=t[l];!u||u.team!=="player"||n.set(u.templateKey,(n.get(u.templateKey)??0)+1)}const a=[["frost","marksman","Shatter","#60a5fa","#bae6fd"],["paladin","sorcerer","Sanctified Nova","#fde68a","#fbbf24"],["assassin","rogue","Backstab Bleed","#ef4444","#f59e0b"],["guardian","cleric","Bulwark Blessing","#60a5fa","#93c5fd"],["hunter","beastmaster","Pack Volley","#22c55e","#10b981"],["spear","phalanx","Impale","#67e8f9","#0ea5e9"],["mage","warlock","Arcane Ruin","#a78bfa","#7c3aed"],["druid","monk","Purifying Grove","#86efac","#bbf7d0"],["sniper","marksman","Headshot","#facc15","#f59e0b"],["ballista","sentry","Overwatch","#60a5fa","#1d4ed8"],["icearcher","frost","Deep Freeze","#93c5fd","#e0f2fe"],["knight","templar","Holy Bash","#fcd34d","#f59e0b"],["valkyrie","paladin","Judgement","#fde68a","#fbbf24"],["archer","crossbow","Volley Spread","#22c55e","#10b981"],["sorcerer","stormcaller","Chain Bolt","#a78bfa","#7c3aed"],["warrior","berserker","Rage Shock","#ef4444","#f59e0b"],["assassin","duelist","Lunge","#fca5a5","#f87171"],["pikeman","javelin","Long Reach","#67e8f9","#0ea5e9"],["guardian","paladin","Aegis","#60a5fa","#fde68a"],["valkyrie","templar","Wings","#fde68a","#f59e0b"],["knight","guardian","Wall","#93c5fd","#fcd34d"],["paladin","templar","Holy Radiance","#fcd34d","#fde68a"],["mage","frost","Glacier","#93c5fd","#a78bfa"],["warlock","witch","Hex","#a78bfa","#c4b5fd"],["sniper","crossbow","Piercing Round","#facc15","#f59e0b"],["druid","beastmaster","Pack Mending","#86efac","#10b981"],["cleric","medic","Field Triage","#22c55e","#86efac"],["gladiator","champion","Arena Roar","#f59e0b","#fcd34d"],["knight","paladin","Oathkeeper","#60a5fa","#fde68a"],["archer","hunter","Falcon Volley","#22c55e","#10b981"],["warlock","mystic","Hexburst","#a78bfa","#c4b5fd"],["ballista","slinger","Explosive Load","#f59e0b","#fbbf24"],["alchemist","cleric","Elixir","#86efac","#22c55e"],["gladiator","valkyrie","Skyfall","#fde68a","#f59e0b"],["rogue","mystic","Bewilder","#fca5a5","#a78bfa"],["guardian","champion","Bulwark Roar","#93c5fd","#fcd34d"],["druid","paladin","Blessed Grove","#86efac","#fde68a"],["sentry","marksman","Focus Fire","#60a5fa","#f59e0b"],["guardian","valkyrie","Aerial Bulwark","#93c5fd","#fde68a"],["monk","paladin","Serenity","#22c55e","#fde68a"]],i=[["knight","paladin","templar","Holy Triumvirate","#fde68a","#fbbf24"],["archer","marksman","sniper","Arrow Storm","#22c55e","#10b981"],["guardian","champion","gladiator","Phalanx Wall","#f59e0b","#93c5fd"],["druid","monk","paladin","Sanctuary","#86efac","#fde68a"],["sorcerer","warlock","witch","Chaos Nexus","#a78bfa","#7c3aed"],["pikeman","phalanx","spear","Piercing Wall","#67e8f9","#0ea5e9"],["cleric","monk","medic","Hymn of Life","#22c55e","#86efac"],["mage","sorcerer","stormcaller","Tempest","#a78bfa","#7c3aed"],["rogue","assassin","duelist","Deathblossom","#ef4444","#f87171"],["guardian","shieldbearer","shieldman","Iron Bulwark","#93c5fd","#60a5fa"],["frost","icearcher","mystic","Absolute Zero","#60a5fa","#e0f2fe"],["ballista","sentry","slinger","Siege Network","#f59e0b","#fbbf24"],["hunter","archer","beastmaster","Pack Hunt","#22c55e","#10b981"]],s=[],c={Shatter:"Bonus damage to slowed enemies with icy burst.","Sanctified Nova":"Paladin pulses also damage nearby foes.","Backstab Bleed":"Isolated targets suffer heavy bleed.","Bulwark Blessing":"Cleric pulses also grant shields.","Pack Volley":"Rangers fire an extra weaker shot.",Impale:"Bonus damage to the cell behind the target.","Arcane Ruin":"Splash damage around the struck target.","Purifying Grove":"Cleanse and small extra heal on pulses.",Headshot:"Chance to massively amplify a ranged hit.",Overwatch:"Auto-fire at a random enemy after a hit.","Deep Freeze":"Slow may briefly stun on hit.","Holy Bash":"Smite in a small cone behind the target.",Judgement:"On kill, smite adjacent enemies.","Volley Spread":"Extra arrows to nearby enemies.","Chain Bolt":"Lightning arcs to an adjacent enemy.","Rage Shock":"Shock damage on hit; screenshake.",Lunge:"Brief slow on low-HP enemies on hit.","Long Reach":"Extra spear jab to the same target.",Aegis:"Heal pulses grant damage reduction.",Wings:"Smite ring on Valkyrie melee hits.",Wall:"Shield ally directly behind attacker.","Holy Radiance":"Radiant ring when Paladin heals.",Glacier:"Extra frost ring + damage on slowed foes.",Hex:"Brief slow on hit with arcane rune.","Piercing Round":"Try to hit the enemy behind the target.","Pack Mending":"Heal a nearby ally on Beastmaster hit.","Field Triage":"Heal the lowest-HP ally on heal pulse.","Arena Roar":"Damage/shield effect to nearby units.",Oathkeeper:"Knight gains a small shield on hit.","Falcon Volley":"Extra arrow to the same target.",Hexburst:"Bonus damage vs slowed or stunned enemies.","Explosive Load":"Small AoE around the target.",Elixir:"Heal pulses grant small shields.",Skyfall:"Smite ring at target on melee hit.",Bewilder:"Chance to stun low-HP targets.","Bulwark Roar":"Grants shields to adjacent allies.","Blessed Grove":"Extra heals around Paladin pulses.","Focus Fire":"Chance to refire at the same target.","Aerial Bulwark":"Valkyrie shield when near Guardian.",Serenity:"Monk gains a small HoT after hits.","Holy Triumvirate":"Radiant beam + smite burst on hits.","Arrow Storm":"Extra projectiles to two random targets.","Phalanx Wall":"Brief DR to adjacent allies with shock.",Sanctuary:"Bigger extra heal + radiant-green overlay on pulses.","Chaos Nexus":"Rune bursts damage enemies adjacent to the target.","Piercing Wall":"Thrust damage continues past target.","Hymn of Life":"Heal pulses add soft HoT ticks with verdant FX.",Tempest:"Bolt + rune-beam combo adds bonus damage.",Deathblossom:"Melee hits apply rip strikes around the target.","Iron Bulwark":"On melee hit, pulse small shields to adjacent allies.","Absolute Zero":"Slow  chance to freeze and bonus damage with icy FX.","Siege Network":"Launch a bomb that deals small AoE on impact.","Pack Hunt":"Chance to fire two extra weaker shots at the target."};for(const[l,u,x,f,v]of a)(n.get(l)??0)>0&&(n.get(u)??0)>0&&s.push({key:`${l}+${u}`,name:x,members:[l,u],c1:f,c2:v,desc:c[x]||"",kind:"duo"});for(const[l,u,x,f,v,y]of i)(n.get(l)??0)>0&&(n.get(u)??0)>0&&(n.get(x)??0)>0&&s.push({key:`${l}+${u}+${x}`,name:f,members:[l,u,x],c1:v,c2:y,desc:c[f]||"",kind:"trio"});return s.sort((l,u)=>l.kind===u.kind?0:l.kind==="trio"?-1:1),s},[e,t]);return o.jsxs("div",{children:[o.jsx("div",{style:{fontWeight:900,marginBottom:8},children:"Active Duos & Trios"}),o.jsxs("div",{style:{display:"grid",gap:6},children:[r.length===0&&o.jsx("div",{style:{fontSize:12,color:"var(--muted)"},children:"No duo or trio synergies active."}),r.map(n=>o.jsxs("div",{style:{display:"grid",gap:4,padding:8,border:"1px solid var(--panel-border)",borderRadius:10,background:"var(--panel)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("div",{style:{width:10,height:10,borderRadius:999,background:n.c1,boxShadow:`0 0 10px ${n.c1}`}}),o.jsx("div",{style:{width:10,height:10,borderRadius:999,background:n.c2,boxShadow:`0 0 10px ${n.c2}`}}),o.jsx("div",{style:{fontWeight:800},children:n.name}),o.jsx("div",{style:{marginLeft:"auto",fontSize:11,color:"var(--muted)"},children:n.members.join(" + ")})]}),o.jsx("div",{style:{fontSize:12,color:"var(--text)"},children:n.desc})]},n.key))]})]})}function J0({trait:e}){const t=N(a=>a.shopFocusTrait),r=N(a=>a.setShopFocusTrait),n=t===e;return o.jsx("button",{onClick:()=>r(n?void 0:e),style:{padding:"4px 8px",borderRadius:8,border:n?"1px solid #0ea5e9":"1px solid var(--panel-border)",background:n?"linear-gradient(180deg, #0ea5e9, #0284c7)":"var(--panel)",color:n?"#fff":"var(--text)",fontWeight:800,cursor:"pointer",boxShadow:n?"0 0 0 2px #0ea5e944, 0 0 24px #0ea5e999":"var(--shadow)"},title:n?"Focused (click to clear)":"Focus in shop",children:"Focus in shop"})}function em({onOpenSynergyBook:e}){const t=N(v=>v.board),r=N(v=>v.units),[n,a]=xt.useState(!1),i=xt.useMemo(()=>{const v={};for(const y of Object.values(t)){if(!y)continue;const g=r[y];if(!g||g.team!=="player")continue;const d=zt(g.templateKey);for(const w of d)v[w]=(v[w]??0)+1}return v},[t,r]),s=N(v=>v.setShopFocusTrait),c=Object.entries(i).sort((v,y)=>y[1]-v[1]),l=v=>v>=6?3:v>=4?2:v>=2?1:0,u=v=>v===3?"III":v===2?"II":v===1?"I":"",x={Vanguard:[2,4,6],Ranger:[2,4,6],Skirmisher:[2,4,6],Support:[2,4,6],Caster:[2,4,6],Lancer:[2,4,6]},f={Vanguard:"Start of combat: grant team shields (14/26/40 per star) and small ATK (+1/+3/+5).",Ranger:"Increase team attack speed by 8%/14%/20%.",Skirmisher:"Increase team move speed by 8%/14%/20%.",Support:"Increase healing done by 15%/25%/40%.",Caster:"Increase healing by 5%/10%/15% and on-hit slow chance by +5%/+8%/+12%.",Lancer:"No set bonus yet (future spear-line effects)."};return o.jsxs("div",{style:{position:"absolute",top:8,left:8,right:8,display:"flex",gap:8,justifyContent:"space-between",alignItems:"center",pointerEvents:"none",zIndex:1},children:[o.jsxs("div",{style:{display:"flex",gap:8,pointerEvents:"auto"},children:[o.jsx("button",{onClick:()=>a(!0),style:{padding:"4px 8px",borderRadius:8,border:"1px solid var(--panel-border)",background:"var(--panel)",color:"var(--text)",fontWeight:800,cursor:"pointer",boxShadow:"var(--shadow)"},children:"Synergies"}),o.jsx("button",{onClick:()=>a(!0),title:"Open synergy help",style:{padding:"4px 8px",borderRadius:8,border:"1px solid var(--panel-border)",background:"var(--panel)",color:"var(--text)",fontWeight:800,cursor:"pointer",boxShadow:"var(--shadow)"},children:"?"}),o.jsx("button",{onClick:e,style:{padding:"4px 8px",borderRadius:8,border:"1px solid var(--panel-border)",background:"var(--panel)",color:"var(--text)",fontWeight:800,cursor:"pointer",boxShadow:"var(--shadow)"},children:"Duo/Trio Book"})]}),o.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",pointerEvents:"auto"},children:[c.length>0&&c.map(([v,y])=>{const g=l(y),d=g>=3?"#22c55e":g===2?"#0ea5e9":g===1?"#64748b":"#94a3b8",w=x[v]||[2,4,6],h=w.find(p=>y<p)??w[w.length-1];return o.jsxs("div",{style:{pointerEvents:"auto",display:"inline-flex",alignItems:"center",gap:8,padding:"4px 10px",borderRadius:999,background:"var(--panel)",border:"1px solid var(--panel-border)",boxShadow:"var(--shadow)",color:"var(--text)",cursor:"pointer"},title:`${v}: ${y} (${w.join("/")})`,onClick:()=>s(v),children:[o.jsx("span",{style:{fontWeight:900,letterSpacing:.4,color:"var(--text)"},children:v}),o.jsx("span",{style:{fontWeight:900,color:d},children:u(g)}),o.jsxs("span",{style:{fontSize:11,color:"var(--muted)"},children:[y,"/",h]})]},v)}),n&&o.jsxs("div",{style:{position:"absolute",top:36,left:8,right:8,margin:"0 auto",maxWidth:680,background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:12,boxShadow:"var(--shadow)",padding:12,pointerEvents:"auto"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:8},children:[o.jsx("div",{style:{fontWeight:900,fontSize:14,color:"var(--text)"},children:"Synergies"}),o.jsx("button",{onClick:()=>a(!1),style:{marginLeft:"auto",padding:"4px 8px",borderRadius:8,border:"1px solid var(--panel-border)",background:"var(--panel)",color:"var(--text)",cursor:"pointer",boxShadow:"var(--shadow)"},children:"Close"})]}),o.jsx("div",{style:{display:"grid",gap:8},children:["Vanguard","Ranger","Skirmisher","Support","Caster","Lancer"].map(v=>{const y=i[v]||0,g=l(y),d=x[v],w=g>=3?"#22c55e":g===2?"#0ea5e9":g===1?"#64748b":"#94a3b8";return o.jsxs("div",{style:{border:"1px solid var(--panel-border)",borderRadius:10,padding:8,background:"var(--panel)",color:"var(--text)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("div",{style:{fontWeight:900,color:"var(--text)"},children:v}),o.jsx("div",{style:{fontWeight:900,color:w},children:u(g)}),o.jsxs("div",{style:{marginLeft:"auto",fontSize:12,color:"var(--muted)"},children:[y," on board  thresholds ",d.join("/")]})]}),o.jsx("div",{style:{fontSize:12,marginTop:4,color:"var(--text)"},children:f[v]}),o.jsx("div",{style:{display:"flex",gap:6,marginTop:6},children:o.jsx(J0,{trait:v})})]},v)})})]})]})]})}function tm(){const[e,t]=xt.useState(!1),r=N(s=>s.alwaysShowRanges||!1),n=N(s=>s.shakeIntensity||1),a=s=>N.setState(c=>({...c,alwaysShowRanges:s})),i=s=>N.setState(c=>({...c,shakeIntensity:Math.max(0,Math.min(2,Math.round(s*100)/100))}));return o.jsxs("div",{style:{position:"relative"},children:[o.jsxs("button",{onClick:()=>t(!e),className:"pill",style:{cursor:"pointer"},children:[o.jsx("span",{className:"key",children:"UI"})," ",o.jsx("strong",{children:"Settings"})]}),e&&o.jsx("div",{style:{position:"absolute",top:"100%",right:0,marginTop:6,background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:10,boxShadow:"var(--shadow)",padding:10,zIndex:5,width:240},children:o.jsxs("div",{style:{display:"grid",gap:10},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8,fontSize:12,color:"var(--text)"},children:[o.jsx("span",{children:"Always show ranges"}),o.jsx("input",{type:"checkbox",checked:!!r,onChange:s=>a(s.target.checked)})]}),o.jsxs("label",{style:{display:"grid",gap:6,fontSize:12,color:"var(--text)"},children:[o.jsx("span",{children:"Shake intensity"}),o.jsx("input",{type:"range",min:0,max:2,step:.1,value:n,onChange:s=>i(Number(s.target.value))}),o.jsxs("div",{style:{textAlign:"right",color:"var(--muted)"},children:[n.toFixed(1),"x"]})]})]})})]})}function rm(){const e=N(a=>a.log),[t,r]=xt.useState(!1),n=e.slice(-8);return o.jsxs("div",{className:"panel soft soft-scroll",style:{marginTop:6,maxHeight:t?120:80},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:"1px solid var(--panel-border)"},children:[o.jsx("div",{style:{fontWeight:800},children:"Activity"}),o.jsx("button",{onClick:()=>r(a=>!a),style:{marginLeft:"auto",padding:"4px 8px",borderRadius:8,border:"1px solid var(--panel-border)",background:"rgba(0,0,0,0.04)",cursor:"pointer"},children:t?"Less":"More"})]}),o.jsxs("div",{style:{padding:10,display:"grid",gap:6},children:[n.length===0&&o.jsx("div",{style:{fontSize:12,color:"var(--muted)"},children:"No recent events."}),n.map((a,i)=>o.jsx("div",{style:{fontSize:12,color:"var(--text)"},children:a},i))]})]})}function nm({from:e,to:t,startedAt:r,durationMs:n}){const[a,i]=ae.useState(performance.now());ae.useEffect(()=>{let f=0;const v=()=>{i(performance.now()),performance.now()-r<n+100&&(f=requestAnimationFrame(v))};return f=requestAnimationFrame(v),()=>cancelAnimationFrame(f)},[r,n]);const s=Math.min(1,(a-r)/n),c=f=>1-Math.pow(1-f,3),l=Math.round(e+(t-e)*c(s)),x=Math.max(0,Math.min(1,l/100));return o.jsxs("div",{style:{marginTop:"1.5rem",pointerEvents:"none"},children:[o.jsxs("div",{style:{fontSize:"1.25rem",color:"#fff",textAlign:"center",marginBottom:"0.5rem",textShadow:"0 0 0.5rem #000"},children:["HP ",l]}),o.jsx("div",{style:{position:"relative",width:"100%",maxWidth:300,height:16,border:"2px solid rgba(255,255,255,0.2)",borderRadius:999,overflow:"hidden",background:"rgba(0,0,0,0.6)"},children:o.jsx("div",{style:{position:"absolute",inset:0,width:`${x*100}%`,background:"linear-gradient(90deg, #ef4444, #b91c1c)",borderRadius:999,boxShadow:"0 0 1rem rgba(220,38,38,0.7) inset",transition:"width 200ms ease-out"}})})]})}function am(){const e=N(a=>a.phase),t=N(a=>a.roundResult),r=e==="result",n=(t==null?void 0:t.wasWin)??!1;return o.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)",opacity:r?1:0,transition:"opacity 300ms ease-in-out",pointerEvents:r?"auto":"none",zIndex:10},children:o.jsxs("div",{style:{transform:r?"scale(1)":"scale(0.9)",opacity:r?1:0,transition:"transform 400ms cubic-bezier(0.5, 1.5, 0.5, 1), opacity 300ms ease-in-out",background:"rgba(17, 24, 39, 0.8)",padding:"2rem 3rem",borderRadius:"1rem",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)",textAlign:"center"},children:[o.jsx("h1",{style:{fontSize:"4rem",fontWeight:900,color:n?"#22c55e":"#ef4444",textShadow:"0 0 1rem #000, 0 0 2rem #000"},children:n?"Victory":"Round Lost"}),!n&&(t==null?void 0:t.hpLoss)&&o.jsxs("div",{style:{marginTop:"-0.5rem",fontSize:"1.5rem",color:"#f87171",textShadow:"0 0 0.75rem #000"},children:["-",t.hpLoss," HP"]}),!n&&N.getState().recentHpAnim&&o.jsx(nm,{...N.getState().recentHpAnim})]})})}function im(){const e=N(n=>n.health),[t,r]=ae.useState(!1);return ae.useEffect(()=>{e<=0?setTimeout(()=>r(!0),100):r(!1)},[e]),e>0&&!t?o.jsx(o.Fragment,{}):o.jsx("div",{style:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(8px)",opacity:t?1:0,transition:"opacity 500ms ease-in-out",zIndex:20},children:o.jsxs("div",{style:{transform:t?"scale(1)":"scale(0.95)",opacity:t?1:0,transition:"transform 500ms cubic-bezier(0.5, 1.5, 0.5, 1) 100ms, opacity 500ms ease-in-out 100ms",background:"rgba(17, 24, 39, 0.85)",padding:"2.5rem 4rem",borderRadius:"1.25rem",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 15px 40px rgba(0, 0, 0, 0.6)",textAlign:"center",display:"grid",gap:"2rem"},children:[o.jsx("h1",{style:{fontSize:"5rem",fontWeight:900,color:"#dc2626",textShadow:"0 0 1.5rem #b91c1c, 0 0 3rem #b91c1c"},children:"GAME OVER"}),o.jsxs("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center"},children:[o.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.75rem 1.5rem",borderRadius:"0.75rem",border:"1px solid #b91c1c",background:"linear-gradient(180deg, #ef4444, #dc2626)",color:"#fff",fontSize:"1.1rem",fontWeight:700,cursor:"pointer",boxShadow:"0 8px 25px rgba(220, 38, 38, 0.4)",transition:"transform 200ms ease, box-shadow 200ms ease"},onMouseOver:n=>{n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 12px 30px rgba(220, 38, 38, 0.5)"},onMouseOut:n=>{n.currentTarget.style.transform="none",n.currentTarget.style.boxShadow="0 8px 25px rgba(220, 38, 38, 0.4)"},children:"Retry"}),o.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.75rem 1.5rem",borderRadius:"0.75rem",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(31, 41, 55, 0.5)",color:"#d1d5db",fontSize:"1.1rem",fontWeight:700,cursor:"pointer",transition:"background 200ms ease, color 200ms ease"},onMouseOver:n=>{n.currentTarget.style.background="rgba(55, 65, 81, 0.7)",n.currentTarget.style.color="#fff"},onMouseOut:n=>{n.currentTarget.style.background="rgba(31, 41, 55, 0.5)",n.currentTarget.style.color="#d1d5db"},children:"Main Menu"})]})]})})}function om(){const e=N(l=>l.phase),t=N(l=>l.round),r=N(l=>l.gold),n=N(l=>l.health),a=N(l=>l.shakeKey),[i,s]=xt.useState(!1),c=N(l=>l.togglePause);return ae.useEffect(()=>{const l=u=>{u.code==="Space"&&(u.preventDefault(),N.getState().phase==="combat"&&c&&c())};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[c]),o.jsxs("div",{className:"game-grid",children:[o.jsx("div",{className:"left-panel",children:o.jsx("div",{className:"panel soft soft-scroll",style:{flex:"1 1 auto",minHeight:0,overflow:"auto"},children:o.jsx(W0,{})})}),o.jsxs("div",{className:"center-panel",children:[o.jsxs("div",{className:"hud",children:[o.jsxs("div",{className:"pill",children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"#94a3b8","aria-hidden":!0,style:{marginRight:4},children:o.jsx("circle",{cx:"12",cy:"12",r:"10"})}),o.jsx("span",{className:"key",children:"Phase"})," ",o.jsx("strong",{children:e})]}),o.jsxs("div",{className:"pill",children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"#94a3b8","aria-hidden":!0,style:{marginRight:4},children:o.jsx("path",{d:"M7 4h10v2H7zM7 11h10v2H7zM7 18h10v2H7z"})}),o.jsx("span",{className:"key",children:"Round"})," ",o.jsx("strong",{children:t})]}),o.jsxs("div",{className:"pill ok",children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"var(--accent)","aria-hidden":!0,style:{marginRight:4},children:o.jsx("path",{d:"M12 2l3 7h7l-5.5 4.1L18 21l-6-4-6 4 1.5-7.9L2 9h7z"})}),o.jsx("span",{className:"key",children:"Gold"})," ",o.jsx("strong",{style:{color:"var(--accent)"},children:r})]}),o.jsxs("div",{className:"pill warn",children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"var(--warn)","aria-hidden":!0,style:{marginRight:4},children:o.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 6 4 4 6.5 4c1.74 0 3.41 1.01 4.22 2.55C11.09 5.01 12.76 4 14.5 4 17 4 19 6 19 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),o.jsx("span",{className:"key",children:"HP"})," ",o.jsx("strong",{style:{color:"var(--warn)"},children:n})]}),o.jsx(tm,{})]}),o.jsxs("div",{style:{position:"relative",transition:"transform 60ms ease",transform:a?`translate(${(Math.random()*4-2)*(N.getState().shakeIntensity||1)}px, ${(Math.random()*4-2)*(N.getState().shakeIntensity||1)}px)`:"none"},className:"panel soft",children:[o.jsx(em,{onOpenSynergyBook:()=>s(!0)}),o.jsxs("div",{style:{display:"flex",gap:12,alignItems:"start"},children:[o.jsx(L0,{}),o.jsx("div",{className:"panel soft",style:{width:280,maxHeight:"60vh",overflow:"auto",padding:8},children:o.jsx(Z0,{})})]}),o.jsx(am,{}),o.jsx(im,{})]}),o.jsx("div",{className:"panel soft",style:{marginTop:6,position:"sticky",top:8,zIndex:2},children:o.jsx(Q0,{})}),o.jsx("div",{className:"panel soft",style:{marginTop:6},children:o.jsx(D0,{})}),o.jsx(rm,{})]}),i&&o.jsx(q0,{onClose:()=>s(!1)})]})}const sm=()=>o.jsxs("div",{style:{padding:"20px",fontFamily:"Arial, sans-serif",lineHeight:"1.6"},children:[o.jsx("h1",{children:"How to Play Tower Defender"}),o.jsxs("section",{children:[o.jsx("h2",{children:"Introduction"}),o.jsx("p",{children:"Welcome to Tower Defender! This guide will teach you the fundamentals of the game, from building your first army to mastering advanced strategies. Your goal is to defeat waves of enemies and be the last player standing."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"Core Concepts"}),o.jsx("p",{children:"The game revolves around a few key concepts:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"The Board & Placement:"})," The game is played on a grid. During the Prep Phase, you can place units from your bench onto your side of the board. Where you place them is crucialprotect your fragile, high-damage units behind durable frontline tanks."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Economy & The Shop:"})," You earn gold automatically each round, plus bonus gold for winning or losing streaks. You can also earn interest by saving gold (1 extra gold per 10 you have, up to a maximum). Use your gold to buy units from the shop, refresh the shop for new options, or buy experience to level up faster."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Upgrading Units:"})," You can upgrade your units by combining three identical copies. For example, three 1-star Warriors will combine into a single, more powerful 2-star Warrior. Three 2-star units will combine into a final 3-star version."]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"Building Your Army"}),o.jsx("p",{children:"A strong army is more than just a collection of powerful units. It's about creating a team that works together."}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Unit Roles:"})," Units generally fall into a few categories. ",o.jsx("strong",{children:"Tanks"})," (like the Warrior) are durable and meant to absorb damage on the frontline. ",o.jsx("strong",{children:"Ranged DPS"})," (like the Archer) deal damage from a safe distance. ",o.jsx("strong",{children:"Casters"})," have unique abilities that can turn the tide of battle."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Synergies Explained:"})," Every unit has traits (e.g., Vanguard, Ranger). When you have multiple units with the same trait on the board, you unlock powerful bonuses called synergies. For example, having two ",o.jsx("strong",{children:"Vanguard"})," units might grant them a shield at the start of combat. The more units of the same trait you have, the stronger the bonus becomes."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Special Synergies:"})," Some specific combinations of units unlock unique effects. For example, having both a Frost and a Marksman on your team might cause their attacks to ignore enemy shields. Experiment to discover these powerful duos!"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Items Explained:"})," After some combat rounds, you may be rewarded with items. Drag and drop these onto your units to give them powerful stat boosts or new abilities. An item like the ",o.jsx("strong",{children:"Berserker Axe"})," grants raw damage, while ",o.jsx("strong",{children:"Swift Gloves"})," increases attack speed."]})]})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"The Combat Phase"}),o.jsx("p",{children:"Once the Prep Phase timer runs out, combat begins automatically. Your units will move and attack based on their stats and programming. You can't control them directly, so your prep-phase strategy is what matters most. Watch how the fight unfolds to learn what's working and what isn't."})]}),o.jsxs("section",{children:[o.jsx("h2",{children:"Strategy & Tactics"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Early Game (Rounds 1-10):"})," Focus on building a solid 2-star frontline and look for early synergies. Don't be afraid to lose a little health while you build up your economy."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Mid Game (Rounds 11-20):"})," This is where team composition starts to matter. Decide on a core strategy based on the units and items you've found. Start spending gold to level up and find key units."]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Late Game (Rounds 21+):"})," Fights are decided by powerful 3-star units and well-executed synergies. Positioning is criticala single mistake can cost you the game. Scout your remaining opponents to counter their strategies."]})]})]})]});function lm(){return o.jsxs("div",{className:"app-root",children:[o.jsx("header",{className:"app-header",children:o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[o.jsx("h1",{className:"app-title",children:"Auto-Chess MVP"}),o.jsx(cm,{}),o.jsx(um,{}),o.jsx("div",{style:{marginLeft:"auto"}}),o.jsx(dm,{})]})}),o.jsxs("main",{children:[o.jsx(om,{}),o.jsx(fm,{})]})]})}function cm(){const[e,t]=ae.useState(!1);return o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>t(!0),style:{marginLeft:"auto",padding:"6px 10px",borderRadius:8,border:"1px solid var(--panel-border)",background:"var(--panel)",color:"var(--text)",fontWeight:800,cursor:"pointer",boxShadow:"var(--shadow)"},title:"Open Strategy Guide",children:"Strategy Guide"}),e&&o.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",zIndex:99},onClick:()=>t(!1),children:o.jsxs("div",{onClick:r=>r.stopPropagation(),style:{position:"absolute",top:70,left:"50%",transform:"translateX(-50%)",width:"min(1000px, 92vw)",maxHeight:"80vh",overflow:"auto",background:"var(--panel)",border:"1px solid var(--panel-border)",borderRadius:12,boxShadow:"var(--shadow)",padding:16},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:8},children:[o.jsx("div",{style:{fontWeight:900,fontSize:16},children:"Strategy Guide"}),o.jsx("button",{onClick:()=>t(!1),style:{marginLeft:"auto",padding:"4px 8px",borderRadius:8,border:"1px solid var(--panel-border)",background:"rgba(0,0,0,0.04)",cursor:"pointer"},children:"Close"})]}),o.jsx(sm,{})]})})]})}function um(){const[e,t]=ae.useState(()=>{try{return localStorage.getItem("themeMode")||(localStorage.getItem("theme")==="dark"?"dark":"light")}catch{return"light"}});return ae.useEffect(()=>{const r=document.documentElement;r.classList.remove("theme-dark","theme-ocean","theme-forest","theme-ember"),e==="dark"?r.classList.add("theme-dark"):e==="ocean"?r.classList.add("theme-ocean"):e==="forest"?r.classList.add("theme-forest"):e==="ember"&&r.classList.add("theme-ember");try{localStorage.setItem("themeMode",e)}catch{}},[e]),o.jsx("div",{style:{display:"inline-flex",alignItems:"center",gap:6},children:o.jsxs("select",{value:e,onChange:r=>t(r.target.value),style:{padding:"6px 10px",borderRadius:8,border:"1px solid var(--panel-border)",background:"var(--panel)",color:"var(--text)",fontWeight:800,cursor:"pointer",boxShadow:"var(--shadow)"},title:"Theme",children:[o.jsx("option",{value:"light",children:"Light"}),o.jsx("option",{value:"dark",children:"Dark"}),o.jsx("option",{value:"ocean",children:"Ocean"}),o.jsx("option",{value:"forest",children:"Forest"}),o.jsx("option",{value:"ember",children:"Ember"})]})})}function dm(){const e=N(l=>l.level),t=N(l=>l.xp),r=N(l=>l.units),n=N(l=>l.board),a=ae.useMemo(()=>Object.values(n).filter(Boolean).filter(l=>{const u=r[l];return!!u&&u.team==="player"}).length,[n,r]),i=Math.min(15,e),s=4+e*2,c=Math.max(0,Math.min(1,t/s));return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsxs("div",{className:"pill",title:`Level ${e}  XP ${t}/${s}`,style:{cursor:"default"},children:[o.jsx("span",{className:"key",children:"Lv"})," ",o.jsx("strong",{children:e}),o.jsx("div",{style:{width:80,height:6,background:"rgba(0,0,0,0.15)",borderRadius:999,overflow:"hidden",border:"1px solid var(--panel-border)",marginLeft:8},children:o.jsx("div",{style:{width:`${c*100}%`,height:"100%",background:"linear-gradient(90deg, var(--accent), #fff)",borderRadius:999}})})]}),o.jsxs("div",{className:"pill",title:"Units on board",style:{cursor:"default"},children:[o.jsx("span",{className:"key",children:"Units"})," ",o.jsxs("strong",{children:[a,"/",i]})]})]})}function fm(){const e=N(r=>r.toasts||[]),t=r=>N.getState().dismissToast(r);return ae.useEffect(()=>{const r=[];for(const n of e){const a=Math.max(0,n.durationMs-(performance.now()-n.startedAt));r.push(window.setTimeout(()=>t(n.id),a))}return()=>{r.forEach(n=>clearTimeout(n))}},[e]),o.jsx("div",{className:"toast-host",children:e.map(r=>o.jsxs("div",{className:`toast ${r.type}`,onClick:()=>t(r.id),style:{cursor:"pointer"},children:[o.jsx("div",{className:"dot"}),o.jsx("div",{style:{fontWeight:800,fontSize:12},children:r.text})]},r.id))})}const pm=Dd(document.getElementById("root"));pm.render(o.jsx(ae.StrictMode,{children:o.jsx(lm,{})}));
